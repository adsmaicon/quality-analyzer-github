[{"url":"https://api.github.com/repos/keras-team/keras/issues/16340","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16340/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16340/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16340/events","html_url":"https://github.com/keras-team/keras/pull/16340","id":1188774330,"node_id":"PR_kwDOAffHH841b5FQ","number":16340,"title":"Rework a test to avoid instantiating DistributedValues directly.","user":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-31T21:06:13Z","updated_at":"2022-03-31T21:06:13Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16340","html_url":"https://github.com/keras-team/keras/pull/16340","diff_url":"https://github.com/keras-team/keras/pull/16340.diff","patch_url":"https://github.com/keras-team/keras/pull/16340.patch","merged_at":null},"body":"Rework a test to avoid instantiating DistributedValues directly.\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16340/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16339","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16339/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16339/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16339/events","html_url":"https://github.com/keras-team/keras/pull/16339","id":1188735498,"node_id":"PR_kwDOAffHH841bwNq","number":16339,"title":"Update RandomRotation KPL to use the new BaseImageAugmentationLayer","user":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-31T20:45:43Z","updated_at":"2022-03-31T20:45:43Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16339","html_url":"https://github.com/keras-team/keras/pull/16339","diff_url":"https://github.com/keras-team/keras/pull/16339.diff","patch_url":"https://github.com/keras-team/keras/pull/16339.patch","merged_at":null},"body":"Update RandomRotation KPL to use the new BaseImageAugmentationLayer\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16339/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16338","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16338/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16338/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16338/events","html_url":"https://github.com/keras-team/keras/pull/16338","id":1188488876,"node_id":"PR_kwDOAffHH841a36z","number":16338,"title":"Enable the keras dtensor API in OSS.","user":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-31T18:39:32Z","updated_at":"2022-03-31T18:39:32Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16338","html_url":"https://github.com/keras-team/keras/pull/16338","diff_url":"https://github.com/keras-team/keras/pull/16338.diff","patch_url":"https://github.com/keras-team/keras/pull/16338.patch","merged_at":null},"body":"Enable the keras dtensor API in OSS.\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16338/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16337","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16337/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16337/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16337/events","html_url":"https://github.com/keras-team/keras/pull/16337","id":1188355662,"node_id":"PR_kwDOAffHH841abUO","number":16337,"title":"Support increasing batch size","user":{"login":"markus-hinsche","id":1809832,"node_id":"MDQ6VXNlcjE4MDk4MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1809832?v=4","gravatar_id":"","url":"https://api.github.com/users/markus-hinsche","html_url":"https://github.com/markus-hinsche","followers_url":"https://api.github.com/users/markus-hinsche/followers","following_url":"https://api.github.com/users/markus-hinsche/following{/other_user}","gists_url":"https://api.github.com/users/markus-hinsche/gists{/gist_id}","starred_url":"https://api.github.com/users/markus-hinsche/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markus-hinsche/subscriptions","organizations_url":"https://api.github.com/users/markus-hinsche/orgs","repos_url":"https://api.github.com/users/markus-hinsche/repos","events_url":"https://api.github.com/users/markus-hinsche/events{/privacy}","received_events_url":"https://api.github.com/users/markus-hinsche/received_events","type":"User","site_admin":false},"labels":[{"id":3275249389,"node_id":"MDU6TGFiZWwzMjc1MjQ5Mzg5","url":"https://api.github.com/repos/keras-team/keras/labels/size:M","name":"size:M","color":"ededed","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false},"assignees":[{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-31T16:40:28Z","updated_at":"2022-03-31T17:57:47Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16337","html_url":"https://github.com/keras-team/keras/pull/16337","diff_url":"https://github.com/keras-team/keras/pull/16337.diff","patch_url":"https://github.com/keras-team/keras/pull/16337.patch","merged_at":null},"body":"Revive the following contribution: https://github.com/tensorflow/tensorflow/pull/45338\r\n\r\n**Changes:**\r\n- change the behavior of `data_adapter.DataAdapter` and `data_adapter.DataHandler` to accept batch size that are increasing during training\r\n- add unit test with `keras.utils.Sequence` that increases its batch size from 5 to 10 over the course of 2 epochs\r\n- add unit test which checks correct behavior of `data_adapter.DataAdapter` and `data_adapter.DataHandler`\r\n\r\n**Resources:**\r\n- Idea for increasing batch size: https://arxiv.org/abs/1711.00489\r\n- Rasa workaround: https://github.com/RasaHQ/rasa/blob/main/rasa/utils/tensorflow/temp_keras_modules.py#L477\r\n- Rasa BatchSequence which increases batch size over time: https://github.com/RasaHQ/rasa/blob/main/rasa/utils/tensorflow/data_generator.py#L333","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16337/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16336","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16336/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16336/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16336/events","html_url":"https://github.com/keras-team/keras/issues/16336","id":1188242812,"node_id":"I_kwDOAffHH85G0yV8","number":16336,"title":"Unique identifier for models","user":{"login":"pbischoff","id":42649691,"node_id":"MDQ6VXNlcjQyNjQ5Njkx","avatar_url":"https://avatars.githubusercontent.com/u/42649691?v=4","gravatar_id":"","url":"https://api.github.com/users/pbischoff","html_url":"https://github.com/pbischoff","followers_url":"https://api.github.com/users/pbischoff/followers","following_url":"https://api.github.com/users/pbischoff/following{/other_user}","gists_url":"https://api.github.com/users/pbischoff/gists{/gist_id}","starred_url":"https://api.github.com/users/pbischoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pbischoff/subscriptions","organizations_url":"https://api.github.com/users/pbischoff/orgs","repos_url":"https://api.github.com/users/pbischoff/repos","events_url":"https://api.github.com/users/pbischoff/events{/privacy}","received_events_url":"https://api.github.com/users/pbischoff/received_events","type":"User","site_admin":false},"labels":[{"id":820705121,"node_id":"MDU6TGFiZWw4MjA3MDUxMjE=","url":"https://api.github.com/repos/keras-team/keras/labels/type:feature","name":"type:feature","color":"159b2e","default":false,"description":"The user is asking for a new feature."}],"state":"open","locked":false,"assignee":{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false},"assignees":[{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-31T15:12:12Z","updated_at":"2022-03-31T15:12:14Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**System information**.\r\n\r\nTensorFlow version (you are using): 2.7.1\r\nAre you willing to contribute it (Yes/No) : Yes\r\n\r\n**Describe the feature and the current behavior/state**.\r\n\r\nAdding a unique identifier, e.g. some form of a hash string to the model. This would help in tracking model development as it would be possible to save predictions together with the UID and track whether or not predictions have significantly changed for new models.  \r\nThe UID should be updated every time `.compile()` or `.fit()` is called to assure that both changes in the configuration but also changes in the weights after retraining trigger a new identifier.\r\n\r\n**Will this change the current api? How?**\r\n\r\nThe current api won't be affected. The UID could be accessibly as a new model attribute (e.g. `model.signature`).\r\n\r\n**Who will benefit from this feature?**\r\n\r\nProduction users and organisations interchaning models or using models developed by third parties. \r\n\r\n**[Contributing](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md)**\r\n\r\n- Do you want to contribute a PR? (yes/no): yes\r\n- If yes, please read [this page](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md) for instructions\r\n- Briefly describe your candidate solution(if contributing): \r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16336/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16334","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16334/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16334/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16334/events","html_url":"https://github.com/keras-team/keras/pull/16334","id":1187215069,"node_id":"PR_kwDOAffHH841WlCB","number":16334,"title":"Update RandomZoom KPL to use the new BaseImageAugmentationLayer","user":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-31T00:10:31Z","updated_at":"2022-03-31T00:10:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16334","html_url":"https://github.com/keras-team/keras/pull/16334","diff_url":"https://github.com/keras-team/keras/pull/16334.diff","patch_url":"https://github.com/keras-team/keras/pull/16334.patch","merged_at":null},"body":"Update RandomZoom KPL to use the new BaseImageAugmentationLayer\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16334/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16333","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16333/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16333/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16333/events","html_url":"https://github.com/keras-team/keras/issues/16333","id":1186699780,"node_id":"I_kwDOAffHH85Gu5oE","number":16333,"title":"Training is slow when using tf.keras.utils.Sequence with large Numpy arrays","user":{"login":"jvishnuvardhan","id":46058173,"node_id":"MDQ6VXNlcjQ2MDU4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/46058173?v=4","gravatar_id":"","url":"https://api.github.com/users/jvishnuvardhan","html_url":"https://github.com/jvishnuvardhan","followers_url":"https://api.github.com/users/jvishnuvardhan/followers","following_url":"https://api.github.com/users/jvishnuvardhan/following{/other_user}","gists_url":"https://api.github.com/users/jvishnuvardhan/gists{/gist_id}","starred_url":"https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jvishnuvardhan/subscriptions","organizations_url":"https://api.github.com/users/jvishnuvardhan/orgs","repos_url":"https://api.github.com/users/jvishnuvardhan/repos","events_url":"https://api.github.com/users/jvishnuvardhan/events{/privacy}","received_events_url":"https://api.github.com/users/jvishnuvardhan/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-30T16:21:56Z","updated_at":"2022-03-31T12:49:31Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"**Moved from TensorFlow repository**\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **Yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux RHEL Server 7.6**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **2.3.1**\r\n- Python version: **3.6**\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: **10.1/7.6.4**\r\n- GPU model and memory: **NVIDIA V100 32GB**\r\n\r\n**Describe the current behavior**\r\nI'm using `tf.keras.Model.fit()` on a GPU with input as `tf.keras.utils.Sequence` generating batches of `Numpy` arrays. When the generated input or target `Numpy` arrays are large I notice that the training slows down dramatically. Part of this is of course expected due to the host (CPU) to device (GPU) transfer, but the times I'm seeing suggest an additional overhead somewhere else.\r\n\r\nBelow is a minimal example reproducing the issue. To keep things simple, the `Numpy` arrays are created before `data_sequence` starts generating batches, so there is almost no work done by `data_sequence[idx]`. Also, the Model consists of a single linear activation, which should just translate to a NoOp.\r\n\r\nOn an NVIDIA Tesla V100 GPU I get ca. 900ms/step.\r\n```\r\nEpoch 1/10\r\n100/100 [==============================] - 90s 899ms/step - loss: -3.4149e-04\r\nEpoch 2/10\r\n100/100 [==============================] - 91s 907ms/step - loss: -3.4149e-04\r\n...\r\n```\r\nIn TensorFlow Profiler trace_viewer one can see most of the time, namely 700ms, is spent in IteratorGetNextOp::DoCompute (or equally Iterator::Model and Iterator::Prefetch):\r\n![tf_profiler](https://user-images.githubusercontent.com/35227976/97080852-c66f6e00-15fe-11eb-92f4-ea0fef54e98e.png)\r\n\r\n**Describe the expected behavior**\r\nThe input and target `Numpy` arrays per batch combined have a size of `2*N*H*W*C*sizeof(np.float32) = 320 MB`. The CPU to GPU transfer bandwidth should be around `12.4 GB/s`, e.g. according to the [sample bandwidth test](https://github.com/NVIDIA/cuda-samples/tree/v10.1/Samples/bandwidthTest) from NVIDIA:\r\n```\r\nHost to Device Bandwidth, 1 Device(s)\r\n PINNED Memory Transfers\r\n   Transfer Size (Bytes)        Bandwidth(GB/s)\r\n   32000000                     12.4\r\n```\r\nso the CPU to GPU transfer cannot explain the almost 900ms per batch alone.\r\n\r\n**Standalone code to reproduce the issue**\r\n```python\r\nimport tqdm\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.utils import Sequence\r\n\r\nclass NumpySequence(Sequence):\r\n    def __init__(self, x, y):\r\n        self.x = x\r\n        self.y = y\r\n\r\n    def __len__(self):\r\n        return len(self.x)\r\n\r\n    def __getitem__(self, idx):\r\n        return self.x[idx], self.y[idx]\r\n\r\nworkers = 1\r\nsteps_per_epoch, epochs = 100, 10\r\nN, H, W, C = 4, 1000, 1000, 10\r\n\r\nx_train = []\r\ny_train = []\r\nrng = np.random.default_rng()\r\nfor step in tqdm.tqdm(range(steps_per_epoch)):\r\n    x_train.append(rng.standard_normal(size=(N, H, W, C), dtype=np.float32))\r\n    y_train.append(rng.standard_normal(size=(N, H, W, C), dtype=np.float32))\r\n\r\ndata_sequence = NumpySequence(x_train, y_train)\r\n\r\nmodel = tf.keras.models.Sequential([tf.keras.layers.Activation(\"linear\")])\r\nmodel.compile(optimizer='adam', loss=tf.keras.losses.CategoricalCrossentropy())\r\nmodel.fit(data_sequence, epochs=epochs, workers=workers)\r\n```\r\n\r\n**Is `TensorFlow` doing some additional serialization or memory copies of the `Numpy` arrays? If so, is there any way to prevent them?**\r\n\r\nI'm aware of `tf.data.Dataset` and the optimizations it applies. Unfortunately, my actual pre-processing pipeline, of which the above example is only a simple caricature, is too complex to port to `tf.data.Dataset`. Also, if I understand it correctly, `tf.keras.Model.fit()` internally transforms the `tf.keras.utils.Sequence` to `tf.data.Dataset` using the `from_generator` generator method.\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16333/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16332","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16332/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16332/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16332/events","html_url":"https://github.com/keras-team/keras/pull/16332","id":1186621600,"node_id":"PR_kwDOAffHH841UkPR","number":16332,"title":"Fix TypeError positional argument when used conjointly with tfa wrappers","user":{"login":"lucasdavid","id":1595030,"node_id":"MDQ6VXNlcjE1OTUwMzA=","avatar_url":"https://avatars.githubusercontent.com/u/1595030?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasdavid","html_url":"https://github.com/lucasdavid","followers_url":"https://api.github.com/users/lucasdavid/followers","following_url":"https://api.github.com/users/lucasdavid/following{/other_user}","gists_url":"https://api.github.com/users/lucasdavid/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasdavid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasdavid/subscriptions","organizations_url":"https://api.github.com/users/lucasdavid/orgs","repos_url":"https://api.github.com/users/lucasdavid/repos","events_url":"https://api.github.com/users/lucasdavid/events{/privacy}","received_events_url":"https://api.github.com/users/lucasdavid/received_events","type":"User","site_admin":false},"labels":[{"id":2793717005,"node_id":"MDU6TGFiZWwyNzkzNzE3MDA1","url":"https://api.github.com/repos/keras-team/keras/labels/ready%20to%20pull","name":"ready to pull","color":"006b75","default":false,"description":"Ready to be merged into the codebase"},{"id":3261964274,"node_id":"MDU6TGFiZWwzMjYxOTY0Mjc0","url":"https://api.github.com/repos/keras-team/keras/labels/size:XS","name":"size:XS","color":"ededed","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false},"assignees":[{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-30T15:20:17Z","updated_at":"2022-03-30T22:45:53Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16332","html_url":"https://github.com/keras-team/keras/pull/16332","diff_url":"https://github.com/keras-team/keras/pull/16332.diff","patch_url":"https://github.com/keras-team/keras/pull/16332.patch","merged_at":null},"body":"Some wrappers in tensorflow-addons (eg. `MultiOptimizer`) only accept the list of grads/vars as positional arguments, and reduce the remaining arguments into `**kwargs` that will be passed onto the inner optimizer. Applying `LossScalerOptimizer` to them raises the following error:\r\n\r\n```\r\nFile \".../python3.9/site-packages/keras/mixed_precision/loss_scale_optimizer.py\", line 671, in _apply_gradients\r\n    self._optimizer.apply_gradients(\r\n\r\nTypeError: apply_gradients() takes 2 positional arguments but 3 were given\r\n```\r\n\r\nWhich can be easily fixed by transforming `name` into a named argument.\r\nThis way is also more consistent with how `keras.optimizer_v2.optimizer_v2.OptimizerV2#minimize` invokes `apply_gradients`.","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16332/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16331","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16331/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16331/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16331/events","html_url":"https://github.com/keras-team/keras/pull/16331","id":1186577461,"node_id":"PR_kwDOAffHH841Uazr","number":16331,"title":"minor documention fix","user":{"login":"bmatschke","id":38161508,"node_id":"MDQ6VXNlcjM4MTYxNTA4","avatar_url":"https://avatars.githubusercontent.com/u/38161508?v=4","gravatar_id":"","url":"https://api.github.com/users/bmatschke","html_url":"https://github.com/bmatschke","followers_url":"https://api.github.com/users/bmatschke/followers","following_url":"https://api.github.com/users/bmatschke/following{/other_user}","gists_url":"https://api.github.com/users/bmatschke/gists{/gist_id}","starred_url":"https://api.github.com/users/bmatschke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bmatschke/subscriptions","organizations_url":"https://api.github.com/users/bmatschke/orgs","repos_url":"https://api.github.com/users/bmatschke/repos","events_url":"https://api.github.com/users/bmatschke/events{/privacy}","received_events_url":"https://api.github.com/users/bmatschke/received_events","type":"User","site_admin":false},"labels":[{"id":2793717005,"node_id":"MDU6TGFiZWwyNzkzNzE3MDA1","url":"https://api.github.com/repos/keras-team/keras/labels/ready%20to%20pull","name":"ready to pull","color":"006b75","default":false,"description":"Ready to be merged into the codebase"},{"id":3261964274,"node_id":"MDU6TGFiZWwzMjYxOTY0Mjc0","url":"https://api.github.com/repos/keras-team/keras/labels/size:XS","name":"size:XS","color":"ededed","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false},"assignees":[{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-30T14:48:17Z","updated_at":"2022-03-30T22:44:55Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16331","html_url":"https://github.com/keras-team/keras/pull/16331","diff_url":"https://github.com/keras-team/keras/pull/16331.diff","patch_url":"https://github.com/keras-team/keras/pull/16331.patch","merged_at":null},"body":null,"reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16331/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16330","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16330/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16330/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16330/events","html_url":"https://github.com/keras-team/keras/pull/16330","id":1185906934,"node_id":"PR_kwDOAffHH841SP2t","number":16330,"title":"Expose tf.experimental.dtensor as public API.","user":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-30T05:32:08Z","updated_at":"2022-03-30T05:32:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16330","html_url":"https://github.com/keras-team/keras/pull/16330","diff_url":"https://github.com/keras-team/keras/pull/16330.diff","patch_url":"https://github.com/keras-team/keras/pull/16330.patch","merged_at":null},"body":"Expose tf.experimental.dtensor as public API.\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16330/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16327","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16327/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16327/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16327/events","html_url":"https://github.com/keras-team/keras/issues/16327","id":1185807879,"node_id":"I_kwDOAffHH85Grf4H","number":16327,"title":"Val accuracy not changing","user":{"login":"allenye66","id":46653284,"node_id":"MDQ6VXNlcjQ2NjUzMjg0","avatar_url":"https://avatars.githubusercontent.com/u/46653284?v=4","gravatar_id":"","url":"https://api.github.com/users/allenye66","html_url":"https://github.com/allenye66","followers_url":"https://api.github.com/users/allenye66/followers","following_url":"https://api.github.com/users/allenye66/following{/other_user}","gists_url":"https://api.github.com/users/allenye66/gists{/gist_id}","starred_url":"https://api.github.com/users/allenye66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/allenye66/subscriptions","organizations_url":"https://api.github.com/users/allenye66/orgs","repos_url":"https://api.github.com/users/allenye66/repos","events_url":"https://api.github.com/users/allenye66/events{/privacy}","received_events_url":"https://api.github.com/users/allenye66/received_events","type":"User","site_admin":false},"labels":[{"id":192940628,"node_id":"MDU6TGFiZWwxOTI5NDA2Mjg=","url":"https://api.github.com/repos/keras-team/keras/labels/type:support","name":"type:support","color":"159b2e","default":false,"description":"User is asking for help / asking an implementation question. Stackoverflow would be better suited."},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false},"assignees":[{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-30T03:14:35Z","updated_at":"2022-03-31T02:48:23Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I am trying to train a LSTM to binary classify stock market data.\r\n\r\nMy dataset contains 543 rows of data, with each row having 150 columns. The data has been standardized.\r\n\r\n<img width=\"754\" alt=\"WCWbl\" src=\"https://user-images.githubusercontent.com/46653284/160743771-79e98c88-02b6-4078-a375-3adbff3c0d55.png\">\r\n\r\nI have ~600 samples, each has 300 time steps and each time step has just 1 feature (the price). My reshaped data is (500, 300, 1) for training, and (100, 300, 1) for testing.\r\n\r\nMy labels are either 1 or 0.\r\n<img width=\"643\" alt=\"DkB34\" src=\"https://user-images.githubusercontent.com/46653284/160743956-624b52ae-1c51-4ac7-9682-66fd0f7ca743.png\">\r\n\r\n\r\nHowever, when training my model, my val accuracy never changes no matter what I try. I believe it might be the data dimensions I am passing in. Does anyone know how to improve my model?\r\n\r\n```\r\nX_train, X_test, y_train, y_test = train_test_split(df, labels, random_state = 0, test_size = 0.2, stratify = labels)\r\n#train and test shape is (434, 300) and (109, 300)\r\nX_train = tf.reshape(X_train, X_train.shape + (1,))\r\nX_test = tf.reshape(X_test, X_test.shape + (1,))\r\n#train and test shape is (434, 300, 1) and (300, 150, 1)\r\n\r\n\r\nmodel = Sequential()\r\nmodel.add(LSTM(64, dropout=0, recurrent_dropout=0.2,go_backwards= True, input_shape=(300, 1)))\r\nmodel.add(Dropout(0.5))\r\nmodel.add(Dense(1,activation='sigmoid'))\r\nmodel.compile(loss = \"binary_crossentropy\", optimizer = 'adam', metrics=['accuracy'])\r\nmodel.summary()\r\n\r\n```\r\n<img width=\"610\" alt=\"Ttydr\" src=\"https://user-images.githubusercontent.com/46653284/160744044-ff6b49a9-6d7a-4ec1-a075-c4740c7b89ed.png\">\r\n\r\n```\r\nhistory = model.fit(X_train,y_train, epochs = 10,batch_size=1,validation_data = (X_test, y_test), shuffle = True)\r\n\r\n\r\n```\r\n<img width=\"1083\" alt=\"oiBrO\" src=\"https://user-images.githubusercontent.com/46653284/160744078-f7e4e1aa-04bf-4095-9375-57a388a096d4.png\">\r\n\r\nI've tried different models, changing the data, but the val accuracy can't seem to change.\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16327/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16326","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16326/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16326/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16326/events","html_url":"https://github.com/keras-team/keras/pull/16326","id":1185664453,"node_id":"PR_kwDOAffHH841Ra2y","number":16326,"title":"Fix typos in data_adapter.py","user":{"login":"taegeonum","id":1371383,"node_id":"MDQ6VXNlcjEzNzEzODM=","avatar_url":"https://avatars.githubusercontent.com/u/1371383?v=4","gravatar_id":"","url":"https://api.github.com/users/taegeonum","html_url":"https://github.com/taegeonum","followers_url":"https://api.github.com/users/taegeonum/followers","following_url":"https://api.github.com/users/taegeonum/following{/other_user}","gists_url":"https://api.github.com/users/taegeonum/gists{/gist_id}","starred_url":"https://api.github.com/users/taegeonum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taegeonum/subscriptions","organizations_url":"https://api.github.com/users/taegeonum/orgs","repos_url":"https://api.github.com/users/taegeonum/repos","events_url":"https://api.github.com/users/taegeonum/events{/privacy}","received_events_url":"https://api.github.com/users/taegeonum/received_events","type":"User","site_admin":false},"labels":[{"id":2793717005,"node_id":"MDU6TGFiZWwyNzkzNzE3MDA1","url":"https://api.github.com/repos/keras-team/keras/labels/ready%20to%20pull","name":"ready to pull","color":"006b75","default":false,"description":"Ready to be merged into the codebase"},{"id":3260031150,"node_id":"MDU6TGFiZWwzMjYwMDMxMTUw","url":"https://api.github.com/repos/keras-team/keras/labels/size:S","name":"size:S","color":"ededed","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false},"assignees":[{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-30T00:55:14Z","updated_at":"2022-03-31T17:11:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16326","html_url":"https://github.com/keras-team/keras/pull/16326","diff_url":"https://github.com/keras-team/keras/pull/16326.diff","patch_url":"https://github.com/keras-team/keras/pull/16326.patch","merged_at":null},"body":"Fix typos in data_adapter.py","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16326/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16325","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16325/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16325/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16325/events","html_url":"https://github.com/keras-team/keras/issues/16325","id":1185635700,"node_id":"I_kwDOAffHH85Gq110","number":16325,"title":"Supporting Distributed adapting in KPL","user":{"login":"supercharleszhu","id":27000005,"node_id":"MDQ6VXNlcjI3MDAwMDA1","avatar_url":"https://avatars.githubusercontent.com/u/27000005?v=4","gravatar_id":"","url":"https://api.github.com/users/supercharleszhu","html_url":"https://github.com/supercharleszhu","followers_url":"https://api.github.com/users/supercharleszhu/followers","following_url":"https://api.github.com/users/supercharleszhu/following{/other_user}","gists_url":"https://api.github.com/users/supercharleszhu/gists{/gist_id}","starred_url":"https://api.github.com/users/supercharleszhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supercharleszhu/subscriptions","organizations_url":"https://api.github.com/users/supercharleszhu/orgs","repos_url":"https://api.github.com/users/supercharleszhu/repos","events_url":"https://api.github.com/users/supercharleszhu/events{/privacy}","received_events_url":"https://api.github.com/users/supercharleszhu/received_events","type":"User","site_admin":false},"labels":[{"id":820705121,"node_id":"MDU6TGFiZWw4MjA3MDUxMjE=","url":"https://api.github.com/repos/keras-team/keras/labels/type:feature","name":"type:feature","color":"159b2e","default":false,"description":"The user is asking for a new feature."}],"state":"open","locked":false,"assignee":{"login":"mattdangerw","id":1389937,"node_id":"MDQ6VXNlcjEzODk5Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1389937?v=4","gravatar_id":"","url":"https://api.github.com/users/mattdangerw","html_url":"https://github.com/mattdangerw","followers_url":"https://api.github.com/users/mattdangerw/followers","following_url":"https://api.github.com/users/mattdangerw/following{/other_user}","gists_url":"https://api.github.com/users/mattdangerw/gists{/gist_id}","starred_url":"https://api.github.com/users/mattdangerw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattdangerw/subscriptions","organizations_url":"https://api.github.com/users/mattdangerw/orgs","repos_url":"https://api.github.com/users/mattdangerw/repos","events_url":"https://api.github.com/users/mattdangerw/events{/privacy}","received_events_url":"https://api.github.com/users/mattdangerw/received_events","type":"User","site_admin":false},"assignees":[{"login":"mattdangerw","id":1389937,"node_id":"MDQ6VXNlcjEzODk5Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1389937?v=4","gravatar_id":"","url":"https://api.github.com/users/mattdangerw","html_url":"https://github.com/mattdangerw","followers_url":"https://api.github.com/users/mattdangerw/followers","following_url":"https://api.github.com/users/mattdangerw/following{/other_user}","gists_url":"https://api.github.com/users/mattdangerw/gists{/gist_id}","starred_url":"https://api.github.com/users/mattdangerw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattdangerw/subscriptions","organizations_url":"https://api.github.com/users/mattdangerw/orgs","repos_url":"https://api.github.com/users/mattdangerw/repos","events_url":"https://api.github.com/users/mattdangerw/events{/privacy}","received_events_url":"https://api.github.com/users/mattdangerw/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-30T00:18:07Z","updated_at":"2022-03-31T17:17:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi TensorFlow team,\r\n\r\nOur team are trying to explore the distributed adapting to pre-process the data (Text Vectorization, and Normalization), because we do see some bottlenecks when trying to do large-scale preprocessing. \r\n\r\nWe noticed that the Horizontal scalability is not implemented (the multi-worker strategy doesn't work when we call `strategy.run(adapt, data)`. For example, in [Normalization](https://github.com/keras-team/keras/blob/v2.8.0/keras/layers/preprocessing/normalization.py#L277), it simply assign the merged mean and variance per replica to the new value, without any synchronization. So we are currently doing experiments to add horizontal scalability into the preprocessing layer. Before we are doing that we would like to \r\n1. make sure there is no duplicated effort: do you have planning to add Horizontal scalability of KPL in the later version, or are you working on it?\r\n2. in the future if we have some updates we can share the pull request to make sure our design is meeting the open source requirements.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16325/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16322","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16322/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16322/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16322/events","html_url":"https://github.com/keras-team/keras/issues/16322","id":1184395786,"node_id":"I_kwDOAffHH85GmHIK","number":16322,"title":"Multiple output in two different loss function ","user":{"login":"0505li","id":102578237,"node_id":"U_kgDOBh04PQ","avatar_url":"https://avatars.githubusercontent.com/u/102578237?v=4","gravatar_id":"","url":"https://api.github.com/users/0505li","html_url":"https://github.com/0505li","followers_url":"https://api.github.com/users/0505li/followers","following_url":"https://api.github.com/users/0505li/following{/other_user}","gists_url":"https://api.github.com/users/0505li/gists{/gist_id}","starred_url":"https://api.github.com/users/0505li/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0505li/subscriptions","organizations_url":"https://api.github.com/users/0505li/orgs","repos_url":"https://api.github.com/users/0505li/repos","events_url":"https://api.github.com/users/0505li/events{/privacy}","received_events_url":"https://api.github.com/users/0505li/received_events","type":"User","site_admin":false},"labels":[{"id":820705121,"node_id":"MDU6TGFiZWw4MjA3MDUxMjE=","url":"https://api.github.com/repos/keras-team/keras/labels/type:feature","name":"type:feature","color":"159b2e","default":false,"description":"The user is asking for a new feature."},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2022-03-29T06:56:58Z","updated_at":"2022-03-30T12:46:52Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I used `Keras` to build a `lstm` to make prediction ，two `output layers `with it ，defined as `out1 , out2 `Now I want to combine `out1,out2` with `ytrue`, the three variables to make two `loss functions`\r\n`My model =Model(inputs=inputs,outputs=[output1’output2])`\r\nWhat I need Just like\r\n```\r\ndefine myloss(ytrue,out1,out2):\r\n            if out1 < ytrue < out 2 :\r\n               return k=1\r\n            else:\r\n               return k=0\r\n           define loss1(ytrue,ypred):\r\n                   return Loss1= (ypred-ytrue)+k*….\r\n           define loss2(ytrue,ypred):\r\n                  return Loss2= (ytrue-ypred)+k*….\r\n          return loss1,loss2\r\n```","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16322/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16321","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16321/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16321/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16321/events","html_url":"https://github.com/keras-team/keras/issues/16321","id":1184307901,"node_id":"I_kwDOAffHH85Glxq9","number":16321,"title":"Add ConvNeXt family of models to keras.applications","user":{"login":"sayakpaul","id":22957388,"node_id":"MDQ6VXNlcjIyOTU3Mzg4","avatar_url":"https://avatars.githubusercontent.com/u/22957388?v=4","gravatar_id":"","url":"https://api.github.com/users/sayakpaul","html_url":"https://github.com/sayakpaul","followers_url":"https://api.github.com/users/sayakpaul/followers","following_url":"https://api.github.com/users/sayakpaul/following{/other_user}","gists_url":"https://api.github.com/users/sayakpaul/gists{/gist_id}","starred_url":"https://api.github.com/users/sayakpaul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sayakpaul/subscriptions","organizations_url":"https://api.github.com/users/sayakpaul/orgs","repos_url":"https://api.github.com/users/sayakpaul/repos","events_url":"https://api.github.com/users/sayakpaul/events{/privacy}","received_events_url":"https://api.github.com/users/sayakpaul/received_events","type":"User","site_admin":false},"labels":[{"id":820705121,"node_id":"MDU6TGFiZWw4MjA3MDUxMjE=","url":"https://api.github.com/repos/keras-team/keras/labels/type:feature","name":"type:feature","color":"159b2e","default":false,"description":"The user is asking for a new feature."}],"state":"open","locked":false,"assignee":{"login":"LukeWood","id":12191303,"node_id":"MDQ6VXNlcjEyMTkxMzAz","avatar_url":"https://avatars.githubusercontent.com/u/12191303?v=4","gravatar_id":"","url":"https://api.github.com/users/LukeWood","html_url":"https://github.com/LukeWood","followers_url":"https://api.github.com/users/LukeWood/followers","following_url":"https://api.github.com/users/LukeWood/following{/other_user}","gists_url":"https://api.github.com/users/LukeWood/gists{/gist_id}","starred_url":"https://api.github.com/users/LukeWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LukeWood/subscriptions","organizations_url":"https://api.github.com/users/LukeWood/orgs","repos_url":"https://api.github.com/users/LukeWood/repos","events_url":"https://api.github.com/users/LukeWood/events{/privacy}","received_events_url":"https://api.github.com/users/LukeWood/received_events","type":"User","site_admin":false},"assignees":[{"login":"LukeWood","id":12191303,"node_id":"MDQ6VXNlcjEyMTkxMzAz","avatar_url":"https://avatars.githubusercontent.com/u/12191303?v=4","gravatar_id":"","url":"https://api.github.com/users/LukeWood","html_url":"https://github.com/LukeWood","followers_url":"https://api.github.com/users/LukeWood/followers","following_url":"https://api.github.com/users/LukeWood/following{/other_user}","gists_url":"https://api.github.com/users/LukeWood/gists{/gist_id}","starred_url":"https://api.github.com/users/LukeWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LukeWood/subscriptions","organizations_url":"https://api.github.com/users/LukeWood/orgs","repos_url":"https://api.github.com/users/LukeWood/repos","events_url":"https://api.github.com/users/LukeWood/events{/privacy}","received_events_url":"https://api.github.com/users/LukeWood/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-03-29T05:01:12Z","updated_at":"2022-03-31T18:11:38Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the feature and the current behavior/state**.\r\n\r\nConvNeXt [1] family of models doesn't use attention or any new components for that but still achieves really good performance on ImageNet-1k while being efficient. They also demonstrate good performance on a variety of downstream tasks. \r\n\r\nConvNeXt family of models was trained using recipes used for training Vision Transformer-based models. Another point to note is that these models were evolved to simulate the design choices of Swin Transformers [2]. \r\n\r\n**Will this change the current api? How?**\r\n\r\nYes:\r\n\r\n```\r\nkeras.applications.ConvNeXtBase, keras.applications.ConvNeXtTiny, ...\r\n```\r\n\r\n**Who will benefit from this feature?**\r\n\r\nKeras users using `keras.applications` in their projects. \r\n\r\n**[Contributing](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md)**\r\n\r\n- Do you want to contribute a PR? (yes/no): Yes\r\n- If yes, please read [this page](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md) for instructions\r\n- Briefly describe your candidate solution(if contributing): I have implemented the non-isotropic ConvNeXt variants [here](https://github.com/sayakpaul/ConvNeXt-TF) (with all the original pre-trained params ported). I also co-contributed the TF variant of this to Hugging Face `transformers` (https://github.com/huggingface/transformers/pull/15750).\r\n\r\n## References\r\n\r\n[1] https://arxiv.org/abs/2201.03545\r\n[2] https://arxiv.org/abs/2103.14030\r\n\r\n@fchollet @LukeWood ","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16321/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16321/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16320","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16320/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16320/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16320/events","html_url":"https://github.com/keras-team/keras/issues/16320","id":1184208967,"node_id":"I_kwDOAffHH85GlZhH","number":16320,"title":"Calling `model.compile()` multiple times leads to memory leak","user":{"login":"maghsk","id":16971372,"node_id":"MDQ6VXNlcjE2OTcxMzcy","avatar_url":"https://avatars.githubusercontent.com/u/16971372?v=4","gravatar_id":"","url":"https://api.github.com/users/maghsk","html_url":"https://github.com/maghsk","followers_url":"https://api.github.com/users/maghsk/followers","following_url":"https://api.github.com/users/maghsk/following{/other_user}","gists_url":"https://api.github.com/users/maghsk/gists{/gist_id}","starred_url":"https://api.github.com/users/maghsk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maghsk/subscriptions","organizations_url":"https://api.github.com/users/maghsk/orgs","repos_url":"https://api.github.com/users/maghsk/repos","events_url":"https://api.github.com/users/maghsk/events{/privacy}","received_events_url":"https://api.github.com/users/maghsk/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"sachinprasadhs","id":73069040,"node_id":"MDQ6VXNlcjczMDY5MDQw","avatar_url":"https://avatars.githubusercontent.com/u/73069040?v=4","gravatar_id":"","url":"https://api.github.com/users/sachinprasadhs","html_url":"https://github.com/sachinprasadhs","followers_url":"https://api.github.com/users/sachinprasadhs/followers","following_url":"https://api.github.com/users/sachinprasadhs/following{/other_user}","gists_url":"https://api.github.com/users/sachinprasadhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sachinprasadhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachinprasadhs/subscriptions","organizations_url":"https://api.github.com/users/sachinprasadhs/orgs","repos_url":"https://api.github.com/users/sachinprasadhs/repos","events_url":"https://api.github.com/users/sachinprasadhs/events{/privacy}","received_events_url":"https://api.github.com/users/sachinprasadhs/received_events","type":"User","site_admin":false},"assignees":[{"login":"sachinprasadhs","id":73069040,"node_id":"MDQ6VXNlcjczMDY5MDQw","avatar_url":"https://avatars.githubusercontent.com/u/73069040?v=4","gravatar_id":"","url":"https://api.github.com/users/sachinprasadhs","html_url":"https://github.com/sachinprasadhs","followers_url":"https://api.github.com/users/sachinprasadhs/followers","following_url":"https://api.github.com/users/sachinprasadhs/following{/other_user}","gists_url":"https://api.github.com/users/sachinprasadhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sachinprasadhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachinprasadhs/subscriptions","organizations_url":"https://api.github.com/users/sachinprasadhs/orgs","repos_url":"https://api.github.com/users/sachinprasadhs/repos","events_url":"https://api.github.com/users/sachinprasadhs/events{/privacy}","received_events_url":"https://api.github.com/users/sachinprasadhs/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-29T02:22:37Z","updated_at":"2022-03-29T13:25:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 20.04, macOS 12.3\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): `pip install tensorflow==2.8.0`\r\n- TensorFlow version (use command below): 2.8.0\r\n- Python version: 3.9.7\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: - \r\n- GPU model and memory:- \r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with:\r\n1. TF 1.0: `python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"`\r\n2. TF 2.0: `python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\n[Stackoverflow](https://stackoverflow.com/posts/71633201/timeline)\r\n\r\nI have tried resetting the state of the optimizer by re-compiling the model. Then I found that it could lead to a memory leak.\r\n\r\nreproducible code attached.\r\n\r\n**Describe the expected behavior**\r\n\r\nSince there are no active variables that could reach the old generated model graph. The old graph in RAM should be freed.\r\n\r\n**[Contributing](https://www.tensorflow.org/community/contribute)**\r\n\r\n- Do you want to contribute a PR? (yes/no): no\r\n- Briefly describe your candidate solution(if contributing): -\r\n\r\n**Standalone code to reproduce the issue**\r\n\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nimport objgraph\r\n\r\nm = tf.keras.models.Sequential([tf.keras.layers.InputLayer(input_shape=(20,)), tf.keras.layers.Dense(10),tf.keras.layers.Dense(10),tf.keras.layers.Dense(10),tf.keras.layers.Dense(10)])\r\nobjgraph.show_growth()\r\n\r\nfor i in range(100):\r\n    tf.keras.backend.clear_session()\r\n    m.compile('adam', loss='mse')\r\n    data = np.arange(32*20).reshape(32, 20)\r\n    labels = np.zeros(32)\r\n    results = m.fit(data, labels, epochs=10)\r\n    objgraph.show_growth()\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16320/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16316","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16316/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16316/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16316/events","html_url":"https://github.com/keras-team/keras/issues/16316","id":1183771519,"node_id":"I_kwDOAffHH85Gjut_","number":16316,"title":"'Activation' object has no attribute 'kernel' applying regularization to MobileNetV3","user":{"login":"mattpotma","id":40337321,"node_id":"MDQ6VXNlcjQwMzM3MzIx","avatar_url":"https://avatars.githubusercontent.com/u/40337321?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpotma","html_url":"https://github.com/mattpotma","followers_url":"https://api.github.com/users/mattpotma/followers","following_url":"https://api.github.com/users/mattpotma/following{/other_user}","gists_url":"https://api.github.com/users/mattpotma/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpotma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpotma/subscriptions","organizations_url":"https://api.github.com/users/mattpotma/orgs","repos_url":"https://api.github.com/users/mattpotma/repos","events_url":"https://api.github.com/users/mattpotma/events{/privacy}","received_events_url":"https://api.github.com/users/mattpotma/received_events","type":"User","site_admin":false},"labels":[{"id":192940628,"node_id":"MDU6TGFiZWwxOTI5NDA2Mjg=","url":"https://api.github.com/repos/keras-team/keras/labels/type:support","name":"type:support","color":"159b2e","default":false,"description":"User is asking for help / asking an implementation question. Stackoverflow would be better suited."}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-03-28T17:40:54Z","updated_at":"2022-03-31T10:03:12Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**System information**.\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in Keras): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 20.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.7.0-rc1-69-gc256c071bb2, tf-nightly-2.9.0.dev20220325\r\n- Python version: 3.9.70\r\n- GPU model and memory: N/A\r\n- Exact command to reproduce: N/A\r\n\r\n**Describe the problem**.\r\n\r\nAdding regularization to MobileNetV3 fails to train the model if regularization is added with `layer.add_loss(lambda: regularizer(layer.kernel))` or fails saving the model if regularization is added with `layer.add_loss(lambda l=layer: regularizer(l.kernel))`.\r\n\r\n**Describe the current behavior**.\r\n\r\nAttempting to add regularization to MobileNetV3. \r\n\r\nThe regularization appears to be applied correctly (applied to 43 Conv2D and Dense layers), but calling `model.fit` fails with the error `AttributeError: 'Activation' object has no attribute 'kernel'`.\r\n\r\nIt appears that calling `model.fit` is reapplying the regularization, but on the last `layer`, which is the output Activation. Adding regularization this way works on MobileNetV2 and custom models I've built, but only fails on MobileNetV3 (small or large).\r\n\r\nIf a default argument is used in the lambda (`layer.add_loss(lambda l=layer: regularizer(l.kernel))`), I can build and train the model, but saving the model with the Saved Model API fails with `tensorflow.python.saved_model.nested_structure_coder.NotEncodableError: No encoder for object <keras.layers.convolutional.Conv2D object at 0x7f0c4083be80> of type <class 'keras.layers.convolutional.Conv2D'>.` This failure occurs with both MobileNetV2 and MobileNetV3.\r\n\r\n**Describe the expected behavior**.\r\n\r\nThe sample script should run without fail, or at least fail similarly between MobieNetV2 and MobileNetV3.\r\n\r\n**[Contributing](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md)**.\r\n\r\n- Do you want to contribute a PR? (yes/no):\r\n- If yes, please read [this page](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md) for instructions\r\n- Briefly describe your candidate solution(if contributing):\r\n\r\n**Standalone code to reproduce the issue**.\r\n\r\n\r\nColab notebook (2.9.0 nightly) https://colab.research.google.com/drive/1JQxl6KyCf5vWUnFjo0qB7v_I5maMMspb#scrollTo=HAlKVbk08W3X\r\n\r\nStandalone code:\r\n\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n\r\nmodel = tf.keras.applications.MobileNetV3Small(input_shape=(96, 96, 3))\r\n# model = tf.keras.applications.MobileNetV2(input_shape=(96, 96, 3))\r\nregularizer = tf.keras.regularizers.L1(1e-3)\r\n\r\nfor layer in model.layers:\r\n    if hasattr(layer, \"kernel\"):\r\n        layer.add_loss(lambda: regularizer(layer.kernel))  # Fails building V3\r\n        # layer.add_loss(lambda l=layer: regularizer(l.kernel))  # Fails saving SavedModel all versions\r\n\r\n# Ensure regularization only applied to Conv2D or Dense layers\r\nregularization_count = 0\r\nfor layer in model.layers:\r\n    if layer.losses:\r\n        regularization_count += 1\r\n        assert isinstance(layer, tf.keras.layers.Conv2D) or isinstance(layer, tf.keras.layers.Dense)\r\n        assert not isinstance(layer, tf.keras.layers.Activation)\r\n\r\nprint(f\"Regularization added to {regularization_count} layers\")\r\n\r\nmodel.compile(loss=\"mse\")\r\nmodel.fit(\r\n    np.random.randn(10, 96, 96, 3),\r\n    np.random.randn(10, 1000),\r\n)\r\nmodel.save(\"test\")\r\n```\r\n\r\n**Source code / logs**.\r\n\r\nTraceback from Colab notebook:\r\n\r\n```\r\nWARNING:tensorflow:`input_shape` is undefined or non-square, or `rows` is not 224. Weights for input shape (224, 224) will be loaded as the default.\r\nDownloading data from https://storage.googleapis.com/tensorflow/keras-applications/mobilenet_v3/weights_mobilenet_v3_small_224_1.0_float.h5\r\n10734624/10734624 [==============================] - 0s 0us/step\r\nRegularization added to 43 layers\r\n\r\n---------------------------------------------------------------------------\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n\r\n[<ipython-input-3-0ea365886076>](https://localhost:8080/#) in <module>()\r\n     23 model.fit(\r\n     24     np.random.randn(10, 96, 96, 3),\r\n---> 25     np.random.randn(10, 1000),\r\n     26 )\r\n\r\n2 frames\r\n\r\n[<ipython-input-3-0ea365886076>](https://localhost:8080/#) in <lambda>()\r\n      8 for layer in model.layers:\r\n      9     if hasattr(layer, \"kernel\"):\r\n---> 10         layer.add_loss(lambda: regularizer(layer.kernel))\r\n     11 \r\n     12 # Ensure regularization only applied to Conv2D or Dense layers\r\n\r\nAttributeError: in user code:\r\n\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/training.py\", line 1051, in train_function  *\r\n        return step_function(self, iterator)\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/training.py\", line 1040, in step_function  **\r\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/training.py\", line 1030, in run_step  **\r\n        outputs = model.train_step(data)\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/training.py\", line 890, in train_step\r\n        loss = self.compute_loss(x, y, y_pred, sample_weight)\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/training.py\", line 949, in compute_loss\r\n        y, y_pred, sample_weight, regularization_losses=self.losses)\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/base_layer.py\", line 1268, in losses\r\n        loss_tensor = regularizer()\r\n    File \"/usr/local/lib/python3.7/dist-packages/keras/engine/base_layer.py\", line 1342, in _tag_callable\r\n        loss = loss()\r\n    File \"<ipython-input-3-0ea365886076>\", line 10, in <lambda>\r\n        layer.add_loss(lambda: regularizer(layer.kernel))\r\n\r\n    AttributeError: 'Activation' object has no attribute 'kernel'\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16316/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16315","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16315/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16315/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16315/events","html_url":"https://github.com/keras-team/keras/issues/16315","id":1183590608,"node_id":"I_kwDOAffHH85GjCjQ","number":16315,"title":"At `build()` only two last axis are numerics","user":{"login":"markub3327","id":74611856,"node_id":"MDQ6VXNlcjc0NjExODU2","avatar_url":"https://avatars.githubusercontent.com/u/74611856?v=4","gravatar_id":"","url":"https://api.github.com/users/markub3327","html_url":"https://github.com/markub3327","followers_url":"https://api.github.com/users/markub3327/followers","following_url":"https://api.github.com/users/markub3327/following{/other_user}","gists_url":"https://api.github.com/users/markub3327/gists{/gist_id}","starred_url":"https://api.github.com/users/markub3327/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markub3327/subscriptions","organizations_url":"https://api.github.com/users/markub3327/orgs","repos_url":"https://api.github.com/users/markub3327/repos","events_url":"https://api.github.com/users/markub3327/events{/privacy}","received_events_url":"https://api.github.com/users/markub3327/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":3,"created_at":"2022-03-28T15:13:11Z","updated_at":"2022-03-31T11:52:53Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello,\r\n\r\n  I created weights at `build()`:\r\n```python\r\ndef build(self, input_shape):\r\n        super(PositionalEmbedding, self).build(input_shape)\r\n\r\n        print(input_shape)\r\n        self.position = self.add_weight(\r\n            name=\"position\",\r\n            shape=(1, input_shape[1], input_shape[2], self.units),\r\n            initializer=TruncatedNormal(stddev=0.02),\r\n            trainable=True,\r\n        )\r\n```\r\n\r\nThe input's shape: (64, 7, 25, 81)   # (batches, timesteps, patches, features)\r\ninput_shape of `build()`: (None, None, 25, 81)  # (batches, timesteps, patches, features)\r\n\r\n## Error\r\n```python\r\nValueError: in user code:\r\n\r\n    File \"/Users/martin/miniforge3/lib/python3.9/site-packages/keras/engine/training.py\", line 1021, in train_function  *\r\n        return step_function(self, iterator)\r\n    File \"/Users/martin/miniforge3/lib/python3.9/site-packages/keras/engine/training.py\", line 1010, in step_function  **\r\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\r\n    File \"/Users/martin/miniforge3/lib/python3.9/site-packages/keras/engine/training.py\", line 1000, in run_step  **\r\n        outputs = model.train_step(data)\r\n    File \"/var/folders/7v/fqqcktvs23qc8fwgftjpz_gh0000gn/T/ipykernel_6464/643090246.py\", line 97, in train_step\r\n        y_pred, _ = self([inputs, targets_inputs], training=True)\r\n    File \"/Users/martin/miniforge3/lib/python3.9/site-packages/keras/utils/traceback_utils.py\", line 67, in error_handler\r\n        raise e.with_traceback(filtered_tb) from None\r\n\r\n    ValueError: Exception encountered when calling layer \"transformer_111\" (type Transformer).\r\n    \r\n    in user code:\r\n    \r\n        File \"/var/folders/7v/fqqcktvs23qc8fwgftjpz_gh0000gn/T/ipykernel_6464/643090246.py\", line 52, in call  *\r\n            x_e = self.pos_embs_0(x_e, training=training)\r\n        File \"/Users/martin/miniforge3/lib/python3.9/site-packages/keras/utils/traceback_utils.py\", line 67, in error_handler  **\r\n            raise e.with_traceback(filtered_tb) from None\r\n        File \"/var/folders/7v/fqqcktvs23qc8fwgftjpz_gh0000gn/T/ipykernel_6464/3588400932.py\", line 14, in build\r\n            self.position = self.add_weight(\r\n    \r\n        ValueError: Can't convert Python sequence with mixed types to Tensor.\r\n    \r\n    \r\n    Call arguments received:\r\n      • inputs=['tf.Tensor(shape=(None, None, 25, 81), dtype=float32)']\r\n      • training=True\r\n```","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16315/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16314","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16314/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16314/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16314/events","html_url":"https://github.com/keras-team/keras/issues/16314","id":1183464477,"node_id":"I_kwDOAffHH85Gijwd","number":16314,"title":"Keras-DepthwiseConv2D can still accept strides != 1 && dilation_rate != 1","user":{"login":"mazeltovlee","id":91937711,"node_id":"U_kgDOBXrbrw","avatar_url":"https://avatars.githubusercontent.com/u/91937711?v=4","gravatar_id":"","url":"https://api.github.com/users/mazeltovlee","html_url":"https://github.com/mazeltovlee","followers_url":"https://api.github.com/users/mazeltovlee/followers","following_url":"https://api.github.com/users/mazeltovlee/following{/other_user}","gists_url":"https://api.github.com/users/mazeltovlee/gists{/gist_id}","starred_url":"https://api.github.com/users/mazeltovlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mazeltovlee/subscriptions","organizations_url":"https://api.github.com/users/mazeltovlee/orgs","repos_url":"https://api.github.com/users/mazeltovlee/repos","events_url":"https://api.github.com/users/mazeltovlee/events{/privacy}","received_events_url":"https://api.github.com/users/mazeltovlee/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"chunduriv","id":74177924,"node_id":"MDQ6VXNlcjc0MTc3OTI0","avatar_url":"https://avatars.githubusercontent.com/u/74177924?v=4","gravatar_id":"","url":"https://api.github.com/users/chunduriv","html_url":"https://github.com/chunduriv","followers_url":"https://api.github.com/users/chunduriv/followers","following_url":"https://api.github.com/users/chunduriv/following{/other_user}","gists_url":"https://api.github.com/users/chunduriv/gists{/gist_id}","starred_url":"https://api.github.com/users/chunduriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunduriv/subscriptions","organizations_url":"https://api.github.com/users/chunduriv/orgs","repos_url":"https://api.github.com/users/chunduriv/repos","events_url":"https://api.github.com/users/chunduriv/events{/privacy}","received_events_url":"https://api.github.com/users/chunduriv/received_events","type":"User","site_admin":false},"assignees":[{"login":"chunduriv","id":74177924,"node_id":"MDQ6VXNlcjc0MTc3OTI0","avatar_url":"https://avatars.githubusercontent.com/u/74177924?v=4","gravatar_id":"","url":"https://api.github.com/users/chunduriv","html_url":"https://github.com/chunduriv","followers_url":"https://api.github.com/users/chunduriv/followers","following_url":"https://api.github.com/users/chunduriv/following{/other_user}","gists_url":"https://api.github.com/users/chunduriv/gists{/gist_id}","starred_url":"https://api.github.com/users/chunduriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chunduriv/subscriptions","organizations_url":"https://api.github.com/users/chunduriv/orgs","repos_url":"https://api.github.com/users/chunduriv/repos","events_url":"https://api.github.com/users/chunduriv/events{/privacy}","received_events_url":"https://api.github.com/users/chunduriv/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-28T13:42:42Z","updated_at":"2022-03-28T14:36:10Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"\r\n**System information**.\r\n- Have I written custom code (as opposed to using a stock example script provided in Keras): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.8.0\r\n- Python version: 3.7.13\r\n- Bazel version (if compiling from source): N/A\r\n- GPU model and memory: N/A\r\n- Exact command to reproduce:\r\n```\r\nimport keras\r\ninput_shape = (10, 14, 14, 516)\r\nx = keras.layers.Input((14,14,516))\r\ny = keras.layers.DepthwiseConv2D(kernel_size=3, strides=(2,2), padding=\"same\", dilation_rate=(3,1))(x)\r\nprint(y.shape)\r\n(None, 8, 7, 516)\r\n```\r\n\r\n**Describe the problem**.\r\nFollowing the documentation of DepthwiseConv2D: https://keras.io/api/layers/convolution_layers/depthwise_convolution2d/\r\nstrides value != 1 and dilation_rate value != 1 is an incorrect hyperparameter setting. However, DepthwiseConv2D can still output some results, besides the output tensor shape (8, 7, 516) does not satisfy `padding=\"same\"` (i.e., output shape should be the same as input shape).\r\n\r\nFor comparison, Conv2D will directly raise an Exception for this hyperparameter setting.\r\n```\r\nimport keras\r\ninput_shape = (10, 14, 14, 516)\r\nx = keras.layers.Input((14,14,516))\r\ny = keras.layers.Conv2D(32, kernel_size=3, strides=(2,2), padding=\"same\", dilation_rate=(3,1))(x)\r\nprint(y.shape)\r\n\r\nValueError: Exception encountered when calling layer \"conv2d_3\" (type Conv2D).\r\n\r\n`strides > 1` not supported in conjunction with `dilation_rate > 1`. Received: strides=[2 2] and dilation_rate=[3 1]\r\n\r\nCall arguments received:\r\n  • inputs=tf.Tensor(shape=(None, 14, 14, 516), dtype=float32)\r\n\r\n```\r\n\r\n**Describe the current behavior**.\r\nDepthwiseConv2D can accept strides != 1 && dilation_rate != 1\r\n\r\n**Describe the expected behavior**.\r\nThis API should raise an exception like Conv2D\r\n\r\n- Do you want to contribute a PR? (yes/no):\r\n- If yes, please read [this page](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md) for instructions\r\n- Briefly describe your candidate solution(if contributing):\r\n\r\n**Standalone code to reproduce the issue**.\r\n```\r\nimport keras\r\ninput_shape = (10, 14, 14, 516)\r\nx = keras.layers.Input((14,14,516))\r\ny = keras.layers.DepthwiseConv2D(kernel_size=3, strides=(2,2), padding=\"same\", dilation_rate=(3,1))(x)\r\nprint(y.shape)\r\n```","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16314/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16312","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16312/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16312/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16312/events","html_url":"https://github.com/keras-team/keras/issues/16312","id":1182058915,"node_id":"I_kwDOAffHH85GdMmj","number":16312,"title":"Tokenizer fit from drive","user":{"login":"chelove4draste","id":59221567,"node_id":"MDQ6VXNlcjU5MjIxNTY3","avatar_url":"https://avatars.githubusercontent.com/u/59221567?v=4","gravatar_id":"","url":"https://api.github.com/users/chelove4draste","html_url":"https://github.com/chelove4draste","followers_url":"https://api.github.com/users/chelove4draste/followers","following_url":"https://api.github.com/users/chelove4draste/following{/other_user}","gists_url":"https://api.github.com/users/chelove4draste/gists{/gist_id}","starred_url":"https://api.github.com/users/chelove4draste/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chelove4draste/subscriptions","organizations_url":"https://api.github.com/users/chelove4draste/orgs","repos_url":"https://api.github.com/users/chelove4draste/repos","events_url":"https://api.github.com/users/chelove4draste/events{/privacy}","received_events_url":"https://api.github.com/users/chelove4draste/received_events","type":"User","site_admin":false},"labels":[{"id":820705121,"node_id":"MDU6TGFiZWw4MjA3MDUxMjE=","url":"https://api.github.com/repos/keras-team/keras/labels/type:feature","name":"type:feature","color":"159b2e","default":false,"description":"The user is asking for a new feature."},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false},"assignees":[{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-26T20:40:02Z","updated_at":"2022-03-28T12:58:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hello, I tried to make a model using keras tokenizer. I wanted to tokenize large text dataset and found this problem: using custom generator takes a lot of time (more than 10 hours) to tokenize (\r\n```\r\ndef author_func():\r\n    xf = \"\"\r\n    for i in tqdm.tqdm(files, leave=False):\r\n        textek = pd.read_json(i, encoding='ISO-8859-2')\r\n        authorx = textek[['text']]\r\n        xf = \"\"\r\n        #yield np.ndarray.tolist(authorx.values)\r\n        z = np.ndarray.tolist(authorx.values)\r\n        print(type(z[0][0]))\r\n        #for j in tqdm.tqdm(z, leave=False):\r\n            #xf += str(j)\r\n            \r\n        yield xf\r\n```\r\n)\r\nwhile just loading to memory and tokenizing takes around 5-7 minutes. \r\n```\r\nauthor = []\r\nfor i in tqdm.tqdm(files[0:1]):\r\n    textek = pd.read_json(i, encoding='ISO-8859-2') \r\n    authorx = textek[[\"text\"]]\r\n    author = author + np.ndarray.tolist(authorx.values)\r\n```\r\nExpected behaviour of new feature:\r\ntokenizer.fit_from_file(\"filename.txt\")\r\ntraining for around 5-7 minutes and finished\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16312/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16311","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16311/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16311/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16311/events","html_url":"https://github.com/keras-team/keras/issues/16311","id":1181562723,"node_id":"I_kwDOAffHH85GbTdj","number":16311,"title":"Keras/tensorflow failed when specifying class_weight in model.fit()","user":{"login":"lauraht","id":20047156,"node_id":"MDQ6VXNlcjIwMDQ3MTU2","avatar_url":"https://avatars.githubusercontent.com/u/20047156?v=4","gravatar_id":"","url":"https://api.github.com/users/lauraht","html_url":"https://github.com/lauraht","followers_url":"https://api.github.com/users/lauraht/followers","following_url":"https://api.github.com/users/lauraht/following{/other_user}","gists_url":"https://api.github.com/users/lauraht/gists{/gist_id}","starred_url":"https://api.github.com/users/lauraht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lauraht/subscriptions","organizations_url":"https://api.github.com/users/lauraht/orgs","repos_url":"https://api.github.com/users/lauraht/repos","events_url":"https://api.github.com/users/lauraht/events{/privacy}","received_events_url":"https://api.github.com/users/lauraht/received_events","type":"User","site_admin":false},"labels":[{"id":192940628,"node_id":"MDU6TGFiZWwxOTI5NDA2Mjg=","url":"https://api.github.com/repos/keras-team/keras/labels/type:support","name":"type:support","color":"159b2e","default":false,"description":"User is asking for help / asking an implementation question. Stackoverflow would be better suited."},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"sushreebarsa","id":84765720,"node_id":"MDQ6VXNlcjg0NzY1NzIw","avatar_url":"https://avatars.githubusercontent.com/u/84765720?v=4","gravatar_id":"","url":"https://api.github.com/users/sushreebarsa","html_url":"https://github.com/sushreebarsa","followers_url":"https://api.github.com/users/sushreebarsa/followers","following_url":"https://api.github.com/users/sushreebarsa/following{/other_user}","gists_url":"https://api.github.com/users/sushreebarsa/gists{/gist_id}","starred_url":"https://api.github.com/users/sushreebarsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sushreebarsa/subscriptions","organizations_url":"https://api.github.com/users/sushreebarsa/orgs","repos_url":"https://api.github.com/users/sushreebarsa/repos","events_url":"https://api.github.com/users/sushreebarsa/events{/privacy}","received_events_url":"https://api.github.com/users/sushreebarsa/received_events","type":"User","site_admin":false},"assignees":[{"login":"sushreebarsa","id":84765720,"node_id":"MDQ6VXNlcjg0NzY1NzIw","avatar_url":"https://avatars.githubusercontent.com/u/84765720?v=4","gravatar_id":"","url":"https://api.github.com/users/sushreebarsa","html_url":"https://github.com/sushreebarsa","followers_url":"https://api.github.com/users/sushreebarsa/followers","following_url":"https://api.github.com/users/sushreebarsa/following{/other_user}","gists_url":"https://api.github.com/users/sushreebarsa/gists{/gist_id}","starred_url":"https://api.github.com/users/sushreebarsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sushreebarsa/subscriptions","organizations_url":"https://api.github.com/users/sushreebarsa/orgs","repos_url":"https://api.github.com/users/sushreebarsa/repos","events_url":"https://api.github.com/users/sushreebarsa/events{/privacy}","received_events_url":"https://api.github.com/users/sushreebarsa/received_events","type":"User","site_admin":false}],"milestone":null,"comments":8,"created_at":"2022-03-26T06:56:39Z","updated_at":"2022-03-29T22:17:46Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"\r\n**System information**.\r\n\r\n- OS Platform and Distribution:  Linux. \r\n- TensorFlow version:  Keras/tensorflow version 2.8.0.\r\n- Python version:  Python 3.7\r\n- GPU model and memory:  Use CPU (no GPU).\r\n\r\n**Describe the problem**.\r\n\r\nMy network model works well without specifying `class_weight` in `model.fit()`. \r\n\r\nHowever, when I specify `class_weight` in `model.fit()`, no matter what weight values I give, keras/tensorflow failed with the following error:\r\n```\r\n  File \"/opt/local/lib/python3.7/site-packages/tensorflow/python/eager/execute.py\", line 55, in quick_execute\r\n    inputs, attrs, num_outputs)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Graph execution error:\r\n\r\nindices[9] = 16 is not in [0, 10)\r\n         [[{{node GatherV2}}]]\r\n         [[IteratorGetNext]] [Op:__inference_train_function_43205]\r\n```\r\n\r\nKeras/tensorflow failed with the above error even when I give all classes an equal weight 1.0 (which is equivalent to no class weights), as the following (I have 10 classes):\r\n```\r\nclass_weights_dict = {0: 1.0, 1: 1.0, 2: 1.0, 3: 1.0, 4: 1.0, 5: 1.0, 6: 1.0, 7: 1.0, 8: 1.0, 9: 1.0}\r\n\r\nhistory = model.fit(train_input,\r\n                    train_true_labels,\r\n                    class_weight=class_weights_dict,\r\n                    validation_split=validation_split,\r\n                    shuffle=True,\r\n                    epochs=epochs,\r\n                    batch_size=batch_size)\r\n```\r\nAnd I verified that my true labels array `train_true_labels` contains only integers 0-9, as the following:\r\n```\r\nvalues = np.unique(train_true_labels)\r\nprint(values)\r\narray([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])\r\n```\r\n\r\nHowever, when I do not specify `class_weight` in `model.fit()`, the training for my model works just fine.\r\n\r\nSo it looks like I just cannot use `class_weight` in training. But my classes are highly imbalanced; not using class weights would train a useless model.\r\n\r\nI would greatly appreciate any solution for this issue.\r\n\r\nThank you very much!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16311/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16310","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16310/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16310/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16310/events","html_url":"https://github.com/keras-team/keras/pull/16310","id":1181348186,"node_id":"PR_kwDOAffHH841C-s-","number":16310,"title":"Internal changes only.","user":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-25T23:10:41Z","updated_at":"2022-03-25T23:10:41Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16310","html_url":"https://github.com/keras-team/keras/pull/16310","diff_url":"https://github.com/keras-team/keras/pull/16310.diff","patch_url":"https://github.com/keras-team/keras/pull/16310.patch","merged_at":null},"body":"Internal changes only.\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16310/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16308","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16308/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16308/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16308/events","html_url":"https://github.com/keras-team/keras/issues/16308","id":1181265447,"node_id":"I_kwDOAffHH85GaK4n","number":16308,"title":"Model serializer path is incompatible with Windows","user":{"login":"HJasperson","id":61030698,"node_id":"MDQ6VXNlcjYxMDMwNjk4","avatar_url":"https://avatars.githubusercontent.com/u/61030698?v=4","gravatar_id":"","url":"https://api.github.com/users/HJasperson","html_url":"https://github.com/HJasperson","followers_url":"https://api.github.com/users/HJasperson/followers","following_url":"https://api.github.com/users/HJasperson/following{/other_user}","gists_url":"https://api.github.com/users/HJasperson/gists{/gist_id}","starred_url":"https://api.github.com/users/HJasperson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJasperson/subscriptions","organizations_url":"https://api.github.com/users/HJasperson/orgs","repos_url":"https://api.github.com/users/HJasperson/repos","events_url":"https://api.github.com/users/HJasperson/events{/privacy}","received_events_url":"https://api.github.com/users/HJasperson/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""},{"id":3105964593,"node_id":"MDU6TGFiZWwzMTA1OTY0NTkz","url":"https://api.github.com/repos/keras-team/keras/labels/keras-team-review-pending","name":"keras-team-review-pending","color":"A30F25","default":false,"description":"Pending review by a Keras team member."}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":6,"created_at":"2022-03-25T21:01:55Z","updated_at":"2022-03-29T12:49:44Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**System information**.\r\n- OS Platform and Distribution: Windows Version 10.0.19044\r\n- TensorFlow version: 2.7\r\n- Python version: 3.9.12\r\n\r\n**Describe the problem**.\r\n\r\nBoth the [serializer and deserializer](https://github.com/keras-team/keras/blob/583f7cd4d664f760bbab4dcf283d725ced10fcce/keras/saving/pickle_utils.py) construct the temp_dir path using the hard coded prefix \"ram://\". This works for Unix-based systems, but the prefix is not valid on Windows.\r\n\r\n**Describe the current behavior**.\r\n\r\nProduces the following error, which stems from the fact that f (L75) is invalid because dest_path (L74) is not a valid memory address.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Hope\\Anaconda3\\envs\\Association\\lib\\site-packages\\keras\\saving\\pickle_utils.py\", line 77, in serialize_model_as_bytecode\r\n    info.size = f.size()\r\n  File \"C:\\Users\\Hope\\Anaconda3\\envs\\Association\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py\", line 99, in size\r\n    return stat(self.__name).length\r\n  File \"C:\\Users\\Hope\\Anaconda3\\envs\\Association\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py\", line 910, in stat\r\n    return stat_v2(filename)\r\n  File \"C:\\Users\\Hope\\Anaconda3\\envs\\Association\\lib\\site-packages\\tensorflow\\python\\lib\\io\\file_io.py\", line 926, in stat_v2\r\n    return _pywrap_file_io.Stat(compat.path_to_str(path))\r\ntensorflow.python.framework.errors_impl.NotFoundError\r\n```\r\n\r\n**Suggested fix**.\r\n\r\nImplement something like the _get_temp_folder() method from [scikeras](https://github.com/adriangb/scikeras/blob/master/scikeras/_saving_utils.py)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16308/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16304","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16304/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16304/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16304/events","html_url":"https://github.com/keras-team/keras/issues/16304","id":1180846165,"node_id":"I_kwDOAffHH85GYkhV","number":16304,"title":"DOC: explain the meaning of model.fit() history tracking in a distributed scenario","user":{"login":"tylerjereddy","id":7903078,"node_id":"MDQ6VXNlcjc5MDMwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/7903078?v=4","gravatar_id":"","url":"https://api.github.com/users/tylerjereddy","html_url":"https://github.com/tylerjereddy","followers_url":"https://api.github.com/users/tylerjereddy/followers","following_url":"https://api.github.com/users/tylerjereddy/following{/other_user}","gists_url":"https://api.github.com/users/tylerjereddy/gists{/gist_id}","starred_url":"https://api.github.com/users/tylerjereddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tylerjereddy/subscriptions","organizations_url":"https://api.github.com/users/tylerjereddy/orgs","repos_url":"https://api.github.com/users/tylerjereddy/repos","events_url":"https://api.github.com/users/tylerjereddy/events{/privacy}","received_events_url":"https://api.github.com/users/tylerjereddy/received_events","type":"User","site_admin":false},"labels":[{"id":998987226,"node_id":"MDU6TGFiZWw5OTg5ODcyMjY=","url":"https://api.github.com/repos/keras-team/keras/labels/type:docs","name":"type:docs","color":"159b2e","default":false,"description":"Need to modify the documentation"}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-25T14:14:10Z","updated_at":"2022-03-25T14:18:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The tensorflow team [requested](https://github.com/tensorflow/tensorflow/issues/55366#issuecomment-1078871670) that I post this issue over here as well.\r\n\r\n## URL(s) with the issue:\r\n\r\nPerhaps most closely related to some of these docs pages:\r\n  - https://www.tensorflow.org/api_docs/python/tf/keras/Model#fit\r\n  - https://www.tensorflow.org/tutorials/distribute/multi_worker_with_keras#overview\r\n\r\n## Description of issue (what needs changing):\r\n\r\nThere are fairly substantial docs about distributed training with tensorflow, including docs related to the `MultiWorkerMirroredStrategy`. But, as far as I can tell, reading those docs still doesn't prepare the end user for some of the perils of distributed training. One thing I'd like to see described/explained by an expert, is what it means to track the `history` result of `model.fit()` from many different distributed workers.\r\n\r\nFor example, what does it mean that the learning curves are different between different workers? Should they be? What about accuracy results exceeding 100 % like in the two-worker example results below? Should we even be looking at these individually?\r\n\r\nNode 0 `model.fit()` results:\r\n\r\n![bench_epoch_rank_0_hostname_cn662](https://user-images.githubusercontent.com/7903078/160017020-721ca1a4-a28c-48d2-bf43-9dadcc14c6f7.png)\r\n\r\nNode 1 `model.fit()` results:\r\n\r\n![bench_epoch_rank_1_hostname_cn663](https://user-images.githubusercontent.com/7903078/160017031-3300d4b9-de47-4180-a4ac-a02c18aeb298.png)\r\n\r\nShould the results be condensed/reduced somehow? For that matter, is there any troubleshooting documentation on what an accuracy greater than 100 % means?\r\n\r\n### Correct links\r\n\r\nNot related to links.\r\n\r\n### Parameters defined\r\n\r\nNot related to parameters.\r\n\r\n### Returns defined\r\n\r\nPerhaps for `model.fit()` there could be a side-note of some sort on how to interpret `history.history` in distributed scenarios, and what kinds of fluctuations between workers are normal vs. suspicious?\r\n\r\n### Raises listed and defined\r\n\r\nNo exception handling issues reported here.\r\n\r\n### Usage example\r\n\r\nI don't think I've actually seen a good usage example that shows the distributed `history.history` tracking plots differ between workers?\r\n\r\n### Request visuals, if applicable\r\n\r\nI could probably provide some sample loss/accuracy plots for distributed cases if that would help.\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? \r\n\r\nIf you can offer some guidance on how this is supposed to work, I think that would be useful enough for me to justify helping improve the docs as well.\r\n\r\nTo make it a bit clearer why this can be confusing, the **exact** same code on a single MPI rank/node produces what looks to me like fairly sensible ML progress curves--sure the overfitting is extreme because it is one GPU for a few minutes and a microscopic sub-sample of `imagenet2012`, but not nearly as wild as the multi-node/multi-GPU case.\r\n\r\n![bench_epoch_rank_0_hostname_cn660](https://user-images.githubusercontent.com/7903078/160023369-aa9c9eec-edfb-4eb9-81bf-ac7a85542682.png)\r\n\r\nI also almost wonder if an accuracy > 100 % warrants a warning message with suggestions for improvements/likely fixes, but maybe there are custom/debugging ML scenarios where that is valid.","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16304/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16302","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16302/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16302/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16302/events","html_url":"https://github.com/keras-team/keras/issues/16302","id":1180444963,"node_id":"I_kwDOAffHH85GXCkj","number":16302,"title":"The parameters of BERT constructed with Keras","user":{"login":"tinyxuyan","id":44150841,"node_id":"MDQ6VXNlcjQ0MTUwODQx","avatar_url":"https://avatars.githubusercontent.com/u/44150841?v=4","gravatar_id":"","url":"https://api.github.com/users/tinyxuyan","html_url":"https://github.com/tinyxuyan","followers_url":"https://api.github.com/users/tinyxuyan/followers","following_url":"https://api.github.com/users/tinyxuyan/following{/other_user}","gists_url":"https://api.github.com/users/tinyxuyan/gists{/gist_id}","starred_url":"https://api.github.com/users/tinyxuyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tinyxuyan/subscriptions","organizations_url":"https://api.github.com/users/tinyxuyan/orgs","repos_url":"https://api.github.com/users/tinyxuyan/repos","events_url":"https://api.github.com/users/tinyxuyan/events{/privacy}","received_events_url":"https://api.github.com/users/tinyxuyan/received_events","type":"User","site_admin":false},"labels":[{"id":192940628,"node_id":"MDU6TGFiZWwxOTI5NDA2Mjg=","url":"https://api.github.com/repos/keras-team/keras/labels/type:support","name":"type:support","color":"159b2e","default":false,"description":"User is asking for help / asking an implementation question. Stackoverflow would be better suited."},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"assignees":[{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-25T07:34:29Z","updated_at":"2022-03-30T12:11:31Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"When I construct BERT with the [example codes](https://keras.io/examples/nlp/masked_language_modeling/ ), the parameter scale is significant larger than the values given in the BERT original paper.  Is there any difference between the tf.keras.layers.MultiHeadAttention and the original one in Transformer paper?","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16302/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16301","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16301/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16301/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16301/events","html_url":"https://github.com/keras-team/keras/pull/16301","id":1180271828,"node_id":"PR_kwDOAffHH840_aXe","number":16301,"title":"Fix image resize check for keras.preprocessing.image_dataset_from_dir…","user":{"login":"gadagashwini","id":99852755,"node_id":"U_kgDOBfOh0w","avatar_url":"https://avatars.githubusercontent.com/u/99852755?v=4","gravatar_id":"","url":"https://api.github.com/users/gadagashwini","html_url":"https://github.com/gadagashwini","followers_url":"https://api.github.com/users/gadagashwini/followers","following_url":"https://api.github.com/users/gadagashwini/following{/other_user}","gists_url":"https://api.github.com/users/gadagashwini/gists{/gist_id}","starred_url":"https://api.github.com/users/gadagashwini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gadagashwini/subscriptions","organizations_url":"https://api.github.com/users/gadagashwini/orgs","repos_url":"https://api.github.com/users/gadagashwini/repos","events_url":"https://api.github.com/users/gadagashwini/events{/privacy}","received_events_url":"https://api.github.com/users/gadagashwini/received_events","type":"User","site_admin":false},"labels":[{"id":3260031150,"node_id":"MDU6TGFiZWwzMjYwMDMxMTUw","url":"https://api.github.com/repos/keras-team/keras/labels/size:S","name":"size:S","color":"ededed","default":false,"description":null}],"state":"open","locked":false,"assignee":{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false},"assignees":[{"login":"gbaned","id":48215717,"node_id":"MDQ6VXNlcjQ4MjE1NzE3","avatar_url":"https://avatars.githubusercontent.com/u/48215717?v=4","gravatar_id":"","url":"https://api.github.com/users/gbaned","html_url":"https://github.com/gbaned","followers_url":"https://api.github.com/users/gbaned/followers","following_url":"https://api.github.com/users/gbaned/following{/other_user}","gists_url":"https://api.github.com/users/gbaned/gists{/gist_id}","starred_url":"https://api.github.com/users/gbaned/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbaned/subscriptions","organizations_url":"https://api.github.com/users/gbaned/orgs","repos_url":"https://api.github.com/users/gbaned/repos","events_url":"https://api.github.com/users/gbaned/events{/privacy}","received_events_url":"https://api.github.com/users/gbaned/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2022-03-25T02:33:50Z","updated_at":"2022-03-29T18:51:56Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/keras-team/keras/pulls/16301","html_url":"https://github.com/keras-team/keras/pull/16301","diff_url":"https://github.com/keras-team/keras/pull/16301.diff","patch_url":"https://github.com/keras-team/keras/pull/16301.patch","merged_at":null},"body":"\r\n\r\nThis PR tries to address the issue raised in [#16227](https://github.com/keras-team/keras/issues/16227)\r\nOptimising performance of a resize on the image that has already the target size.","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16301/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16291","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16291/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16291/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16291/events","html_url":"https://github.com/keras-team/keras/issues/16291","id":1178363068,"node_id":"I_kwDOAffHH85GPGS8","number":16291,"title":"\"TypeError: Reduce.update_state() got multiple values for argument 'sample_weight'\" when using Mean() or Sum() metric","user":{"login":"wellsonah2019","id":71182054,"node_id":"MDQ6VXNlcjcxMTgyMDU0","avatar_url":"https://avatars.githubusercontent.com/u/71182054?v=4","gravatar_id":"","url":"https://api.github.com/users/wellsonah2019","html_url":"https://github.com/wellsonah2019","followers_url":"https://api.github.com/users/wellsonah2019/followers","following_url":"https://api.github.com/users/wellsonah2019/following{/other_user}","gists_url":"https://api.github.com/users/wellsonah2019/gists{/gist_id}","starred_url":"https://api.github.com/users/wellsonah2019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wellsonah2019/subscriptions","organizations_url":"https://api.github.com/users/wellsonah2019/orgs","repos_url":"https://api.github.com/users/wellsonah2019/repos","events_url":"https://api.github.com/users/wellsonah2019/events{/privacy}","received_events_url":"https://api.github.com/users/wellsonah2019/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false},"assignees":[{"login":"tilakrayal","id":81610181,"node_id":"MDQ6VXNlcjgxNjEwMTgx","avatar_url":"https://avatars.githubusercontent.com/u/81610181?v=4","gravatar_id":"","url":"https://api.github.com/users/tilakrayal","html_url":"https://github.com/tilakrayal","followers_url":"https://api.github.com/users/tilakrayal/followers","following_url":"https://api.github.com/users/tilakrayal/following{/other_user}","gists_url":"https://api.github.com/users/tilakrayal/gists{/gist_id}","starred_url":"https://api.github.com/users/tilakrayal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilakrayal/subscriptions","organizations_url":"https://api.github.com/users/tilakrayal/orgs","repos_url":"https://api.github.com/users/tilakrayal/repos","events_url":"https://api.github.com/users/tilakrayal/events{/privacy}","received_events_url":"https://api.github.com/users/tilakrayal/received_events","type":"User","site_admin":false}],"milestone":null,"comments":7,"created_at":"2022-03-23T16:27:59Z","updated_at":"2022-03-30T03:33:06Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"System Information:\r\n\r\n1. **Platform used:** Windows 10\r\n2. **Tensorflow installed with** pip (pip install tensorflow), version: v2.8.0-rc1-32-g3f878cff5b6 2.8.0\r\n3. **Python version:** 3.10.1\r\n4. **GPU model:** RTX 3070 -- 16GB VRAM\r\n5. **Code to reproduce:**\r\n\r\n```\r\nmodel = Sequential()\r\n\r\nmodel.add(Dense(4, input_shape=(1,)))\r\nmodel.add(Dense(1, ))\r\n\r\nmodel.compile(optimizer='Adam', loss='binary_crossentropy', metrics=[tf.keras.metrics.Sum()]) or model.compile(optimizer='Adam', loss='binary_crossentropy', metrics=[tf.keras.metrics.Mean()])\r\n\r\nmodel.fit([1], [0])\r\n```\r\n\r\n\r\n**Main Problem:**\r\n\r\nThis error happens whenever the Mean() or Sum() metrics are used. It does not appear when other metrics are used. I am not sure if this is not how those metrics are supposed to be used, but the fact that these 2 give errors while others do not made me believe that this is a possible issue.\r\n\r\n**Traceback:**\r\n```\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\OneDrive - Singapore Management University\\SMU_Materials\\Research Assistant - Software Testing\\hdf5-grammar\\grammar-error-inv.py\", line 38, in <module>\r\n    model.fit([1], [0])\r\n  File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\utils\\traceback_utils.py\", line 67, in error_handler\r\n    raise e.with_traceback(filtered_tb) from None\r\n  File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\tensorflow\\python\\framework\\func_graph.py\", line 1147, in autograph_handler\r\n    raise e.ag_error_metadata.to_exception(e)\r\nTypeError: in user code:\r\n\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\engine\\training.py\", line 1021, in train_function  *\r\n        return step_function(self, iterator)\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\engine\\training.py\", line 1010, in step_function  **\r\n        outputs = model.distribute_strategy.run(run_step, args=(data,))\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\engine\\training.py\", line 1000, in run_step  **\r\n        outputs = model.train_step(data)\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\engine\\training.py\", line 864, in train_step\r\n        return self.compute_metrics(x, y, y_pred, sample_weight)\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\engine\\training.py\", line 957, in compute_metrics\r\n        self.compiled_metrics.update_state(y, y_pred, sample_weight)\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\engine\\compile_utils.py\", line 459, in update_state\r\n        metric_obj.update_state(y_t, y_p, sample_weight=mask)\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\utils\\metrics_utils.py\", line 70, in decorated\r\n        update_op = update_state_fn(*args, **kwargs)\r\n    File \"C:\\Users\\Wellson\\AppData\\Roaming\\Python\\Python310\\site-packages\\keras\\metrics.py\", line 178, in update_state_fn\r\n        return ag_update_state(*args, **kwargs)\r\n\r\n    TypeError: Reduce.update_state() got multiple values for argument 'sample_weight'\r\n\r\n```\r\nPlease do let me know if the way I used the metrics are wrong, or if this is really an unintended bug.\r\n\r\nThanks!\r\n\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16291/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16290","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16290/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16290/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16290/events","html_url":"https://github.com/keras-team/keras/issues/16290","id":1178115500,"node_id":"I_kwDOAffHH85GOJ2s","number":16290,"title":"assists with language input for issue directive of file indication of use","user":{"login":"fig666","id":66715343,"node_id":"MDQ6VXNlcjY2NzE1MzQz","avatar_url":"https://avatars.githubusercontent.com/u/66715343?v=4","gravatar_id":"","url":"https://api.github.com/users/fig666","html_url":"https://github.com/fig666","followers_url":"https://api.github.com/users/fig666/followers","following_url":"https://api.github.com/users/fig666/following{/other_user}","gists_url":"https://api.github.com/users/fig666/gists{/gist_id}","starred_url":"https://api.github.com/users/fig666/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fig666/subscriptions","organizations_url":"https://api.github.com/users/fig666/orgs","repos_url":"https://api.github.com/users/fig666/repos","events_url":"https://api.github.com/users/fig666/events{/privacy}","received_events_url":"https://api.github.com/users/fig666/received_events","type":"User","site_admin":false},"labels":[{"id":998987226,"node_id":"MDU6TGFiZWw5OTg5ODcyMjY=","url":"https://api.github.com/repos/keras-team/keras/labels/type:docs","name":"type:docs","color":"159b2e","default":false,"description":"Need to modify the documentation"},{"id":1110419073,"node_id":"MDU6TGFiZWwxMTEwNDE5MDcz","url":"https://api.github.com/repos/keras-team/keras/labels/stat:awaiting%20response","name":"stat:awaiting response","color":"f4b400","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"sushreebarsa","id":84765720,"node_id":"MDQ6VXNlcjg0NzY1NzIw","avatar_url":"https://avatars.githubusercontent.com/u/84765720?v=4","gravatar_id":"","url":"https://api.github.com/users/sushreebarsa","html_url":"https://github.com/sushreebarsa","followers_url":"https://api.github.com/users/sushreebarsa/followers","following_url":"https://api.github.com/users/sushreebarsa/following{/other_user}","gists_url":"https://api.github.com/users/sushreebarsa/gists{/gist_id}","starred_url":"https://api.github.com/users/sushreebarsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sushreebarsa/subscriptions","organizations_url":"https://api.github.com/users/sushreebarsa/orgs","repos_url":"https://api.github.com/users/sushreebarsa/repos","events_url":"https://api.github.com/users/sushreebarsa/events{/privacy}","received_events_url":"https://api.github.com/users/sushreebarsa/received_events","type":"User","site_admin":false},"assignees":[{"login":"sushreebarsa","id":84765720,"node_id":"MDQ6VXNlcjg0NzY1NzIw","avatar_url":"https://avatars.githubusercontent.com/u/84765720?v=4","gravatar_id":"","url":"https://api.github.com/users/sushreebarsa","html_url":"https://github.com/sushreebarsa","followers_url":"https://api.github.com/users/sushreebarsa/followers","following_url":"https://api.github.com/users/sushreebarsa/following{/other_user}","gists_url":"https://api.github.com/users/sushreebarsa/gists{/gist_id}","starred_url":"https://api.github.com/users/sushreebarsa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sushreebarsa/subscriptions","organizations_url":"https://api.github.com/users/sushreebarsa/orgs","repos_url":"https://api.github.com/users/sushreebarsa/repos","events_url":"https://api.github.com/users/sushreebarsa/events{/privacy}","received_events_url":"https://api.github.com/users/sushreebarsa/received_events","type":"User","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-03-23T13:20:48Z","updated_at":"2022-03-29T03:24:35Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Please go to TF Forum for help and support:\n\nhttps://discuss.tensorflow.org/tag/keras\n\nIf you open a GitHub issue, here is our policy:\n\nIt must be a bug, a feature request, or a significant problem with the documentation (for small docs fixes please send a PR instead).\nThe form below must be filled out.\n\n**Here's why we have that policy:**.\n\nKeras developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\n\n**URL(s) with the issue:**.\n\nPlease provide a link to the documentation entry, for example: https://keras.io/guides/customizing_what_happens_in_fit/\n\n\n**Description of issue (what needs to be changed):**.\n\n\n**Correct links**.\nIs the link to the source code correct?\n\n\n**Parameters defined**.\n\nAre all parameters defined and formatted correctly?\n\n\n**Returns defined**.\n\nAre return values defined?\n\n\n**Raises listed and defined**\n\nAre the errors defined?\n\n\n**Usage example**\n\nIs there a usage example?\nSee the API guide: https://www.tensorflow.org/community/contribute/docs_ref on how to write testable usage examples.\n\n\n**Request visuals, if applicable**.\n\nAre there currently visuals? If not, will it clarify the content?\n\n\n**Submit a pull request?**.\n\nAre you planning to also submit a pull request to fix the issue? See the [docs contributor guide](https://github.com/keras-team/keras/blob/master/CONTRIBUTING.md):","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16290/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16289","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16289/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16289/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16289/events","html_url":"https://github.com/keras-team/keras/issues/16289","id":1177810288,"node_id":"I_kwDOAffHH85GM_Vw","number":16289,"title":"Inconsistent behavior between tf.nn.leaky_relu and keras.layers.LeakyReLU when input is infinity and alpha is 0","user":{"login":"maybeLee","id":32777264,"node_id":"MDQ6VXNlcjMyNzc3MjY0","avatar_url":"https://avatars.githubusercontent.com/u/32777264?v=4","gravatar_id":"","url":"https://api.github.com/users/maybeLee","html_url":"https://github.com/maybeLee","followers_url":"https://api.github.com/users/maybeLee/followers","following_url":"https://api.github.com/users/maybeLee/following{/other_user}","gists_url":"https://api.github.com/users/maybeLee/gists{/gist_id}","starred_url":"https://api.github.com/users/maybeLee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maybeLee/subscriptions","organizations_url":"https://api.github.com/users/maybeLee/orgs","repos_url":"https://api.github.com/users/maybeLee/repos","events_url":"https://api.github.com/users/maybeLee/events{/privacy}","received_events_url":"https://api.github.com/users/maybeLee/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"sachinprasadhs","id":73069040,"node_id":"MDQ6VXNlcjczMDY5MDQw","avatar_url":"https://avatars.githubusercontent.com/u/73069040?v=4","gravatar_id":"","url":"https://api.github.com/users/sachinprasadhs","html_url":"https://github.com/sachinprasadhs","followers_url":"https://api.github.com/users/sachinprasadhs/followers","following_url":"https://api.github.com/users/sachinprasadhs/following{/other_user}","gists_url":"https://api.github.com/users/sachinprasadhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sachinprasadhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachinprasadhs/subscriptions","organizations_url":"https://api.github.com/users/sachinprasadhs/orgs","repos_url":"https://api.github.com/users/sachinprasadhs/repos","events_url":"https://api.github.com/users/sachinprasadhs/events{/privacy}","received_events_url":"https://api.github.com/users/sachinprasadhs/received_events","type":"User","site_admin":false},"assignees":[{"login":"sachinprasadhs","id":73069040,"node_id":"MDQ6VXNlcjczMDY5MDQw","avatar_url":"https://avatars.githubusercontent.com/u/73069040?v=4","gravatar_id":"","url":"https://api.github.com/users/sachinprasadhs","html_url":"https://github.com/sachinprasadhs","followers_url":"https://api.github.com/users/sachinprasadhs/followers","following_url":"https://api.github.com/users/sachinprasadhs/following{/other_user}","gists_url":"https://api.github.com/users/sachinprasadhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sachinprasadhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachinprasadhs/subscriptions","organizations_url":"https://api.github.com/users/sachinprasadhs/orgs","repos_url":"https://api.github.com/users/sachinprasadhs/repos","events_url":"https://api.github.com/users/sachinprasadhs/events{/privacy}","received_events_url":"https://api.github.com/users/sachinprasadhs/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-03-23T08:56:35Z","updated_at":"2022-03-25T16:26:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Please refer this link for more details:\r\nhttps://github.com/tensorflow/tensorflow/issues/55188\r\n\r\nIn short, when giving `keras.layers.LeakyReLU` a `-np.Inf` array and set the `alpha=0.0`. `keras.layers.LeakyReLU` will output 0. For comparison, `tf.nn.leaky_relu()` will output `nan` instead.\r\n\r\nFollowing the equation of `LeakyReLU`:\r\n```\r\nf(x) = alpha * x if x < 0\r\nf(x) = x if x >= 0\r\n```\r\nWhen `alpha=0` and `x=-Infinity`, the times of 0 and `-Infinity` should be **_indeterminate_**, that means that the result can be anything. Here are some links that support this argument:\r\nhttps://www.quora.com/What-is-0-times-infty-Why-isn%E2%80%99t-it-defined\r\nhttps://www.youtube.com/watch?v=bSZiEZzwB7Q\r\nI also try such multiplication in NumPy and it indeed outputs nan:\r\n```\r\nimport numpy as np\r\n0*(-np.Inf)\r\n```\r\n\r\nTherefore, the output of `LeakyReLU` should be `nan` as `tf.nn.leaky_relu` does.\r\n\r\nI further check the reason why `keras.layers.LeakyReLU` outputs 0 and find out that it actually does not perform the 0*Infinity operation when the alpha=0\r\nhttps://github.com/keras-team/keras/blob/dd0f1f480613ceffd994658e5632d54c660d1e73/keras/backend.py#L4964\r\n\r\n```\r\n  dtype = getattr(x, 'dtype', floatx())\r\n  if alpha != 0.:  # this branch will not covered\r\n    if max_value is None and threshold == 0:\r\n      return tf.nn.leaky_relu(x, alpha=alpha)\r\n\r\n    if threshold != 0:\r\n      negative_part = tf.nn.relu(-x + threshold)\r\n    else:\r\n      negative_part = tf.nn.relu(-x)\r\n\r\n  clip_max = max_value is not None\r\n```\r\n\r\nTherefore, I guess it is a bug in `keras.layers.LeakyReLU`\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16289/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/keras-team/keras/issues/16286","repository_url":"https://api.github.com/repos/keras-team/keras","labels_url":"https://api.github.com/repos/keras-team/keras/issues/16286/labels{/name}","comments_url":"https://api.github.com/repos/keras-team/keras/issues/16286/comments","events_url":"https://api.github.com/repos/keras-team/keras/issues/16286/events","html_url":"https://github.com/keras-team/keras/issues/16286","id":1177188172,"node_id":"I_kwDOAffHH85GKndM","number":16286,"title":"Incorrect time per step estimation when fitting model ","user":{"login":"koalive","id":6972580,"node_id":"MDQ6VXNlcjY5NzI1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/6972580?v=4","gravatar_id":"","url":"https://api.github.com/users/koalive","html_url":"https://github.com/koalive","followers_url":"https://api.github.com/users/koalive/followers","following_url":"https://api.github.com/users/koalive/following{/other_user}","gists_url":"https://api.github.com/users/koalive/gists{/gist_id}","starred_url":"https://api.github.com/users/koalive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/koalive/subscriptions","organizations_url":"https://api.github.com/users/koalive/orgs","repos_url":"https://api.github.com/users/koalive/repos","events_url":"https://api.github.com/users/koalive/events{/privacy}","received_events_url":"https://api.github.com/users/koalive/received_events","type":"User","site_admin":false},"labels":[{"id":192940623,"node_id":"MDU6TGFiZWwxOTI5NDA2MjM=","url":"https://api.github.com/repos/keras-team/keras/labels/type:bug/performance","name":"type:bug/performance","color":"7A1171","default":false,"description":""}],"state":"open","locked":false,"assignee":{"login":"sachinprasadhs","id":73069040,"node_id":"MDQ6VXNlcjczMDY5MDQw","avatar_url":"https://avatars.githubusercontent.com/u/73069040?v=4","gravatar_id":"","url":"https://api.github.com/users/sachinprasadhs","html_url":"https://github.com/sachinprasadhs","followers_url":"https://api.github.com/users/sachinprasadhs/followers","following_url":"https://api.github.com/users/sachinprasadhs/following{/other_user}","gists_url":"https://api.github.com/users/sachinprasadhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sachinprasadhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachinprasadhs/subscriptions","organizations_url":"https://api.github.com/users/sachinprasadhs/orgs","repos_url":"https://api.github.com/users/sachinprasadhs/repos","events_url":"https://api.github.com/users/sachinprasadhs/events{/privacy}","received_events_url":"https://api.github.com/users/sachinprasadhs/received_events","type":"User","site_admin":false},"assignees":[{"login":"sachinprasadhs","id":73069040,"node_id":"MDQ6VXNlcjczMDY5MDQw","avatar_url":"https://avatars.githubusercontent.com/u/73069040?v=4","gravatar_id":"","url":"https://api.github.com/users/sachinprasadhs","html_url":"https://github.com/sachinprasadhs","followers_url":"https://api.github.com/users/sachinprasadhs/followers","following_url":"https://api.github.com/users/sachinprasadhs/following{/other_user}","gists_url":"https://api.github.com/users/sachinprasadhs/gists{/gist_id}","starred_url":"https://api.github.com/users/sachinprasadhs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sachinprasadhs/subscriptions","organizations_url":"https://api.github.com/users/sachinprasadhs/orgs","repos_url":"https://api.github.com/users/sachinprasadhs/repos","events_url":"https://api.github.com/users/sachinprasadhs/events{/privacy}","received_events_url":"https://api.github.com/users/sachinprasadhs/received_events","type":"User","site_admin":false}],"milestone":null,"comments":4,"created_at":"2022-03-22T19:01:12Z","updated_at":"2022-03-31T17:13:05Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Hi there,\r\n\r\n**System information**.\r\nI observed the behavior both in a Colab notebook (TF v2.8.0-0-g3f878cff5b6 2.8.0) and in a custom Docker image (Ubuntu 20.04, TF v2.5.1-97-g957590ea15c 2.5.2). The issue can easily be reproduced by using validation sets of different sizes and I made an example notebook (see below).\r\n\r\n**Describe the problem**.\r\nThe time/step reported when calling `fit` is not the time per training step. The phrasing can be misleading, for instance when trying to design your training scheme based on time constraints. \r\n\r\n**Describe the current behavior**.\r\nCurrently, the time for a full epoch (including validation) divided by the number of training steps is reported. If the validation takes a significant amount of time, the time per training step might be way smaller than reported.\r\n\r\n**Describe the expected behavior**.\r\nI feel that reporting the time per training step (excluding validation) would be more informative.\r\nFor instance for the following output (from the Colab notebook linked below):\r\n```\r\nEpoch 1/3\r\n5/5 [==============================] - 2s 613ms/step - loss: 0.3212 - val_loss: 0.1224\r\n```\r\nI would expect that using a single step instead of 5 would make each epoch take around 613ms. However each epoch would still take 2s as most of it is spent on the validation set.\r\n\r\n**Standalone code to reproduce the issue**.\r\n\r\nSee this colab notebook:\r\nhttps://colab.research.google.com/drive/1YGWstYcbFwkPY4ezZ2C-krDPahS36nnm?usp=sharing\r\n\r\nCheers.\r\n","reactions":{"url":"https://api.github.com/repos/keras-team/keras/issues/16286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/keras-team/keras/issues/16286/timeline","performed_via_github_app":null}]