[{"url":"https://api.github.com/repos/psf/black/issues/2982","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2982/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2982/comments","events_url":"https://api.github.com/repos/psf/black/issues/2982/events","html_url":"https://github.com/psf/black/pull/2982","id":1187583422,"node_id":"PR_kwDOB3dpmM41X2tp","number":2982,"title":"Update FAQ: Mention formatting of custom jupyter cell magic","user":{"login":"kolibril13","id":44469195,"node_id":"MDQ6VXNlcjQ0NDY5MTk1","avatar_url":"https://avatars.githubusercontent.com/u/44469195?v=4","gravatar_id":"","url":"https://api.github.com/users/kolibril13","html_url":"https://github.com/kolibril13","followers_url":"https://api.github.com/users/kolibril13/followers","following_url":"https://api.github.com/users/kolibril13/following{/other_user}","gists_url":"https://api.github.com/users/kolibril13/gists{/gist_id}","starred_url":"https://api.github.com/users/kolibril13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kolibril13/subscriptions","organizations_url":"https://api.github.com/users/kolibril13/orgs","repos_url":"https://api.github.com/users/kolibril13/repos","events_url":"https://api.github.com/users/kolibril13/events{/privacy}","received_events_url":"https://api.github.com/users/kolibril13/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-31T06:31:31Z","updated_at":"2022-03-31T21:20:51Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2982","html_url":"https://github.com/psf/black/pull/2982","diff_url":"https://github.com/psf/black/pull/2982.diff","patch_url":"https://github.com/psf/black/pull/2982.patch","merged_at":null},"body":"\r\n### Description\r\n\r\nTwo month ago, #2744 introduced a way to support formatting of jupyter cells with custom python cell magics.\r\nIn the current FAQ it is mentioned that this would not be possible: https://black.readthedocs.io/en/latest/faq.html#why-is-my-jupyter-notebook-cell-not-formatted\r\nTherefore I updated the FAQ and mentioned the new `black --python-cell-magics writeline hello.ipynb` syntax.\r\nI've also tested this locally:\r\n\r\nhttps://user-images.githubusercontent.com/44469195/160990792-58f1f950-dbd0-4f1a-9173-58a80a6336d5.mp4\r\n\r\n\r\n\r\n### Checklist - did you ...\r\n\r\n<!-- If any of the following items aren't relevant for your contribution\r\n     please still tick them so we know you've gone through the checklist.\r\n\r\n    All user-facing changes should get an entry. Otherwise, signal to us\r\n    this should get the magical label to silence the CHANGELOG entry check.\r\n    Tests are required for bugfixes and new features. Documentation changes\r\n    are necessary for formatting and most enhancement changes. -->\r\n\r\n- [ ] Add a CHANGELOG entry if necessary? nope\r\n- [ ] Add / update tests if necessary? nope \r\n- [x] Add new / update outdated documentation?\r\n\r\n<!-- Just as a reminder, everyone in all psf/black spaces including PRs\r\n     must follow the PSF Code of Conduct (link below).\r\n\r\n     Finally, once again thanks for your time and effort. If you have any\r\n     feedback in regards to your experience contributing here, please\r\n     let us know!\r\n\r\n     Helpful links:\r\n\r\n      PSF COC: https://www.python.org/psf/conduct/\r\n      Contributing docs: https://black.readthedocs.io/en/latest/contributing/index.html\r\n      Chat on Python Discord: https://discord.gg/RtVdv86PrH -->\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2982/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2975","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2975/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2975/comments","events_url":"https://api.github.com/repos/psf/black/issues/2975/events","html_url":"https://github.com/psf/black/issues/2975","id":1185839764,"node_id":"I_kwDOB3dpmM5GrnqU","number":2975,"title":"Docker images use a user install of Black so don't work when running as another user","user":{"login":"RoryDungan","id":8509978,"node_id":"MDQ6VXNlcjg1MDk5Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/8509978?v=4","gravatar_id":"","url":"https://api.github.com/users/RoryDungan","html_url":"https://github.com/RoryDungan","followers_url":"https://api.github.com/users/RoryDungan/followers","following_url":"https://api.github.com/users/RoryDungan/following{/other_user}","gists_url":"https://api.github.com/users/RoryDungan/gists{/gist_id}","starred_url":"https://api.github.com/users/RoryDungan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RoryDungan/subscriptions","organizations_url":"https://api.github.com/users/RoryDungan/orgs","repos_url":"https://api.github.com/users/RoryDungan/repos","events_url":"https://api.github.com/users/RoryDungan/events{/privacy}","received_events_url":"https://api.github.com/users/RoryDungan/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":1348565447,"node_id":"MDU6TGFiZWwxMzQ4NTY1NDQ3","url":"https://api.github.com/repos/psf/black/labels/C:%20installation%20/%20packaging","name":"C: installation / packaging","color":"1d76db","default":false,"description":"Installation and packaging of Black"}],"state":"open","locked":false,"assignee":{"login":"cooperlees","id":3005596,"node_id":"MDQ6VXNlcjMwMDU1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/3005596?v=4","gravatar_id":"","url":"https://api.github.com/users/cooperlees","html_url":"https://github.com/cooperlees","followers_url":"https://api.github.com/users/cooperlees/followers","following_url":"https://api.github.com/users/cooperlees/following{/other_user}","gists_url":"https://api.github.com/users/cooperlees/gists{/gist_id}","starred_url":"https://api.github.com/users/cooperlees/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooperlees/subscriptions","organizations_url":"https://api.github.com/users/cooperlees/orgs","repos_url":"https://api.github.com/users/cooperlees/repos","events_url":"https://api.github.com/users/cooperlees/events{/privacy}","received_events_url":"https://api.github.com/users/cooperlees/received_events","type":"User","site_admin":false},"assignees":[{"login":"cooperlees","id":3005596,"node_id":"MDQ6VXNlcjMwMDU1OTY=","avatar_url":"https://avatars.githubusercontent.com/u/3005596?v=4","gravatar_id":"","url":"https://api.github.com/users/cooperlees","html_url":"https://github.com/cooperlees","followers_url":"https://api.github.com/users/cooperlees/followers","following_url":"https://api.github.com/users/cooperlees/following{/other_user}","gists_url":"https://api.github.com/users/cooperlees/gists{/gist_id}","starred_url":"https://api.github.com/users/cooperlees/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cooperlees/subscriptions","organizations_url":"https://api.github.com/users/cooperlees/orgs","repos_url":"https://api.github.com/users/cooperlees/repos","events_url":"https://api.github.com/users/cooperlees/events{/privacy}","received_events_url":"https://api.github.com/users/cooperlees/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-30T04:09:05Z","updated_at":"2022-03-30T04:13:54Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"<!--\r\nPlease make sure that the bug is not already fixed either in newer versions or the\r\ncurrent development version. To confirm this, you have three options:\r\n\r\n1. Update Black's version if a newer release exists: `pip install -U black`\r\n2. Use the online formatter at <https://black.vercel.app/?version=main>, which will use\r\n   the latest main branch.\r\n3. Or run _Black_ on your machine:\r\n   - create a new virtualenv (make sure it's the same Python version);\r\n   - clone this repository;\r\n   - run `pip install -e .[d]`;\r\n   - run `pip install -r test_requirements.txt`\r\n   - make sure it's sane by running `python -m pytest`; and\r\n   - run `black` like you did last time.\r\n-->\r\n\r\n**Describe the bug**\r\n\r\nSince [bd96139](https://github.com/psf/black/commit/bd961304b63ad8178610df7242edf180d825e336), Docker images use a user install of Black. This means they can't be used when running a container as a user other than root. \r\n\r\nThis is a problem for me because we run Black inside of Jenkins and Jenkins runs _all_ containers with the same UID as the host, meaning that Black cannot run because it isn't on the PATH and in any case `/root/.local/bin/black` is inaccessible. It also seems like it could be problematic in any situation where the Black Docker container needs to write a file, because files it creates must be owned by root.\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\n**To Reproduce**\r\n\r\nPreviously this would work:\r\n```\r\n$ docker run --rm -it -u $(id -u):$(id -g) -v $PWD:/workspace -w /workspace pyfound/black:21.9b0 black --check .\r\nAll done! ‚ú® üç∞ ‚ú®\r\n4 files would be left unchanged.\r\n```\r\nHowever on versions 21.10b0 and up, including the latest 22.3.0 I get the following output:\r\n```\r\n$ docker run --rm -it -u $(id -u):$(id -g) -v $PWD:/workspace -w /workspace pyfound/black:21.10b0 black --check .\r\ndocker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: \"black\": executable file not found in $PATH: unknown.\r\n$ docker run --rm -it -u $(id -u):$(id -g) -v $PWD:/workspace -w /workspace pyfound/black:22.3.0 black --check .\r\ndocker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: \"black\": executable file not found in $PATH: unknown.\r\n```\r\n\r\n**Expected behavior**\r\n\r\nI should be able to run the Black Docker container as any user, not just root.\r\n\r\n**Environment**\r\n\r\n<!-- Please complete the following information: -->\r\n\r\n- Black's version: 21.10b0, 22.3.0\r\n- OS and Python version: [Linux/Python 3.10.4]\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2975/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2970","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2970/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2970/comments","events_url":"https://api.github.com/repos/psf/black/issues/2970/events","html_url":"https://github.com/psf/black/pull/2970","id":1183931248,"node_id":"PR_kwDOB3dpmM41Lnur","number":2970,"title":"Correctly handle fmt skip comments without internal spaces","user":{"login":"siuryan","id":23638799,"node_id":"MDQ6VXNlcjIzNjM4Nzk5","avatar_url":"https://avatars.githubusercontent.com/u/23638799?v=4","gravatar_id":"","url":"https://api.github.com/users/siuryan","html_url":"https://github.com/siuryan","followers_url":"https://api.github.com/users/siuryan/followers","following_url":"https://api.github.com/users/siuryan/following{/other_user}","gists_url":"https://api.github.com/users/siuryan/gists{/gist_id}","starred_url":"https://api.github.com/users/siuryan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siuryan/subscriptions","organizations_url":"https://api.github.com/users/siuryan/orgs","repos_url":"https://api.github.com/users/siuryan/repos","events_url":"https://api.github.com/users/siuryan/events{/privacy}","received_events_url":"https://api.github.com/users/siuryan/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-28T20:09:15Z","updated_at":"2022-03-28T20:35:03Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2970","html_url":"https://github.com/psf/black/pull/2970","diff_url":"https://github.com/psf/black/pull/2970.diff","patch_url":"https://github.com/psf/black/pull/2970.patch","merged_at":null},"body":"<!-- Hello! Thanks for submitting a PR. To help make things go a bit more\r\n     smoothly we would appreciate that you go through this template. -->\r\n\r\n### Description\r\n\r\nHi, first time contributor here! This PR fixes #2917 . The issue was that fmt skip comments were being handled inconsistently. A formatted version of the comment (e.g. `#fmt:skip` -> `# fmt:skip` in `comment.value`) was being compared to the original comment in the code (e.g. `#fmt:skip` in `leaf.prefix`), which would always be False.\r\n\r\nPlease let me know if there's anything I missed. I left a comment below explaining one of the changes. Also, does this change require a changelog entry or documentation change?\r\n\r\n### Checklist - did you ...\r\n\r\n<!-- If any of the following items aren't relevant for your contribution\r\n     please still tick them so we know you've gone through the checklist.\r\n\r\n    All user-facing changes should get an entry. Otherwise, signal to us\r\n    this should get the magical label to silence the CHANGELOG entry check.\r\n    Tests are required for bugfixes and new features. Documentation changes\r\n    are necessary for formatting and most enhancement changes. -->\r\n\r\n- [ ] Add a CHANGELOG entry if necessary?\r\n- [x] Add / update tests if necessary?\r\n- [ ] Add new / update outdated documentation?\r\n\r\n<!-- Just as a reminder, everyone in all psf/black spaces including PRs\r\n     must follow the PSF Code of Conduct (link below).\r\n\r\n     Finally, once again thanks for your time and effort. If you have any\r\n     feedback in regards to your experience contributing here, please\r\n     let us know!\r\n\r\n     Helpful links:\r\n\r\n      PSF COC: https://www.python.org/psf/conduct/\r\n      Contributing docs: https://black.readthedocs.io/en/latest/contributing/index.html\r\n      Chat on Python Discord: https://discord.gg/RtVdv86PrH -->\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2970/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2961","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2961/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2961/comments","events_url":"https://api.github.com/repos/psf/black/issues/2961/events","html_url":"https://github.com/psf/black/pull/2961","id":1182945641,"node_id":"PR_kwDOB3dpmM41IWzx","number":2961,"title":"Bump peter-evans/create-or-update-comment from 1.4.5 to 2","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[{"id":1931697970,"node_id":"MDU6TGFiZWwxOTMxNjk3OTcw","url":"https://api.github.com/repos/psf/black/labels/C:%20dependencies","name":"C: dependencies","color":"0366d6","default":false,"description":""},{"id":2843125410,"node_id":"MDU6TGFiZWwyODQzMTI1NDEw","url":"https://api.github.com/repos/psf/black/labels/skip%20news","name":"skip news","color":"D98D5B","default":false,"description":"Skip the need for a changelog entry for a Pull Request"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-28T06:14:00Z","updated_at":"2022-03-28T06:32:52Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2961","html_url":"https://github.com/psf/black/pull/2961","diff_url":"https://github.com/psf/black/pull/2961.diff","patch_url":"https://github.com/psf/black/pull/2961.patch","merged_at":null},"body":"Bumps [peter-evans/create-or-update-comment](https://github.com/peter-evans/create-or-update-comment) from 1.4.5 to 2.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/peter-evans/create-or-update-comment/releases\">peter-evans/create-or-update-comment's releases</a>.</em></p>\n<blockquote>\n<h2>Create or Update Comment v2.0.0</h2>\n<h2>What's new</h2>\n<ul>\n<li>Updated runtime to Node.js 16\n<ul>\n<li>The action now requires a minimum version of v2.285.0 for the <a href=\"https://github.com/actions/runner/releases/tag/v2.285.0\">Actions Runner</a>.</li>\n<li>If using GitHub Enterprise Server, the action requires <a href=\"https://docs.github.com/en/enterprise-server@3.4/admin/release-notes\">GHES 3.4</a> or later.</li>\n</ul>\n</li>\n</ul>\n<h2>What's Changed</h2>\n<ul>\n<li>Use double quotes to preserve adjacent spaces correctly by <a href=\"https://github.com/mfn\"><code>@‚Äãmfn</code></a> in <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/pull/95\">peter-evans/create-or-update-comment#95</a></li>\n<li>Remove workflow by <a href=\"https://github.com/peter-evans\"><code>@‚Äãpeter-evans</code></a> in <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/pull/101\">peter-evans/create-or-update-comment#101</a></li>\n<li>Update runtime to node 16 by <a href=\"https://github.com/peter-evans\"><code>@‚Äãpeter-evans</code></a> in <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/pull/105\">peter-evans/create-or-update-comment#105</a></li>\n<li>7 dependency updates by <a href=\"https://github.com/actions-bot\"><code>@‚Äãactions-bot</code></a> and <a href=\"https://github.com/dependabot\"><code>@‚Äãdependabot</code></a></li>\n</ul>\n<h2>New Contributors</h2>\n<ul>\n<li><a href=\"https://github.com/mfn\"><code>@‚Äãmfn</code></a> made their first contribution in <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/pull/95\">peter-evans/create-or-update-comment#95</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/peter-evans/create-or-update-comment/compare/v1.4.5...v2.0.0\">https://github.com/peter-evans/create-or-update-comment/compare/v1.4.5...v2.0.0</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/c9fcb64660bc90ec1cc535646af190c992007c32\"><code>c9fcb64</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/issues/105\">#105</a> from peter-evans/v2</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/862a968b6893951e455b61df4607c63be927e5c1\"><code>862a968</code></a> Update runtime to node 16</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/63e171afd597dc4be7b89306575bccc262e512ef\"><code>63e171a</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/issues/101\">#101</a> from peter-evans/rm-workflow</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/741ee284046258eaf09101cb150ba8e25a054371\"><code>741ee28</code></a> Remove workflow</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/ad0c5a210255bfe327cd550bc3f11b49e318be3a\"><code>ad0c5a2</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/issues/97\">#97</a> from peter-evans/update-distribution</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/d7438411f0dd7ae2aa34902cceec4d8ebc4ce334\"><code>d743841</code></a> Update distribution</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/fed340e087b2f1e43996ab11e1faeaf4b1ab3ead\"><code>fed340e</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/issues/94\">#94</a> from peter-evans/update-dependencies</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/dacf24c705ea9d73835355f4b471a67f69a17cfe\"><code>dacf24c</code></a> Update dependencies</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/85a7ce63456c26d56a5ea525941e3d89f9e6e20a\"><code>85a7ce6</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/create-or-update-comment/issues/95\">#95</a> from mfn/mfn-bash-fixes</li>\n<li><a href=\"https://github.com/peter-evans/create-or-update-comment/commit/6484e4d98fefc8e4a43ae035ac90b762463002ad\"><code>6484e4d</code></a> Use double quotes to preserve adjacent spaces correctly</li>\n<li>Additional commits viewable in <a href=\"https://github.com/peter-evans/create-or-update-comment/compare/a35cf36e5301d70b76f316e867e7788a55a31dae...c9fcb64660bc90ec1cc535646af190c992007c32\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=peter-evans/create-or-update-comment&package-manager=github_actions&previous-version=1.4.5&new-version=2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2961/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2960","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2960/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2960/comments","events_url":"https://api.github.com/repos/psf/black/issues/2960/events","html_url":"https://github.com/psf/black/pull/2960","id":1182945566,"node_id":"PR_kwDOB3dpmM41IWyt","number":2960,"title":"Bump peter-evans/find-comment from 1.3.0 to 2","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[{"id":1931697970,"node_id":"MDU6TGFiZWwxOTMxNjk3OTcw","url":"https://api.github.com/repos/psf/black/labels/C:%20dependencies","name":"C: dependencies","color":"0366d6","default":false,"description":""},{"id":2843125410,"node_id":"MDU6TGFiZWwyODQzMTI1NDEw","url":"https://api.github.com/repos/psf/black/labels/skip%20news","name":"skip news","color":"D98D5B","default":false,"description":"Skip the need for a changelog entry for a Pull Request"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-28T06:13:56Z","updated_at":"2022-03-28T06:31:44Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2960","html_url":"https://github.com/psf/black/pull/2960","diff_url":"https://github.com/psf/black/pull/2960.diff","patch_url":"https://github.com/psf/black/pull/2960.patch","merged_at":null},"body":"Bumps [peter-evans/find-comment](https://github.com/peter-evans/find-comment) from 1.3.0 to 2.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/peter-evans/find-comment/releases\">peter-evans/find-comment's releases</a>.</em></p>\n<blockquote>\n<h2>Find Comment v2.0.0</h2>\n<h2>What's new</h2>\n<ul>\n<li>Updated runtime to Node.js 16\n<ul>\n<li>The action now requires a minimum version of v2.285.0 for the <a href=\"https://github.com/actions/runner/releases/tag/v2.285.0\">Actions Runner</a>.</li>\n<li>If using GitHub Enterprise Server, the action requires <a href=\"https://docs.github.com/en/enterprise-server@3.4/admin/release-notes\">GHES 3.4</a> or later.</li>\n</ul>\n</li>\n</ul>\n<h2>What's Changed</h2>\n<ul>\n<li>ci: remove workflow by <a href=\"https://github.com/peter-evans\"><code>@‚Äãpeter-evans</code></a> in <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/pull/59\">peter-evans/find-comment#59</a></li>\n<li>Update runtime to node 16 by <a href=\"https://github.com/peter-evans\"><code>@‚Äãpeter-evans</code></a> in <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/pull/62\">peter-evans/find-comment#62</a></li>\n<li>4 dependency updates by <a href=\"https://github.com/actions-bot\"><code>@‚Äãactions-bot</code></a> and <a href=\"https://github.com/dependabot\"><code>@‚Äãdependabot</code></a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/peter-evans/find-comment/compare/v1.3.0...v2.0.0\">https://github.com/peter-evans/find-comment/compare/v1.3.0...v2.0.0</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/1769778a0c5bd330272d749d12c036d65e70d39d\"><code>1769778</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/issues/62\">#62</a> from peter-evans/v2</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/d261a413a51333f925c4240e301691fbf41cf380\"><code>d261a41</code></a> Update runtime to node 16</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/2dc3b39a5eaff1d54450f53efc9eaa9a7ffdcc3e\"><code>2dc3b39</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/issues/59\">#59</a> from peter-evans/rm-workflow</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/7bdc44ad46e1956da5f0cc6eaaac94b7b82a6447\"><code>7bdc44a</code></a> ci: remove workflow</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/838d65d39588c5f00b3efa4dcc0b5393d545abd7\"><code>838d65d</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/issues/56\">#56</a> from peter-evans/update-distribution</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/f54cec0188848a0338bed77f59656d9b79028e42\"><code>f54cec0</code></a> build: update distribution</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/8911be80c2773f42b7af84d2895a40b57b08d982\"><code>8911be8</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/issues/55\">#55</a> from peter-evans/update-dependencies</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/6a0aec69cd546fef1635f230323bacfe8982add9\"><code>6a0aec6</code></a> chore: update dependencies</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/915683066818fa7811af74ff4c87a90dbc3fad96\"><code>9156830</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/issues/53\">#53</a> from peter-evans/dependabot/npm_and_yarn/ansi-regex-5.0.1</li>\n<li><a href=\"https://github.com/peter-evans/find-comment/commit/e134adbe1d04de980d2ad7740f1d923288d45723\"><code>e134adb</code></a> Merge pull request <a href=\"https://github-redirect.dependabot.com/peter-evans/find-comment/issues/54\">#54</a> from peter-evans/update-distribution</li>\n<li>Additional commits viewable in <a href=\"https://github.com/peter-evans/find-comment/compare/d2dae40ed151c634e4189471272b57e76ec19ba8...1769778a0c5bd330272d749d12c036d65e70d39d\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=peter-evans/find-comment&package-manager=github_actions&previous-version=1.3.0&new-version=2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2960/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2958","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2958/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2958/comments","events_url":"https://api.github.com/repos/psf/black/issues/2958/events","html_url":"https://github.com/psf/black/issues/2958","id":1181745363,"node_id":"I_kwDOB3dpmM5GcADT","number":2958,"title":"Brackets around lambda expressions in functions","user":{"login":"jpy-git","id":80432516,"node_id":"MDQ6VXNlcjgwNDMyNTE2","avatar_url":"https://avatars.githubusercontent.com/u/80432516?v=4","gravatar_id":"","url":"https://api.github.com/users/jpy-git","html_url":"https://github.com/jpy-git","followers_url":"https://api.github.com/users/jpy-git/followers","following_url":"https://api.github.com/users/jpy-git/following{/other_user}","gists_url":"https://api.github.com/users/jpy-git/gists{/gist_id}","starred_url":"https://api.github.com/users/jpy-git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpy-git/subscriptions","organizations_url":"https://api.github.com/users/jpy-git/orgs","repos_url":"https://api.github.com/users/jpy-git/repos","events_url":"https://api.github.com/users/jpy-git/events{/privacy}","received_events_url":"https://api.github.com/users/jpy-git/received_events","type":"User","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20design","name":"T: design","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"},{"id":959878692,"node_id":"MDU6TGFiZWw5NTk4Nzg2OTI=","url":"https://api.github.com/repos/psf/black/labels/F:%20parentheses","name":"F: parentheses","color":"3afca4","default":false,"description":"Too many parentheses, not enough parentheses, and so on."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-26T12:57:09Z","updated_at":"2022-03-31T06:20:23Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nAt the moment black doesn't seem to have any strong opinions on brackets around lambda expressions in functions.\r\n\r\n**Describe the solution you'd like**\r\n\r\nI had a couple initial thoughts:\r\n\r\nA) Remove brackets if it's used as a positional argument\r\ni.e.\r\n```python\r\nmap((lambda n: n**2), [1, 2, 3, 4, 5])\r\n```\r\nbecomes\r\n```python\r\nmap(lambda n: n**2, [1, 2, 3, 4, 5])\r\n```\r\nB) require brackets when used as a keyword argument (or default arg in function def)\r\n```python\r\nfoo(func=lambda x: x**2)\r\n```\r\nbecomes\r\n```python\r\nfoo(func=(lambda x: x**2))\r\n```\r\n\r\n**Additional context**\r\n\r\nSaw option B) in a code review the other day and thought it would read better if the lambda expression was clearly grouped.\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2958/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2954","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2954/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2954/comments","events_url":"https://api.github.com/repos/psf/black/issues/2954/events","html_url":"https://github.com/psf/black/issues/2954","id":1180515535,"node_id":"I_kwDOB3dpmM5GXTzP","number":2954,"title":"Sensible minimum number of char width \"won back\" before indentation used.","user":{"login":"mangelozzi","id":19764314,"node_id":"MDQ6VXNlcjE5NzY0MzE0","avatar_url":"https://avatars.githubusercontent.com/u/19764314?v=4","gravatar_id":"","url":"https://api.github.com/users/mangelozzi","html_url":"https://github.com/mangelozzi","followers_url":"https://api.github.com/users/mangelozzi/followers","following_url":"https://api.github.com/users/mangelozzi/following{/other_user}","gists_url":"https://api.github.com/users/mangelozzi/gists{/gist_id}","starred_url":"https://api.github.com/users/mangelozzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mangelozzi/subscriptions","organizations_url":"https://api.github.com/users/mangelozzi/orgs","repos_url":"https://api.github.com/users/mangelozzi/repos","events_url":"https://api.github.com/users/mangelozzi/events{/privacy}","received_events_url":"https://api.github.com/users/mangelozzi/received_events","type":"User","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20design","name":"T: design","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"},{"id":3042873307,"node_id":"MDU6TGFiZWwzMDQyODczMzA3","url":"https://api.github.com/repos/psf/black/labels/F:%20linebreak","name":"F: linebreak","color":"bfd4f2","default":false,"description":"How should we split up lines?"},{"id":3136895503,"node_id":"MDU6TGFiZWwzMTM2ODk1NTAz","url":"https://api.github.com/repos/psf/black/labels/S:%20needs%20discussion","name":"S: needs discussion","color":"F9D0C4","default":false,"description":"Needs further hashing out before ready for implementation (on desirability, feasibility, etc.)"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2022-03-25T08:56:37Z","updated_at":"2022-03-26T11:15:07Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the style change**\r\n\r\nBlack indents items in brackets to help fit more on the screen, however in some cases, one can now see 2 less lines of code, as a tradeoff for seeing 2 more characters. This extra whitespace, along with making the code more verbose could be undesirable. Maybe a sensible default should be chosen that unless the win of pulling the line left is less than x chars, then rather leave it as is. E.g. maybe the minimum win should be say, 4 chars (you guys decide).\r\n\r\n**Examples in the current _Black_ style**\r\n\r\n<!-- Think of some short code snippets that show\r\nhow the current _Black_ style is not great: -->\r\n\r\n```python\r\ndef foo():\r\n    print(\r\n        \"This long line is shifted 2 chars (won 2 chars back) to the left due to the indentation, at the expense of adding 2 more lines\"\r\n    )\r\n```\r\n\r\n**Desired style**\r\n\r\n<!-- How do you think _Black_ should format the above snippets: -->\r\n\r\n```python\r\ndef foo():\r\n    print(\"This long line is not shifted 2 chars to the left due to the indentation, and has 2 less lines of code\")\r\n```\r\n\r\n**Additional context**\r\n\r\nLove using Black, it's a game changer thank you!\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2954/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2952","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2952/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2952/comments","events_url":"https://api.github.com/repos/psf/black/issues/2952/events","html_url":"https://github.com/psf/black/issues/2952","id":1180104048,"node_id":"I_kwDOB3dpmM5GVvVw","number":2952,"title":"Removing multiple unnecessary parenthesizes for for assignment targes is unstable","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":867439213,"node_id":"MDU6TGFiZWw4Njc0MzkyMTM=","url":"https://api.github.com/repos/psf/black/labels/C:%20unstable%20formatting","name":"C: unstable formatting","color":"ff8844","default":false,"description":"Formatting changed on the second pass"},{"id":959878692,"node_id":"MDU6TGFiZWw5NTk4Nzg2OTI=","url":"https://api.github.com/repos/psf/black/labels/F:%20parentheses","name":"F: parentheses","color":"3afca4","default":false,"description":"Too many parentheses, not enough parentheses, and so on."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-24T22:08:06Z","updated_at":"2022-03-24T23:43:28Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nUnder preview, the removal of unnecessary parenthesizes can be unstable if there's multiple -- each pass removes only one pair.\r\n\r\n**To Reproduce**\r\n\r\n<!--\r\nMinimal steps to reproduce the behavior with source code and Black's configuration.\r\n-->\r\n\r\nFor example, take this code:\r\n\r\n```python\r\nfor ((x, y)) in enumerate(range(10)):\r\n    pass\r\n```\r\n\r\nAnd run it with these arguments:\r\n\r\n```sh\r\n$ black file.py --preview\r\n```\r\n\r\nThe resulting error is:\r\n\r\n```\r\nerror: cannot format test.py: INTERNAL ERROR: Black produced different code on the second pass of the formatter.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /tmp/blk_473_benq.log\r\n\r\nOh no! üí• üíî üí•\r\n1 file would fail to reformat.\r\n\r\nMode(target_versions={<TargetVersion.PY38: 8>, <TargetVersion.PY37: 7>, <TargetVersion.PY36: 6>}, line_length=88, string_normalization=True, is_pyi=False, is_ipynb=False, magic_trailing_comma=True, experimental_string_processing=False, python_cell_magics=set(), preview=True)\r\n--- source\r\n+++ first pass\r\n@@ -1,2 +1,2 @@\r\n-for ((x, y)) in enumerate(range(10)):\r\n+for (x, y) in enumerate(range(10)):\r\n     pass\r\n--- first pass\r\n+++ second pass\r\n@@ -1,2 +1,2 @@\r\n-for (x, y) in enumerate(range(10)):\r\n+for x, y in enumerate(range(10)):\r\n     pass\r\n```\r\n\r\n**Expected behavior**\r\n\r\n<!-- A clear and concise description of what you expected to happen. -->\r\n\r\nAll of the unnecessary parenthesizes being removed at once ^^\r\n\r\n**Environment**\r\n\r\n<!-- Please complete the following information: -->\r\n\r\n- Black's version: <!-- e.g. [main] --> 14d84ba2e96c5ca1351b8fe4d0d415cc148f4117\r\n- OS and Python version: <!-- e.g. [Linux/Python 3.7.4rc1] --> CPython 3.8.5\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2952/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2947","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2947/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2947/comments","events_url":"https://api.github.com/repos/psf/black/issues/2947/events","html_url":"https://github.com/psf/black/issues/2947","id":1177398691,"node_id":"I_kwDOB3dpmM5GLa2j","number":2947,"title":"Strange placement of one-digit index in boolean expression","user":{"login":"costika1234","id":7645454,"node_id":"MDQ6VXNlcjc2NDU0NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/7645454?v=4","gravatar_id":"","url":"https://api.github.com/users/costika1234","html_url":"https://github.com/costika1234","followers_url":"https://api.github.com/users/costika1234/followers","following_url":"https://api.github.com/users/costika1234/following{/other_user}","gists_url":"https://api.github.com/users/costika1234/gists{/gist_id}","starred_url":"https://api.github.com/users/costika1234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/costika1234/subscriptions","organizations_url":"https://api.github.com/users/costika1234/orgs","repos_url":"https://api.github.com/users/costika1234/repos","events_url":"https://api.github.com/users/costika1234/events{/privacy}","received_events_url":"https://api.github.com/users/costika1234/received_events","type":"User","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20design","name":"T: design","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"},{"id":3042873307,"node_id":"MDU6TGFiZWwzMDQyODczMzA3","url":"https://api.github.com/repos/psf/black/labels/F:%20linebreak","name":"F: linebreak","color":"bfd4f2","default":false,"description":"How should we split up lines?"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-22T23:10:25Z","updated_at":"2022-03-22T23:24:27Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the style change**\r\nI've just encountered an odd situation where `black` places a list index on a completely separately line. \r\n\r\n**Examples in the current _Black_ style**\r\nUnder default parameters, the following code snippet\r\n```python\r\ndef f(special_chars):\r\n    return (len([c for c in special_chars[1:] if c.isupper()]) > 0) and special_chars[0].islower()\r\n```\r\nis converted by `black 22.1.0` to:\r\n```python\r\ndef f(special_chars):\r\n    return (len([c for c in special_chars[1:] if c.isupper()]) > 0) and special_chars[\r\n        0\r\n    ].islower()\r\n```\r\n\r\n**Desired style**\r\nThe above is clearly not ideal as `0` is placed on its own line. I imagined that `black` would format the original function along the lines of:\r\n<!-- How do you think _Black_ should format the above snippets: -->\r\n\r\n```python\r\ndef f(special_chars):\r\n    return (\r\n        (len([c for c in special_chars[1:] if c.isupper()]) > 0)\r\n        and special_chars[0].islower()\r\n    )\r\n```\r\n\r\n**Additional context**\r\nThat being said, if the original snippet is changed to: \r\n```python\r\ndef f(special_chars):\r\n    return len([c for c in special_chars[1:] if c.isupper()]) > 0 and special_chars[0].islower()\r\n```\r\n(that is, if we remove the parentheses around the inequality condition), then `black` formats everything correctly:\r\n```python\r\ndef f(special_chars):\r\n    return (\r\n        len([c for c in special_chars[1:] if c.isupper()]) > 0\r\n        and special_chars[0].islower()\r\n    )\r\n```\r\nIs this a bug or not?","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2947/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2943","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2943/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2943/comments","events_url":"https://api.github.com/repos/psf/black/issues/2943/events","html_url":"https://github.com/psf/black/issues/2943","id":1174380211,"node_id":"I_kwDOB3dpmM5F_56z","number":2943,"title":"Remove redundant parentheses from generator expression inside function call","user":{"login":"sterliakov","id":50529348,"node_id":"MDQ6VXNlcjUwNTI5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50529348?v=4","gravatar_id":"","url":"https://api.github.com/users/sterliakov","html_url":"https://github.com/sterliakov","followers_url":"https://api.github.com/users/sterliakov/followers","following_url":"https://api.github.com/users/sterliakov/following{/other_user}","gists_url":"https://api.github.com/users/sterliakov/gists{/gist_id}","starred_url":"https://api.github.com/users/sterliakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sterliakov/subscriptions","organizations_url":"https://api.github.com/users/sterliakov/orgs","repos_url":"https://api.github.com/users/sterliakov/repos","events_url":"https://api.github.com/users/sterliakov/events{/privacy}","received_events_url":"https://api.github.com/users/sterliakov/received_events","type":"User","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20design","name":"T: design","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"},{"id":959878692,"node_id":"MDU6TGFiZWw5NTk4Nzg2OTI=","url":"https://api.github.com/repos/psf/black/labels/F:%20parentheses","name":"F: parentheses","color":"3afca4","default":false,"description":"Too many parentheses, not enough parentheses, and so on."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-19T21:55:15Z","updated_at":"2022-03-21T10:04:08Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the style change**\r\n\r\nI think that redundant parentheses should be removed from generators or at least be allowed to stick to next/previous parenthesis. Consider the following source example:\r\n\r\n```python\r\nany((\r\n    this_very_long_method_name(obj) or another_long_method_name(obj)\r\n    for obj in this_iterable\r\n))\r\n```\r\n**Examples in the current _Black_ style**\r\n\r\nNow black (22.1.0) formats it to\r\n\r\n```python\r\nany(\r\n    (\r\n        this_very_long_method_name(obj) or another_long_method_name(obj)\r\n        for obj in this_iterable\r\n    )\r\n)\r\n```\r\nI think that added extra indentation level here makes source look worse.\r\n\r\n**Desired style**\r\n\r\n```python\r\nany(\r\n    this_very_long_method_name(obj) or another_long_method_name(obj)\r\n    for obj in this_iterable\r\n) \r\n```\r\n\r\nOr at least\r\n\r\n```python\r\nany((\r\n    this_very_long_method_name(obj) or another_long_method_name(obj)\r\n    for obj in this_iterable\r\n))\r\n```\r\n\r\nI would prefer the first approach (since AST of both results is the same), because this parenthesis are redundant and can be safely removed.\r\n\r\nRelated issue: #2522 ","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2943/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2943/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2941","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2941/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2941/comments","events_url":"https://api.github.com/repos/psf/black/issues/2941/events","html_url":"https://github.com/psf/black/pull/2941","id":1173772573,"node_id":"PR_kwDOB3dpmM40qpzf","number":2941,"title":"Add ISort","user":{"login":"Shivansh-007","id":69356296,"node_id":"MDQ6VXNlcjY5MzU2Mjk2","avatar_url":"https://avatars.githubusercontent.com/u/69356296?v=4","gravatar_id":"","url":"https://api.github.com/users/Shivansh-007","html_url":"https://github.com/Shivansh-007","followers_url":"https://api.github.com/users/Shivansh-007/followers","following_url":"https://api.github.com/users/Shivansh-007/following{/other_user}","gists_url":"https://api.github.com/users/Shivansh-007/gists{/gist_id}","starred_url":"https://api.github.com/users/Shivansh-007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shivansh-007/subscriptions","organizations_url":"https://api.github.com/users/Shivansh-007/orgs","repos_url":"https://api.github.com/users/Shivansh-007/repos","events_url":"https://api.github.com/users/Shivansh-007/events{/privacy}","received_events_url":"https://api.github.com/users/Shivansh-007/received_events","type":"User","site_admin":false},"labels":[{"id":2843125410,"node_id":"MDU6TGFiZWwyODQzMTI1NDEw","url":"https://api.github.com/repos/psf/black/labels/skip%20news","name":"skip news","color":"D98D5B","default":false,"description":"Skip the need for a changelog entry for a Pull Request"},{"id":2955619138,"node_id":"MDU6TGFiZWwyOTU1NjE5MTM4","url":"https://api.github.com/repos/psf/black/labels/C:%20maintenance","name":"C: maintenance","color":"505678","default":false,"description":"Related to project maintenance, e.g. CI, testing, policy changes, releases"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-18T16:18:21Z","updated_at":"2022-03-18T16:31:22Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2941","html_url":"https://github.com/psf/black/pull/2941","diff_url":"https://github.com/psf/black/pull/2941.diff","patch_url":"https://github.com/psf/black/pull/2941.patch","merged_at":null},"body":"### Description\r\n\r\nCloses #2930 \r\n\r\nThe formatting changes are part of commit 37356f6940773f0903486da9629b68bd78d47209 and edf37bf708006f12fc7d3cab43c21f19548b3035, the rest are config/chore changes.\r\n\r\n### Checklist - did you ...\r\n- [ ] Add a CHANGELOG entry if necessary?\r\n- [X] Add / update tests if necessary? -> n/a\r\n- [X] Add new / update outdated documentation? -> n/a\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2941/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2930","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2930/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2930/comments","events_url":"https://api.github.com/repos/psf/black/issues/2930/events","html_url":"https://github.com/psf/black/issues/2930","id":1170783391,"node_id":"I_kwDOB3dpmM5FyLyf","number":2930,"title":"Addition of `isort` to our dev toolchain","user":{"login":"Shivansh-007","id":69356296,"node_id":"MDQ6VXNlcjY5MzU2Mjk2","avatar_url":"https://avatars.githubusercontent.com/u/69356296?v=4","gravatar_id":"","url":"https://api.github.com/users/Shivansh-007","html_url":"https://github.com/Shivansh-007","followers_url":"https://api.github.com/users/Shivansh-007/followers","following_url":"https://api.github.com/users/Shivansh-007/following{/other_user}","gists_url":"https://api.github.com/users/Shivansh-007/gists{/gist_id}","starred_url":"https://api.github.com/users/Shivansh-007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shivansh-007/subscriptions","organizations_url":"https://api.github.com/users/Shivansh-007/orgs","repos_url":"https://api.github.com/users/Shivansh-007/repos","events_url":"https://api.github.com/users/Shivansh-007/events{/privacy}","received_events_url":"https://api.github.com/users/Shivansh-007/received_events","type":"User","site_admin":false},"labels":[{"id":2955619138,"node_id":"MDU6TGFiZWwyOTU1NjE5MTM4","url":"https://api.github.com/repos/psf/black/labels/C:%20maintenance","name":"C: maintenance","color":"505678","default":false,"description":"Related to project maintenance, e.g. CI, testing, policy changes, releases"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-16T09:53:26Z","updated_at":"2022-03-16T13:38:42Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"Currently, the imports exist in any random order as added by the developers (see below), which sometimes makes it difficult to look through them in search of something. Furthermore, it is not very pretty or easy to read.\r\n\r\nhttps://github.com/psf/black/blob/086ae68076de570b0cb1881a3c3b9da592b46ee0/src/black/__init__.py#L52-L59\r\nhttps://github.com/psf/black/blob/086ae68076de570b0cb1881a3c3b9da592b46ee0/src/black/__init__.py#L6-L11\r\n\r\nThis is where `isort` comes in, `isort`, unlike `black` is a fantastic hyper configurable tool that will magically sort your imports so you don't have to care about them. It also allows you to format them while agreeing with the `black` style guide using [Black Profile](https://pycqa.github.io/isort/docs/configuration/profiles.html)\r\n\r\nAn experimental PR containing changes brought by isort could be made, and we could then decide how to proceed after reviewing the diff.","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2930/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2930/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2929","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2929/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2929/comments","events_url":"https://api.github.com/repos/psf/black/issues/2929/events","html_url":"https://github.com/psf/black/issues/2929","id":1170464685,"node_id":"I_kwDOB3dpmM5Fw9-t","number":2929,"title":"Add support for user git ignore configuration file.","user":{"login":"hardkrash","id":104305,"node_id":"MDQ6VXNlcjEwNDMwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/104305?v=4","gravatar_id":"","url":"https://api.github.com/users/hardkrash","html_url":"https://github.com/hardkrash","followers_url":"https://api.github.com/users/hardkrash/followers","following_url":"https://api.github.com/users/hardkrash/following{/other_user}","gists_url":"https://api.github.com/users/hardkrash/gists{/gist_id}","starred_url":"https://api.github.com/users/hardkrash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hardkrash/subscriptions","organizations_url":"https://api.github.com/users/hardkrash/orgs","repos_url":"https://api.github.com/users/hardkrash/repos","events_url":"https://api.github.com/users/hardkrash/events{/privacy}","received_events_url":"https://api.github.com/users/hardkrash/received_events","type":"User","site_admin":false},"labels":[{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"},{"id":1348567694,"node_id":"MDU6TGFiZWwxMzQ4NTY3Njk0","url":"https://api.github.com/repos/psf/black/labels/C:%20command%20line%20/%20config","name":"C: command line / config","color":"f2b3db","default":false,"description":"CLI and configuration options + configuration via file"},{"id":2972729524,"node_id":"MDU6TGFiZWwyOTcyNzI5NTI0","url":"https://api.github.com/repos/psf/black/labels/C:%20file%20collection","name":"C: file collection","color":"16BC84","default":false,"description":"Related to file collection (e.g. gitignore & cache) or file discovery and all of its configuration."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-16T02:29:49Z","updated_at":"2022-03-16T03:33:39Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Is your feature request related to a problem? Please describe.**\r\n\r\nInclude all sources of gitignore patterns.\r\nI have user and host specific ignore rules in  `~/$USER/.gitignore` that Black is unaware of.\r\n\r\n```\r\n>>> cat ~/.gitignore\r\n*.swp\r\n*.swo\r\n.DS_Store\r\n.ropeproject\r\n.mypy_cache\r\n.ccls-cache\r\n.clangd\r\n```\r\n\r\nAnd just started adding black into my workflow at a project root level instead of an individual call to a specific file.\r\nSo the file finding process included python files in the .ropeproject folder of this project. (I only occasionally setup rope when I need it.)\r\n\r\n\r\n**Describe the solution you'd like**\r\n\r\nI would like to have the user/host gitignore files respected when project root `.gitignore` is used.\r\n\r\n`get_gitignore` could use similar logic to `find_user_pyproject_toml` to add the lines from the user ignore file.\r\nUnfortunately this file is specified as either a default location or with a git configuration.  \r\nFrom https://git-scm.com/docs/gitignore\r\n\r\n\r\n> Which file to place a pattern in depends on how the pattern is meant to be used.\r\n> \r\n> Patterns which should be version-controlled and distributed to other repositories via clone (i.e., files that all developers will want to ignore) should go into a .gitignore file.\r\n> \r\n> Patterns which are specific to a particular repository but which do not need to be shared with other related repositories (e.g., auxiliary files that live inside the repository but are specific to one user‚Äôs workflow) should go into the $GIT_DIR/info/exclude file.\r\n> \r\n> Patterns which a user wants Git to ignore in all situations (e.g., backup or temporary files generated by the user‚Äôs editor of choice) generally go into a file specified by core.excludesFile in the user‚Äôs ~/.gitconfig. Its default value is $XDG_CONFIG_HOME/git/ignore. If $XDG_CONFIG_HOME is either not set or empty, $HOME/.config/git/ignore is used instead.\r\n\r\n \r\n\r\n**Describe alternatives you've considered**\r\n\r\nAdd user specific files to project's `.gitignore`\r\nIt wouldn't hurt to add vim and other tools to the project specific ignore files, but feels like I would be adding many user settings to a project.  Although arguments for `.DS_Store` being in the project's `.gitignore` is applicable for a project that is typically developed on Mac OS, it is just on the threshold.\r\n\r\nAdding vim swap files seems more user vs. project specific.\r\n\r\nA workaround that I see now from researching for this bug would be to use `$GIT_DIR/info/exclude` but would also need to then have that path added into black.\r\n\r\n**Additional context**\r\n\r\nHonestly this may be a non-issue, as it only affects my worktrees and not other users.\r\nIt may break future use of --check as unintentional user folders were included...\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2929/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2926","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2926/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2926/comments","events_url":"https://api.github.com/repos/psf/black/issues/2926/events","html_url":"https://github.com/psf/black/pull/2926","id":1169981552,"node_id":"PR_kwDOB3dpmM40eo-W","number":2926,"title":"Remove unnecessary parentheses from `with` statements","user":{"login":"jpy-git","id":80432516,"node_id":"MDQ6VXNlcjgwNDMyNTE2","avatar_url":"https://avatars.githubusercontent.com/u/80432516?v=4","gravatar_id":"","url":"https://api.github.com/users/jpy-git","html_url":"https://github.com/jpy-git","followers_url":"https://api.github.com/users/jpy-git/followers","following_url":"https://api.github.com/users/jpy-git/following{/other_user}","gists_url":"https://api.github.com/users/jpy-git/gists{/gist_id}","starred_url":"https://api.github.com/users/jpy-git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpy-git/subscriptions","organizations_url":"https://api.github.com/users/jpy-git/orgs","repos_url":"https://api.github.com/users/jpy-git/repos","events_url":"https://api.github.com/users/jpy-git/events{/privacy}","received_events_url":"https://api.github.com/users/jpy-git/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","site_admin":false},"assignees":[{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","site_admin":false}],"milestone":null,"comments":9,"created_at":"2022-03-15T17:35:27Z","updated_at":"2022-03-30T21:02:07Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2926","html_url":"https://github.com/psf/black/pull/2926","diff_url":"https://github.com/psf/black/pull/2926.diff","patch_url":"https://github.com/psf/black/pull/2926.patch","merged_at":null},"body":"### Description\r\nCloses #2921. Aims to remove redundant parentheses from `with` statements:\r\n![Screen-Recording-2022-03-15-at-17 20 39](https://user-images.githubusercontent.com/80432516/158435983-705c0e92-bd9a-434b-95ef-6c15ecc68664.gif)\r\n\r\nI currently have one failing test [tests/data/parenthesized_context_managers.py](https://github.com/psf/black/blob/main/tests/data/parenthesized_context_managers.py) since this code now removes unnecessary parentheses around one-line `with` statements, so think I'll just need to update the test to reflect this. \r\nI tried looking in the contributing docs but couldn't see any info on how the tests work so please could you advise on where I should add this?\r\n\r\nThis is my first time contributing to black so let me know if there's anything I've missed üòÑ \r\n\r\nThanks!\r\n\r\n- [X] Add a CHANGELOG entry if necessary?\r\n- [x] Add / update tests if necessary?\r\n- [x] Add new / update outdated documentation?","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2926/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2925","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2925/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2925/comments","events_url":"https://api.github.com/repos/psf/black/issues/2925/events","html_url":"https://github.com/psf/black/issues/2925","id":1169942528,"node_id":"I_kwDOB3dpmM5Fu-gA","number":2925,"title":"Does flake8 still ignore W503 by default?","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","site_admin":false},"labels":[{"id":867432800,"node_id":"MDU6TGFiZWw4Njc0MzI4MDA=","url":"https://api.github.com/repos/psf/black/labels/good%20first%20issue","name":"good first issue","color":"7057ff","default":true,"description":"Good for newcomers"},{"id":871279155,"node_id":"MDU6TGFiZWw4NzEyNzkxNTU=","url":"https://api.github.com/repos/psf/black/labels/T:%20documentation","name":"T: documentation","color":"fbcd00","default":false,"description":"Improvements to the docs (e.g. new topic, correction, etc)"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-03-15T16:58:58Z","updated_at":"2022-03-16T19:44:00Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"body":"Suspect regression. Using v 4.0.1 (Gentoo X86_64). Having just installed black (v22.1.0), reformatting produced multiple W503 messages. Attempted to utilize extended-ignore and reloaded/rescanned project. Warnings persisted. I ensured no W503/W504 ignores were present in code or configuration. Only after adding explicitly W503 to extended-ignore would flake8 be satisfied.\r\n\r\n_Originally posted by @scottfurry in https://github.com/psf/black/issues/1661#issuecomment-1048462407_","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2925/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2921","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2921/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2921/comments","events_url":"https://api.github.com/repos/psf/black/issues/2921/events","html_url":"https://github.com/psf/black/issues/2921","id":1168545163,"node_id":"I_kwDOB3dpmM5FppWL","number":2921,"title":"Drop redundant parenthesis in `with` statement","user":{"login":"intgr","id":137616,"node_id":"MDQ6VXNlcjEzNzYxNg==","avatar_url":"https://avatars.githubusercontent.com/u/137616?v=4","gravatar_id":"","url":"https://api.github.com/users/intgr","html_url":"https://github.com/intgr","followers_url":"https://api.github.com/users/intgr/followers","following_url":"https://api.github.com/users/intgr/following{/other_user}","gists_url":"https://api.github.com/users/intgr/gists{/gist_id}","starred_url":"https://api.github.com/users/intgr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intgr/subscriptions","organizations_url":"https://api.github.com/users/intgr/orgs","repos_url":"https://api.github.com/users/intgr/repos","events_url":"https://api.github.com/users/intgr/events{/privacy}","received_events_url":"https://api.github.com/users/intgr/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":959878692,"node_id":"MDU6TGFiZWw5NTk4Nzg2OTI=","url":"https://api.github.com/repos/psf/black/labels/F:%20parentheses","name":"F: parentheses","color":"3afca4","default":false,"description":"Too many parentheses, not enough parentheses, and so on."},{"id":2955697253,"node_id":"MDU6TGFiZWwyOTU1Njk3MjUz","url":"https://api.github.com/repos/psf/black/labels/S:%20accepted","name":"S: accepted","color":"C2E0C6","default":false,"description":"The changes in this design / enhancement issue have been accepted and can be implemented"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-03-14T15:28:24Z","updated_at":"2022-03-14T15:32:09Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nBlack removes redundant parenthesis in most contexts, but this does not apply to the `with` statement yet.\r\n\r\n**To Reproduce**\r\n[Playground link](https://black.vercel.app/?version=main&state=_Td6WFoAAATm1rRGAgAhARYAAAB0L-Wj4ACXAFtdAD2IimZxl1N_Wlws4SR5ySw_sBpDkhU93hOCZPT-hFkjq5Stk1KilvNEQNrc4EaZ8ufi_zEpnhZViAkrMAiyAFGllzQQ2rS3TSp7D0gVbLYWtVvdCKgKqXub2lwAAPSQHVnPZQFHAAF3mAEAAAAQ4riMscRn-wIAAAAABFla)\r\n\r\n```python\r\nif (open(\"bla.txt\")):\r\n    pass\r\n\r\nwith (open(\"bla.txt\")):\r\n    pass\r\n```\r\n\r\nOutput:\r\n```python\r\nif open(\"bla.txt\"):    # <-- parenthesis removed\r\n    pass\r\n\r\nwith (open(\"bla.txt\")):    # <-- parenthesis retained\r\n    pass\r\n```\r\n\r\nAdding `--target-version=py310` or `--preview` does not change this behavior.\r\n\r\n**Environment**\r\n\r\n- Black's version: 22.1.0 and main branch\r\n- OS and Python version: Python 3.10\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2921/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2920","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2920/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2920/comments","events_url":"https://api.github.com/repos/psf/black/issues/2920/events","html_url":"https://github.com/psf/black/issues/2920","id":1168229385,"node_id":"I_kwDOB3dpmM5FocQJ","number":2920,"title":"Unexpected formatting of subscript fluent interface","user":{"login":"petersaalbrink","id":33287082,"node_id":"MDQ6VXNlcjMzMjg3MDgy","avatar_url":"https://avatars.githubusercontent.com/u/33287082?v=4","gravatar_id":"","url":"https://api.github.com/users/petersaalbrink","html_url":"https://github.com/petersaalbrink","followers_url":"https://api.github.com/users/petersaalbrink/followers","following_url":"https://api.github.com/users/petersaalbrink/following{/other_user}","gists_url":"https://api.github.com/users/petersaalbrink/gists{/gist_id}","starred_url":"https://api.github.com/users/petersaalbrink/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/petersaalbrink/subscriptions","organizations_url":"https://api.github.com/users/petersaalbrink/orgs","repos_url":"https://api.github.com/users/petersaalbrink/repos","events_url":"https://api.github.com/users/petersaalbrink/events{/privacy}","received_events_url":"https://api.github.com/users/petersaalbrink/received_events","type":"User","site_admin":false},"labels":[{"id":3042873307,"node_id":"MDU6TGFiZWwzMDQyODczMzA3","url":"https://api.github.com/repos/psf/black/labels/F:%20linebreak","name":"F: linebreak","color":"bfd4f2","default":false,"description":"How should we split up lines?"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-14T11:16:28Z","updated_at":"2022-03-14T15:49:01Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Black version: 22.1.0\r\n\r\nSuppose I have a deeply nested `dict`-like object:\r\n\r\n```python\r\ndata = {\r\n    \"long_key_name_0\": {\r\n        \"long_key_name_1\": {\r\n            \"long_key_name_2\": {\r\n                \"long_key_name_3\": {\r\n                    \"long_key_name_4\": {\r\n                        \"long_key_name_5\": {\r\n                            \"long_key_name_6\": {\r\n                                \"long_key_name_7\": {\r\n                                    \"long_key_name_8\": {\"long_key_name_9\": {}}\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIf I access a nested value using a chained `getitem` expression (cf. fluent interface), Black formats the subscript notation in the following way: \r\n\r\n```python\r\nvalue = data[\"long_key_name_0\"][\"long_key_name_1\"][\"long_key_name_2\"][\r\n    \"long_key_name_3\"\r\n][\"long_key_name_4\"][\"long_key_name_5\"][\"long_key_name_6\"][\"long_key_name_7\"][\r\n    \"long_key_name_8\"\r\n][\r\n    \"long_key_name_9\"\r\n]\r\n```\r\n\r\nHowever, this would be my desired format:\r\n\r\n```python\r\nvalue = (\r\n    data\r\n    [\"long_key_name_0\"]\r\n    [\"long_key_name_1\"]\r\n    [\"long_key_name_2\"]\r\n    [\"long_key_name_3\"]\r\n    [\"long_key_name_4\"]\r\n    [\"long_key_name_5\"]\r\n    [\"long_key_name_6\"]\r\n    [\"long_key_name_7\"]\r\n    [\"long_key_name_8\"]\r\n    [\"long_key_name_9\"]\r\n)\r\n```\r\n\r\nThis issue is related to the following open issues:\r\n* https://github.com/psf/black/issues/510\r\n* https://github.com/psf/black/issues/571\r\n* https://github.com/psf/black/issues/814\r\n* https://github.com/psf/black/issues/1280\r\n* https://github.com/psf/black/issues/2156\r\n* https://github.com/psf/black/issues/2566\r\n\r\nHowever, since this issue is not exactly the same (as it is a combination between fluent interface and subscript notation), I decided to open a new issue for it. \r\n\r\nPossible labels:\r\n* linebreak\r\n* design\r\n* parentheses\r\n* symmetry\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2920/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2917","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2917/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2917/comments","events_url":"https://api.github.com/repos/psf/black/issues/2917/events","html_url":"https://github.com/psf/black/issues/2917","id":1167647468,"node_id":"I_kwDOB3dpmM5FmOLs","number":2917,"title":"`#fmt:skip` causes NTERNAL ERROR: Black produced different code on the second pass of the formatter","user":{"login":"ewahl-al","id":31223574,"node_id":"MDQ6VXNlcjMxMjIzNTc0","avatar_url":"https://avatars.githubusercontent.com/u/31223574?v=4","gravatar_id":"","url":"https://api.github.com/users/ewahl-al","html_url":"https://github.com/ewahl-al","followers_url":"https://api.github.com/users/ewahl-al/followers","following_url":"https://api.github.com/users/ewahl-al/following{/other_user}","gists_url":"https://api.github.com/users/ewahl-al/gists{/gist_id}","starred_url":"https://api.github.com/users/ewahl-al/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewahl-al/subscriptions","organizations_url":"https://api.github.com/users/ewahl-al/orgs","repos_url":"https://api.github.com/users/ewahl-al/repos","events_url":"https://api.github.com/users/ewahl-al/events{/privacy}","received_events_url":"https://api.github.com/users/ewahl-al/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":3042738070,"node_id":"MDU6TGFiZWwzMDQyNzM4MDcw","url":"https://api.github.com/repos/psf/black/labels/F:%20fmtskip","name":"F: fmtskip","color":"fbca04","default":false,"description":"fmt: skip implementation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-03-13T17:46:48Z","updated_at":"2022-03-13T17:48:24Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nA comment `#fmt:skip` with no internal space causes `INTERNAL ERROR: Black produced different code on the second pass of the formatter`\r\n\r\nAlso the same code, if run with `--fast` creates incorrectly formatted code with multiple copies of the comment on the next line.\r\n\r\n**To Reproduce**\r\n\r\nFor example, take this code:\r\n\r\n```python\r\nimport re\r\n\r\nline = \"some dummy data\"\r\nlog_search = re.search('CLOCK:\\s*(\\[.*\\])--(\\[.*\\])\\s*=>\\s*(\\d*:\\d*)', line)  #fmt:skip\r\n```\r\n\r\nAnd run it with these arguments:\r\n\r\n```sh\r\n$ black fmt_skip.py .\r\n```\r\n\r\nThe resulting error is:\r\n\r\nerror: cannot format fmt_skip.py: INTERNAL ERROR: Black produced different code on the second pass of the formatter.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /var/folders/cs/p77vt_fn271bcw6gw69d_2y40000gn/T/blk_i64a7rxi.log\r\n\r\nALSO\r\n\r\n```sh\r\n$ black fmt_skip.py . --fast\r\n```\r\n\r\nThe resulting error is that the output is:\r\n```python\r\nimport re\r\n\r\nline = \"some dummy data\"\r\nlog_search = re.search('CLOCK:\\s*(\\[.*\\])--(\\[.*\\])\\s*=>\\s*(\\d*:\\d*)', line)  #fmt:skip\r\n  # fmt:skip  # fmt:skip\r\n```\r\n\r\n**Expected behavior**\r\n\r\nBlack should not change the line format as it is marked to be skipped.\r\n\r\n**Environment**\r\n\r\n* MacOS 12.2.1\r\n* Python 3.8.5\r\n* black 22.1.0\r\n\r\nAlso reproducible on the Black Playground: https://black.vercel.app/?version=main","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2917/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2916","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2916/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2916/comments","events_url":"https://api.github.com/repos/psf/black/issues/2916/events","html_url":"https://github.com/psf/black/pull/2916","id":1167546331,"node_id":"PR_kwDOB3dpmM40WsD8","number":2916,"title":"Format hex code in unicode escape sequences in string literals","user":{"login":"Shivansh-007","id":69356296,"node_id":"MDQ6VXNlcjY5MzU2Mjk2","avatar_url":"https://avatars.githubusercontent.com/u/69356296?v=4","gravatar_id":"","url":"https://api.github.com/users/Shivansh-007","html_url":"https://github.com/Shivansh-007","followers_url":"https://api.github.com/users/Shivansh-007/followers","following_url":"https://api.github.com/users/Shivansh-007/following{/other_user}","gists_url":"https://api.github.com/users/Shivansh-007/gists{/gist_id}","starred_url":"https://api.github.com/users/Shivansh-007/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shivansh-007/subscriptions","organizations_url":"https://api.github.com/users/Shivansh-007/orgs","repos_url":"https://api.github.com/users/Shivansh-007/repos","events_url":"https://api.github.com/users/Shivansh-007/events{/privacy}","received_events_url":"https://api.github.com/users/Shivansh-007/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","site_admin":false},"assignees":[{"login":"JelleZijlstra","id":906600,"node_id":"MDQ6VXNlcjkwNjYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/906600?v=4","gravatar_id":"","url":"https://api.github.com/users/JelleZijlstra","html_url":"https://github.com/JelleZijlstra","followers_url":"https://api.github.com/users/JelleZijlstra/followers","following_url":"https://api.github.com/users/JelleZijlstra/following{/other_user}","gists_url":"https://api.github.com/users/JelleZijlstra/gists{/gist_id}","starred_url":"https://api.github.com/users/JelleZijlstra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JelleZijlstra/subscriptions","organizations_url":"https://api.github.com/users/JelleZijlstra/orgs","repos_url":"https://api.github.com/users/JelleZijlstra/repos","events_url":"https://api.github.com/users/JelleZijlstra/events{/privacy}","received_events_url":"https://api.github.com/users/JelleZijlstra/received_events","type":"User","site_admin":false}],"milestone":null,"comments":1,"created_at":"2022-03-13T10:55:05Z","updated_at":"2022-03-25T15:00:26Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2916","html_url":"https://github.com/psf/black/pull/2916","diff_url":"https://github.com/psf/black/pull/2916.diff","patch_url":"https://github.com/psf/black/pull/2916.patch","merged_at":null},"body":"Closes #2067 \r\nCloses #2828 \r\n\r\n### Checklist - did you ...\r\n\r\n- [X] Add a CHANGELOG entry if necessary?\r\n- [X] Add / update tests if necessary?\r\n- [X] Add new / update outdated documentation? -> n/a\r\n\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2916/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2915","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2915/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2915/comments","events_url":"https://api.github.com/repos/psf/black/issues/2915/events","html_url":"https://github.com/psf/black/issues/2915","id":1166708256,"node_id":"I_kwDOB3dpmM5Fio4g","number":2915,"title":"Horizontally align quotes in multi-line f-string breaks","user":{"login":"ajoino","id":29884439,"node_id":"MDQ6VXNlcjI5ODg0NDM5","avatar_url":"https://avatars.githubusercontent.com/u/29884439?v=4","gravatar_id":"","url":"https://api.github.com/users/ajoino","html_url":"https://github.com/ajoino","followers_url":"https://api.github.com/users/ajoino/followers","following_url":"https://api.github.com/users/ajoino/following{/other_user}","gists_url":"https://api.github.com/users/ajoino/gists{/gist_id}","starred_url":"https://api.github.com/users/ajoino/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajoino/subscriptions","organizations_url":"https://api.github.com/users/ajoino/orgs","repos_url":"https://api.github.com/users/ajoino/repos","events_url":"https://api.github.com/users/ajoino/events{/privacy}","received_events_url":"https://api.github.com/users/ajoino/received_events","type":"User","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20design","name":"T: design","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"},{"id":2972766151,"node_id":"MDU6TGFiZWwyOTcyNzY2MTUx","url":"https://api.github.com/repos/psf/black/labels/F:%20strings%20/%20docstrings","name":"F: strings / docstrings","color":"FBAA00","default":false,"description":"Related to our handling of strings and docstring like experimental string processing"},{"id":3042873307,"node_id":"MDU6TGFiZWwzMDQyODczMzA3","url":"https://api.github.com/repos/psf/black/labels/F:%20linebreak","name":"F: linebreak","color":"bfd4f2","default":false,"description":"How should we split up lines?"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-03-11T18:05:19Z","updated_at":"2022-03-11T19:00:25Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the style change**\r\n\r\n<!-- A clear and concise description of how the style can be\r\nimproved. -->\r\nAlign quotation marks for multi-line string breaks (using --preview) if the resulting strings are a mixture of f-strings and normal strings.\r\n\r\n**Examples in the current _Black_ style**\r\n\r\nBefore black:\r\n```python\r\ndef f():\r\n    stuff, things = 1, 2\r\n    long_string = f'When you create an f-string that contains so much {stuff} it has to be split over multiple lines, some splits might not \"contain\" interpolation in them. That makes the quote {things} not align.'\r\n```\r\n\r\n<!-- Think of some short code snippets that show\r\nhow the current _Black_ style is not great: -->\r\n\r\nAfter `black -l 50 --experimental-string-processing\r\n\r\n```python\r\ndef f():\r\n    stuff, things = 1, 2\r\n    long_string = (\r\n        \"When you create an f-string that\"\r\n        f\" contains so much {stuff} it has to be\"\r\n        \" split over multiple lines, some splits\"\r\n        ' might not \"contain\" interpolation in'\r\n        \" them. That makes the quote\"\r\n        f\" {things} not align.\"\r\n    )#   ^\r\n#        |\r\n#        |\r\n# Unaligned quotes\r\n```\r\n\r\n**Desired style**\r\n\r\n<!-- How do you think _Black_ should format the above snippets: -->\r\n\r\n```python\r\ndef f():\r\n    stuff, things = 1, 2\r\n    long_string = (\r\n         \"When you create an f-string that\"\r\n        f\" contains so much {stuff} it has to be\"\r\n         \" split over multiple lines, some splits\"\r\n         ' might not \"contain\" interpolation in'\r\n         \" them. That makes the quote\"\r\n        f\" {things} not align.\"\r\n    )#   ^\r\n#        |\r\n#        |\r\n# Aesthetically pleasing column of quotes\r\n```\r\n\r\n**Additional context**\r\n\r\n<!-- Add any other context about the problem here. -->\r\n\r\nBrought this up in #2188 found agreement that aligning quotes would be pleasing and it was suggested that I create an issue for discussion.\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2915/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2912","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2912/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2912/comments","events_url":"https://api.github.com/repos/psf/black/issues/2912/events","html_url":"https://github.com/psf/black/issues/2912","id":1161716757,"node_id":"I_kwDOB3dpmM5FPmQV","number":2912,"title":"Black and docformatter don't agree on multiline string which starts with a `\"`","user":{"login":"thejcannon","id":3956745,"node_id":"MDQ6VXNlcjM5NTY3NDU=","avatar_url":"https://avatars.githubusercontent.com/u/3956745?v=4","gravatar_id":"","url":"https://api.github.com/users/thejcannon","html_url":"https://github.com/thejcannon","followers_url":"https://api.github.com/users/thejcannon/followers","following_url":"https://api.github.com/users/thejcannon/following{/other_user}","gists_url":"https://api.github.com/users/thejcannon/gists{/gist_id}","starred_url":"https://api.github.com/users/thejcannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thejcannon/subscriptions","organizations_url":"https://api.github.com/users/thejcannon/orgs","repos_url":"https://api.github.com/users/thejcannon/repos","events_url":"https://api.github.com/users/thejcannon/events{/privacy}","received_events_url":"https://api.github.com/users/thejcannon/received_events","type":"User","site_admin":false},"labels":[{"id":869135448,"node_id":"MDU6TGFiZWw4NjkxMzU0NDg=","url":"https://api.github.com/repos/psf/black/labels/T:%20design","name":"T: design","color":"0052cc","default":false,"description":"What do we want Blackened code to look like?"},{"id":2972766151,"node_id":"MDU6TGFiZWwyOTcyNzY2MTUx","url":"https://api.github.com/repos/psf/black/labels/F:%20strings%20/%20docstrings","name":"F: strings / docstrings","color":"FBAA00","default":false,"description":"Related to our handling of strings and docstring like experimental string processing"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-03-07T17:31:38Z","updated_at":"2022-03-07T17:51:54Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the style change**\r\n\r\nGiven the following docstring, `black` shouldn't insert a leading space.\r\n\r\n```python\r\n\"\"\"\"Cookie eaters\" are the set of people that eat cookies.\"\"\"\r\n```\r\n\r\n**Examples in the current _Black_ style**\r\n\r\n```python\r\n\"\"\" \"Cookie eaters\" are the set of people that eat cookies.\"\"\"\r\n```\r\n\r\n**Desired style**\r\n\r\n```python\r\n\"\"\"\"Cookie eaters\" are the set of people that eat cookies.\"\"\"\r\n```\r\n\r\n(Which is how `docformatter` leaves it)\r\n\r\n**Additional context**\r\n\r\n<!-- Add any other context about the problem here. -->\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2912/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2907","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2907/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2907/comments","events_url":"https://api.github.com/repos/psf/black/issues/2907/events","html_url":"https://github.com/psf/black/issues/2907","id":1160281341,"node_id":"I_kwDOB3dpmM5FKHz9","number":2907,"title":"When detecting Python versions, `f\"{x=}\"` should imply 3.8+","user":{"login":"Zac-HD","id":12229877,"node_id":"MDQ6VXNlcjEyMjI5ODc3","avatar_url":"https://avatars.githubusercontent.com/u/12229877?v=4","gravatar_id":"","url":"https://api.github.com/users/Zac-HD","html_url":"https://github.com/Zac-HD","followers_url":"https://api.github.com/users/Zac-HD/followers","following_url":"https://api.github.com/users/Zac-HD/following{/other_user}","gists_url":"https://api.github.com/users/Zac-HD/gists{/gist_id}","starred_url":"https://api.github.com/users/Zac-HD/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zac-HD/subscriptions","organizations_url":"https://api.github.com/users/Zac-HD/orgs","repos_url":"https://api.github.com/users/Zac-HD/repos","events_url":"https://api.github.com/users/Zac-HD/events{/privacy}","received_events_url":"https://api.github.com/users/Zac-HD/received_events","type":"User","site_admin":false},"labels":[{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"},{"id":2955697253,"node_id":"MDU6TGFiZWwyOTU1Njk3MjUz","url":"https://api.github.com/repos/psf/black/labels/S:%20accepted","name":"S: accepted","color":"C2E0C6","default":false,"description":"The changes in this design / enhancement issue have been accepted and can be implemented"},{"id":3042750941,"node_id":"MDU6TGFiZWwzMDQyNzUwOTQx","url":"https://api.github.com/repos/psf/black/labels/C:%20parser","name":"C: parser","color":"0e8a16","default":false,"description":"How we parse code. Or fail to parse it."},{"id":3578151177,"node_id":"LA_kwDOB3dpmM7VRkEJ","url":"https://api.github.com/repos/psf/black/labels/C:%20target%20version","name":"C: target version","color":"1d76db","default":false,"description":"Related to --target-version, e.g. autodetection"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2022-03-05T08:14:07Z","updated_at":"2022-03-11T18:36:58Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nThe `=` specifier was added to f-strings in Python 3.8, but Black does not yet distinguish it from any other f-string, and therefore detects the version as 3.6+.  This leads to missed formatting opportunities, and sometimes problems in downstream projects since this is invalid syntax under earlier versions.  (e.g. https://github.com/Zac-HD/shed/issues/31, prompting this issue)\r\n\r\n**To Reproduce**\r\n\r\n```python\r\nfrom black import detect_target_versions, parsing\r\n\r\ncode = parsing.lib2to3_parse(\"\"\"\r\nf'{x=}'\r\n\"\"\")\r\nprint(detect_target_versions(code))\r\n```\r\n```\r\n$ python repro.py\r\n{<TargetVersion.PY36: 6>, <TargetVersion.PY37: 7>, <TargetVersion.PY38: 8>, <TargetVersion.PY39: 9>, <TargetVersion.PY310: 10>}\r\n```","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2907/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2907/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2893","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2893/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2893/comments","events_url":"https://api.github.com/repos/psf/black/issues/2893/events","html_url":"https://github.com/psf/black/issues/2893","id":1146203038,"node_id":"I_kwDOB3dpmM5EUaue","number":2893,"title":"Line too long: Keyword argument","user":{"login":"Redjest","id":21100695,"node_id":"MDQ6VXNlcjIxMTAwNjk1","avatar_url":"https://avatars.githubusercontent.com/u/21100695?v=4","gravatar_id":"","url":"https://api.github.com/users/Redjest","html_url":"https://github.com/Redjest","followers_url":"https://api.github.com/users/Redjest/followers","following_url":"https://api.github.com/users/Redjest/following{/other_user}","gists_url":"https://api.github.com/users/Redjest/gists{/gist_id}","starred_url":"https://api.github.com/users/Redjest/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Redjest/subscriptions","organizations_url":"https://api.github.com/users/Redjest/orgs","repos_url":"https://api.github.com/users/Redjest/repos","events_url":"https://api.github.com/users/Redjest/events{/privacy}","received_events_url":"https://api.github.com/users/Redjest/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":3042838963,"node_id":"MDU6TGFiZWwzMDQyODM4OTYz","url":"https://api.github.com/repos/psf/black/labels/F:%20linetoolong","name":"F: linetoolong","color":"794713","default":false,"description":"Black makes our lines too long"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-02-21T20:29:44Z","updated_at":"2022-02-21T20:32:50Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"Thanks for creating and maintaining `black` it is by far my favorite code styling tool (:\r\n\r\nOn some cases `black`'s may be incompatible with `Flake8`'s E501 (line too long).\r\n\r\nFor example, consider code like this:\r\n\r\n```python\r\nfunc(\r\n    long_long_long_long_long_long_long_long_long_long_long_arg=\r\n    long_long_long_long_long_class.long_long_long_long_attr\r\n    )\r\n```\r\n(less than 88 characters lines)\r\n\r\nBlack will edit it to:\r\n```python\r\nf(\r\n    long_long_long_long_long_long_long_long_long_long_long_arg=long_long_long_long_long_class.long_long_long_long_attr\r\n)\r\n```\r\nMaking the line more than 88 characters.\r\n\r\nIf you have both tools together in your environment, `black` will edit and then `flake8` will fail.\r\n\r\nA simple workaround is to add E501 to the `extend-ignore` of `flake8`, but I'm not sure if `black`'s behaviour here is intentional or it's just a corner case not covered.","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2893/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2885","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2885/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2885/comments","events_url":"https://api.github.com/repos/psf/black/issues/2885/events","html_url":"https://github.com/psf/black/pull/2885","id":1141702128,"node_id":"PR_kwDOB3dpmM4zAl75","number":2885,"title":"Add improved docstring processing","user":{"login":"TomFryers","id":61272761,"node_id":"MDQ6VXNlcjYxMjcyNzYx","avatar_url":"https://avatars.githubusercontent.com/u/61272761?v=4","gravatar_id":"","url":"https://api.github.com/users/TomFryers","html_url":"https://github.com/TomFryers","followers_url":"https://api.github.com/users/TomFryers/followers","following_url":"https://api.github.com/users/TomFryers/following{/other_user}","gists_url":"https://api.github.com/users/TomFryers/gists{/gist_id}","starred_url":"https://api.github.com/users/TomFryers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomFryers/subscriptions","organizations_url":"https://api.github.com/users/TomFryers/orgs","repos_url":"https://api.github.com/users/TomFryers/repos","events_url":"https://api.github.com/users/TomFryers/events{/privacy}","received_events_url":"https://api.github.com/users/TomFryers/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-02-17T18:28:26Z","updated_at":"2022-03-28T21:22:14Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2885","html_url":"https://github.com/psf/black/pull/2885","diff_url":"https://github.com/psf/black/pull/2885.diff","patch_url":"https://github.com/psf/black/pull/2885.patch","merged_at":null},"body":"### Description\r\n\r\nOne of the things discussed in issue #144 was quote placement. Reading through the discussion, there seemed (to me, at least) to be general support for normalising this.\r\n\r\nThis does two things. For very short docstrings,\r\n\r\n```python\r\ndef foo():\r\n    \"\"\"\r\n    Why is this on its own line?\r\n    \"\"\"\r\n```\r\n\r\nbecomes\r\n```python\r\ndef foo():\r\n    \"\"\"Why is this on its own line?\"\"\"\r\n```\r\nand for docstrings of more than one line, a single newline at the start and (pre-indent) end are enforced, so\r\n```python\r\ndef foo():\r\n    \"\"\"Words\r\n\r\n    More words\r\n    \"\"\"\r\n```\r\nand\r\n```python\r\ndef foo():\r\n    \"\"\"\r\n    \r\n    Words\r\n\r\n    More words\r\n\r\n    \"\"\"\r\n```\r\nboth become\r\n```python\r\ndef foo():\r\n    \"\"\"\r\n    Words\r\n\r\n    More words\r\n    \"\"\"\r\n```\r\nwhich seemed to be the more popular style (compared with having no newline line at the start) in the #144 thread.\r\n\r\nAt the moment, any docstring with only one line of content will be converted to the one-line form. This may be problematic if it is very long, but I'm not sure what the line-length limit should be if this were changed: the normal line length limit, or 72 characters as specified by PEP 8 (which I'm not sure actually applies to single-line docstrings), or something else?\r\n\r\nI changed some tests files where the docstring formatting didn‚Äôt seem relevant, so as not to have two copies of too many test files.\r\n\r\nI didn‚Äôt reformat Black‚Äôs own source code with this change. There are parts of Black‚Äôs source that are already affected by `--preview`, so maybe this should change at the same time.\r\n### Checklist - did you ...\r\n\r\n- [x] Add a CHANGELOG entry if necessary?\r\n- [x] Add / update tests if necessary?\r\n- [x] Add new / update outdated documentation?\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2885/reactions","total_count":4,"+1":1,"-1":3,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2885/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2883","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2883/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2883/comments","events_url":"https://api.github.com/repos/psf/black/issues/2883/events","html_url":"https://github.com/psf/black/issues/2883","id":1138053821,"node_id":"I_kwDOB3dpmM5D1VK9","number":2883,"title":"Black over Language Server Protocol and VS Code extension","user":{"login":"karthiknadig","id":3840081,"node_id":"MDQ6VXNlcjM4NDAwODE=","avatar_url":"https://avatars.githubusercontent.com/u/3840081?v=4","gravatar_id":"","url":"https://api.github.com/users/karthiknadig","html_url":"https://github.com/karthiknadig","followers_url":"https://api.github.com/users/karthiknadig/followers","following_url":"https://api.github.com/users/karthiknadig/following{/other_user}","gists_url":"https://api.github.com/users/karthiknadig/gists{/gist_id}","starred_url":"https://api.github.com/users/karthiknadig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthiknadig/subscriptions","organizations_url":"https://api.github.com/users/karthiknadig/orgs","repos_url":"https://api.github.com/users/karthiknadig/repos","events_url":"https://api.github.com/users/karthiknadig/events{/privacy}","received_events_url":"https://api.github.com/users/karthiknadig/received_events","type":"User","site_admin":false},"labels":[{"id":867432796,"node_id":"MDU6TGFiZWw4Njc0MzI3OTY=","url":"https://api.github.com/repos/psf/black/labels/T:%20enhancement","name":"T: enhancement","color":"a2eeef","default":false,"description":"New feature or request"},{"id":1348564996,"node_id":"MDU6TGFiZWwxMzQ4NTY0OTk2","url":"https://api.github.com/repos/psf/black/labels/C:%20integrations","name":"C: integrations","color":"c5def5","default":false,"description":"Editor plugins and other integrations"},{"id":2955619138,"node_id":"MDU6TGFiZWwyOTU1NjE5MTM4","url":"https://api.github.com/repos/psf/black/labels/C:%20maintenance","name":"C: maintenance","color":"505678","default":false,"description":"Related to project maintenance, e.g. CI, testing, policy changes, releases"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2022-02-15T01:21:10Z","updated_at":"2022-02-22T20:05:28Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"The [Python team for VS Code](https://github.com/microsoft/vscode-python) has been working on putting various tools we support behind [LSP](https://microsoft.github.io/language-server-protocol/) and breaking them out into their own extensions This work is now far enough along that we wanted to share the extension prototypes for your tool with you and see if you had any interest in owning the extension or the Python-based LSP server backing it yourself?\r\n\r\nIf you don't want to take on that responsibility that's totally fine and understandable! If you want to leave the extension to us we would then publish the extension on the [VS Code Marketplace](https://marketplace.visualstudio.com/VSCode) ourselves. We also plan to publish the extension as open source and support the extension for as long as we felt it made sense based on usage numbers. But due to the difficulty of migrating extension ownership, we wanted to ask early whether you wanted to own the extension from the start? If you did want to own the extension we would give you the code, help you publish to the VS Code Marketplace, and do anything else we can to help you be successful with this.\r\n\r\nWe have attached a zip file to this issue containing a prototype extension to give you an idea of what we are planning. You can download it, extract the `.vsix` file, and then [install the VSIX](https://code.visualstudio.com/docs/editor/extension-marketplace#_install-from-a-vsix) to try it out [python-black.zip](https://github.com/psf/black/files/8066039/python-black.zip). This prototype version was built with python 3.10 and bundles black v22.1.0 (as fallback if nothing is found in your environment).\r\n\r\nTo be very clear, there's no pressure or expectations from us. We just want to make sure you as a project had an opportunity to own this extension instead of us from the get-go before the extension gained traction.","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2883/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2883/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2882","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2882/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2882/comments","events_url":"https://api.github.com/repos/psf/black/issues/2882/events","html_url":"https://github.com/psf/black/issues/2882","id":1137904121,"node_id":"I_kwDOB3dpmM5D0wn5","number":2882,"title":"INTERNAL ERROR: Black produced code that is not equivalent to the source","user":{"login":"jreese","id":6444,"node_id":"MDQ6VXNlcjY0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6444?v=4","gravatar_id":"","url":"https://api.github.com/users/jreese","html_url":"https://github.com/jreese","followers_url":"https://api.github.com/users/jreese/followers","following_url":"https://api.github.com/users/jreese/following{/other_user}","gists_url":"https://api.github.com/users/jreese/gists{/gist_id}","starred_url":"https://api.github.com/users/jreese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jreese/subscriptions","organizations_url":"https://api.github.com/users/jreese/orgs","repos_url":"https://api.github.com/users/jreese/repos","events_url":"https://api.github.com/users/jreese/events{/privacy}","received_events_url":"https://api.github.com/users/jreese/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":3042738224,"node_id":"MDU6TGFiZWwzMDQyNzM4MjI0","url":"https://api.github.com/repos/psf/black/labels/F:%20fmtoff","name":"F: fmtoff","color":"4E4AA8","default":false,"description":"fmt: off implementation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-02-14T22:06:30Z","updated_at":"2022-02-14T23:50:04Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nError formatting python sources in https://github.com/pytorch/fairseq\r\n\r\n**To Reproduce**\r\n\r\nClone [fairseq](https://github.com/pytorch/fairseq) and run black on offending files:\r\n\r\n```\r\nfairseq $ black --version\r\nblack, 22.1.0 (compiled: yes)\r\n\r\nfairseq $ black --check \\\r\n  examples/simultaneous_translation/modules/monotonic_multihead_attention.py \\\r\n  examples/speech_text_joint_to_text/criterions/text_guide_cross_entropy_acc.py \\\r\n  examples/wav2vec/unsupervised/scripts/pca.py\r\n\r\nerror: cannot format examples/wav2vec/unsupervised/scripts/pca.py: INTERNAL ERROR: Black produced code that is not equivalent to the source.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /var/folders/jg/hrl2p4ms1vjbn44gmmyl4p7r0000gn/T/blk_lda03pi7.log\r\nerror: cannot format examples/speech_text_joint_to_text/criterions/text_guide_cross_entropy_acc.py: INTERNAL ERROR: Black produced code that is not equivalent to the source.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /var/folders/jg/hrl2p4ms1vjbn44gmmyl4p7r0000gn/T/blk_ctr_udzr.log\r\nerror: cannot format examples/simultaneous_translation/modules/monotonic_multihead_attention.py: INTERNAL ERROR: Black produced code that is not equivalent to the source.  Please report a bug on https://github.com/psf/black/issues.  This diff might be helpful: /var/folders/jg/hrl2p4ms1vjbn44gmmyl4p7r0000gn/T/blk_u26gqsix.log\r\n\r\nOh no! üí• üíî üí•\r\n3 files would fail to reformat.\r\n```\r\n\r\nDebug diffs:\r\n\r\n- [examples/simultaneous_translation/modules/monotonic_multihead_attention.py](https://gist.github.com/d0c11fed21612e54094d34b480b4cd20)\r\n- [examples/speech_text_joint_to_text/criterions/text_guide_cross_entropy_acc.py](https://gist.github.com/8475c6128a4259d352b6c940edd9315e)\r\n- [examples/wav2vec/unsupervised/scripts/pca.py](https://gist.github.com/f2c873f5b0c35133efffbb595fee5d2f)\r\n\r\n**Environment**\r\n\r\n- Black's version: 22.1.0\r\n- OS and Python version: macOS 12.1\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2882/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2881","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2881/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2881/comments","events_url":"https://api.github.com/repos/psf/black/issues/2881/events","html_url":"https://github.com/psf/black/pull/2881","id":1136815390,"node_id":"PR_kwDOB3dpmM4ywq-B","number":2881,"title":"Bump myst-parser from 0.16.1 to 0.17.0 in /docs","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","site_admin":false},"labels":[{"id":871279155,"node_id":"MDU6TGFiZWw4NzEyNzkxNTU=","url":"https://api.github.com/repos/psf/black/labels/T:%20documentation","name":"T: documentation","color":"fbcd00","default":false,"description":"Improvements to the docs (e.g. new topic, correction, etc)"},{"id":1931697970,"node_id":"MDU6TGFiZWwxOTMxNjk3OTcw","url":"https://api.github.com/repos/psf/black/labels/C:%20dependencies","name":"C: dependencies","color":"0366d6","default":false,"description":""},{"id":2843125410,"node_id":"MDU6TGFiZWwyODQzMTI1NDEw","url":"https://api.github.com/repos/psf/black/labels/skip%20news","name":"skip news","color":"D98D5B","default":false,"description":"Skip the need for a changelog entry for a Pull Request"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-02-14T06:04:18Z","updated_at":"2022-03-28T17:22:29Z","closed_at":null,"author_association":"CONTRIBUTOR","active_lock_reason":null,"draft":false,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2881","html_url":"https://github.com/psf/black/pull/2881","diff_url":"https://github.com/psf/black/pull/2881.diff","patch_url":"https://github.com/psf/black/pull/2881.patch","merged_at":null},"body":"Bumps [myst-parser](https://github.com/executablebooks/MyST-Parser) from 0.16.1 to 0.17.0.\n<details>\n<summary>Release notes</summary>\n<p><em>Sourced from <a href=\"https://github.com/executablebooks/MyST-Parser/releases\">myst-parser's releases</a>.</em></p>\n<blockquote>\n<h2>v0.17.0</h2>\n<p>See: <a href=\"https://myst-parser.readthedocs.io/en/latest/develop/_changelog.html\">https://myst-parser.readthedocs.io/en/latest/develop/_changelog.html</a></p>\n<h2>What's Changed</h2>\n<ul>\n<li>üëå IMPROVE: Add <code>bullet</code> attribute to <code>bullet_list</code> node by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/465\">executablebooks/MyST-Parser#465</a></li>\n<li>üëå IMPROVE: Use correct renderer for <code>state.inline_text</code> by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/466\">executablebooks/MyST-Parser#466</a></li>\n<li>üß™ TESTS: Use <code>publish_doctree</code> to test error reporting by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/472\">executablebooks/MyST-Parser#472</a></li>\n<li>üß™ TESTS: Ensure myst-docutils does not install sphinx by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/473\">executablebooks/MyST-Parser#473</a></li>\n<li>‚ôªÔ∏è REFACTOR: Parsing logic of Markdown links by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/467\">executablebooks/MyST-Parser#467</a></li>\n<li>‚ôªÔ∏è REFACTOR: <code>default_parser</code> -&gt; <code>create_md_parser</code> by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/474\">executablebooks/MyST-Parser#474</a></li>\n<li>‚¨ÜÔ∏è UPGRADE: Drop python 3.6, support 3.10 by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/475\">executablebooks/MyST-Parser#475</a></li>\n<li>üëå IMPROVE: Docutils parser settings by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/476\">executablebooks/MyST-Parser#476</a></li>\n<li>üêõ FIX: front-matter rendering with docutils by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/477\">executablebooks/MyST-Parser#477</a></li>\n<li>üëå IMPROVE: Code block highlighting by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/478\">executablebooks/MyST-Parser#478</a></li>\n<li>üêõ FIX: Front matter -&gt; sphinx metadata regression by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/480\">executablebooks/MyST-Parser#480</a></li>\n<li>üëå IMPROVE: <code>note_refname</code> for docutils internal links by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/481\">executablebooks/MyST-Parser#481</a></li>\n<li>üêõ FIX: Ordered list starting number by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/483\">executablebooks/MyST-Parser#483</a></li>\n<li>üëå IMPROVE: Propagate enumerated list suffix by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/484\">executablebooks/MyST-Parser#484</a></li>\n<li>üëå IMPROVE: <code>DocutilsRenderer.create_highlighted_code_block</code> by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/488\">executablebooks/MyST-Parser#488</a></li>\n<li>üêõ FIX: Source line reporting for nested parsing by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/490\">executablebooks/MyST-Parser#490</a></li>\n<li>üß™ TESTS: Use <code>pytest-param-files</code> by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/496\">executablebooks/MyST-Parser#496</a></li>\n<li>üëå IMPROVE: Convert nested headings to rubrics by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/497\">executablebooks/MyST-Parser#497</a></li>\n<li>üîÄ MERGE: Internal improvements to the code base by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/498\">executablebooks/MyST-Parser#498</a></li>\n<li>‚ú® NEW: Add <code>myst_title_to_header</code> configuration by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/492\">executablebooks/MyST-Parser#492</a></li>\n<li>üêõ FIX: linkify link rendering by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/499\">executablebooks/MyST-Parser#499</a></li>\n<li>üß™ TESTS: Update pytest-param-files by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/500\">executablebooks/MyST-Parser#500</a></li>\n<li>‚ú® NEW: Add <code>myst_gfm_only</code> configuration by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/501\">executablebooks/MyST-Parser#501</a></li>\n<li>‚ú® NEW: Add <code>strikethrough</code> extension by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/502\">executablebooks/MyST-Parser#502</a></li>\n<li>üîß MAINTAIN: Implement <code>MockInliner.parse</code> by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/504\">executablebooks/MyST-Parser#504</a></li>\n<li>‚ÄºÔ∏è BREAKING: Remove dollarmath from default <code>myst_enable_extensions</code> by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/505\">executablebooks/MyST-Parser#505</a></li>\n<li>üîß TESTS: Fix for sphinx 4.4 by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/508\">executablebooks/MyST-Parser#508</a></li>\n<li>üöÄ RELEASE: 0.17.0 by <a href=\"https://github.com/chrisjsewell\"><code>@‚Äãchrisjsewell</code></a> in <a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/pull/507\">executablebooks/MyST-Parser#507</a></li>\n</ul>\n<p><strong>Full Changelog</strong>: <a href=\"https://github.com/executablebooks/MyST-Parser/compare/v0.16.1...v0.17.0\">https://github.com/executablebooks/MyST-Parser/compare/v0.16.1...v0.17.0</a></p>\n</blockquote>\n</details>\n<details>\n<summary>Changelog</summary>\n<p><em>Sourced from <a href=\"https://github.com/executablebooks/MyST-Parser/blob/master/CHANGELOG.md\">myst-parser's changelog</a>.</em></p>\n<blockquote>\n<h2>0.17.0 - 2021-02-11</h2>\n<p>This release contains a number of breaking improvements.</p>\n<p>Full Changelog: <a href=\"https://github.com/executablebooks/MyST-Parser/compare/v0.16.1...v0.17.0\">v0.16.1...v0.17.0</a></p>\n<h3>‚ÄºÔ∏è Markdown link resolution improvements</h3>\n<p>Markdown links are of the format <code>[text](https://github.com/executablebooks/MyST-Parser/blob/master/link)</code>.\nMyST-Parser looks to smartly resolve such links, by identifying if they are:</p>\n<ol>\n<li>A link to an external resource, e.g. <code>[text](http://example.com)</code></li>\n<li>A link to another source document, e.g. <code>[text](https://github.com/executablebooks/MyST-Parser/blob/master/file.md)</code>\n<ul>\n<li>If <code>header-anchors</code> are enabled, anchor links are also supported, e.g. <code>[text](https://github.com/executablebooks/MyST-Parser/blob/master/file.md#anchor)</code></li>\n</ul>\n</li>\n<li>A link to an internal sphinx cross-reference, e.g. <code>[text](https://github.com/executablebooks/MyST-Parser/blob/master/my-reference)</code></li>\n</ol>\n<p>an additional situation is now supported:</p>\n<ol start=\"4\">\n<li>A link to a source file, which is not a document, e.g. <code>[text](https://github.com/executablebooks/MyST-Parser/blob/master/file.js)</code>. This behaves similarly to the sphinx <code>download</code> role.</li>\n</ol>\n<p>In addition, configuration to more finely tune this behaviour has been added.</p>\n<ul>\n<li><code>myst_all_links_external=True</code>, will make all links be treated as (1)</li>\n<li><code>myst_url_schemes=(&quot;http&quot;, &quot;https&quot;)</code>, sets what URL schemes are treated as (1)</li>\n<li><code>myst_ref_domains=(&quot;std&quot;, &quot;py&quot;)</code>, sets what Sphinx reference domains are checked, when handling (3)</li>\n</ul>\n<p>See <a href=\"https://github.com/executablebooks/MyST-Parser/blob/master/docs/syntax/syntax.md#markdown-links-and-referencing\">Markdown Links and Referencing</a> for more information.</p>\n<h3>‚ÄºÔ∏è Dollarmath is now disabled by default</h3>\n<p>The default configuration is now <code>myst_enable_extensions=()</code>, instead of <code>myst_enable_extensions=(&quot;dollarmath&quot;,)</code>.\nIf you are using math enclosed in <code>$</code> or <code>$$</code> in your documents, you should enable <code>dollarmath</code> explicitly.</p>\n<p>See <a href=\"https://github.com/executablebooks/MyST-Parser/blob/master/docs/syntax/optional.md#math-shortcuts\">Dollar delimited math</a> for more information.</p>\n<h3>‚¨ÜÔ∏è Drop Python 3.6 support</h3>\n<p>MyST-Parser now supports, and is tested against, Python 3.7 to 3.10.</p>\n<h3>‚ú® Add the <code>strikethrough</code> extension and <code>myst_gfm_only</code> configuration</h3>\n<p>The <code>strikethrough</code> extension allows text within <code>~~</code> delimiters to have a strike-through (horizontal line) placed over it.\nFor example, <code>~~strikethrough with *emphasis*~~</code> renders as: <del>strikethrough with <em>emphasis</em></del>.</p>\n<p><strong>Important</strong>: This extension is currently only supported for HTML output.</p>\n<p>See <a href=\"https://github.com/executablebooks/MyST-Parser/blob/master/docs/syntax/optional.md#strikethrough\">Strikethrough</a> for more information.</p>\n<p>The <code>myst_gfm_only=True</code> configuration sets up specific configuration, to enable compliance only with <a href=\"https://github.github.com/gfm/\">GitHub-flavored Markdown</a>, including enabling the <code>strikethrough</code>, <code>tasklist</code> and <code>linkify</code> extensions, but disabling support for roles and directives.</p>\n<!-- raw HTML omitted -->\n</blockquote>\n<p>... (truncated)</p>\n</details>\n<details>\n<summary>Commits</summary>\n<ul>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/e477a75940b7a943ca834a98cbea8bcb8d824a6c\"><code>e477a75</code></a> üöÄ RELEASE: 0.17.0 (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/507\">#507</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/7654462dc8521c0090478efa4dcfba6227e97a84\"><code>7654462</code></a> üîß TESTS: Fix for sphinx 4.4 (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/508\">#508</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/ee5ff3b22f9bd186ce3d39422bb8902b351a80a9\"><code>ee5ff3b</code></a> ‚ÄºÔ∏è BREAKING: Remove dollarmath from default <code>myst_enable_extensions</code> (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/505\">#505</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/ad6e39d30cdb0f96333e066ea9c6eb812c6aa034\"><code>ad6e39d</code></a> üîß MAINTAIN: Implement <code>MockInliner.parse</code> (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/504\">#504</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/707d9d50d2471601a0e4dce02fc5cca0272e083e\"><code>707d9d5</code></a> ‚ú® NEW: Add <code>strikethrough</code> extension (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/502\">#502</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/c3945bbc1a92ecc0e24b2d51a0bd884a3ecff452\"><code>c3945bb</code></a> ‚ú® NEW: Add <code>myst_gfm_only</code> configuration (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/501\">#501</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/05c0905a96ae8fa281a1481f87cadec17fc16acb\"><code>05c0905</code></a> üß™ TESTS: Update pytest-param-files (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/500\">#500</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/c90be9ae8a3269ec935e3ebf378e99d0af4cbd8f\"><code>c90be9a</code></a> üêõ FIX: linkify link rendering (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/499\">#499</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/574b525861f2a480ea1062f6035873e7c304bd4f\"><code>574b525</code></a> ‚ú® NEW: Add <code>myst_title_to_header</code> configuration (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/492\">#492</a>)</li>\n<li><a href=\"https://github.com/executablebooks/MyST-Parser/commit/74e91e6d81d7f28e27f6bb122c0fd6bf3a4bed88\"><code>74e91e6</code></a> üîÄ MERGE: Internal improvements to the code base (<a href=\"https://github-redirect.dependabot.com/executablebooks/MyST-Parser/issues/498\">#498</a>)</li>\n<li>Additional commits viewable in <a href=\"https://github.com/executablebooks/MyST-Parser/compare/v0.16.1...v0.17.0\">compare view</a></li>\n</ul>\n</details>\n<br />\n\n\n[![Dependabot compatibility score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=myst-parser&package-manager=pip&previous-version=0.16.1&new-version=0.17.0)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)\n\nDependabot will resolve any conflicts with this PR as long as you don't alter it yourself. You can also trigger a rebase manually by commenting `@dependabot rebase`.\n\n[//]: # (dependabot-automerge-start)\n[//]: # (dependabot-automerge-end)\n\n---\n\n<details>\n<summary>Dependabot commands and options</summary>\n<br />\n\nYou can trigger Dependabot actions by commenting on this PR:\n- `@dependabot rebase` will rebase this PR\n- `@dependabot recreate` will recreate this PR, overwriting any edits that have been made to it\n- `@dependabot merge` will merge this PR after your CI passes on it\n- `@dependabot squash and merge` will squash and merge this PR after your CI passes on it\n- `@dependabot cancel merge` will cancel a previously requested merge and block automerging\n- `@dependabot reopen` will reopen this PR if it is closed\n- `@dependabot close` will close this PR and stop Dependabot recreating it. You can achieve the same result by closing it manually\n- `@dependabot ignore this major version` will close this PR and stop Dependabot creating any more for this major version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this minor version` will close this PR and stop Dependabot creating any more for this minor version (unless you reopen the PR or upgrade to it yourself)\n- `@dependabot ignore this dependency` will close this PR and stop Dependabot creating any more for this dependency (unless you reopen the PR or upgrade to it yourself)\n\n\n</details>","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2881/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2877","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2877/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2877/comments","events_url":"https://api.github.com/repos/psf/black/issues/2877/events","html_url":"https://github.com/psf/black/issues/2877","id":1131071726,"node_id":"I_kwDOB3dpmM5Dasju","number":2877,"title":"Black removes empty lines in fmt:off sections","user":{"login":"jreese","id":6444,"node_id":"MDQ6VXNlcjY0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/6444?v=4","gravatar_id":"","url":"https://api.github.com/users/jreese","html_url":"https://github.com/jreese","followers_url":"https://api.github.com/users/jreese/followers","following_url":"https://api.github.com/users/jreese/following{/other_user}","gists_url":"https://api.github.com/users/jreese/gists{/gist_id}","starred_url":"https://api.github.com/users/jreese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jreese/subscriptions","organizations_url":"https://api.github.com/users/jreese/orgs","repos_url":"https://api.github.com/users/jreese/repos","events_url":"https://api.github.com/users/jreese/events{/privacy}","received_events_url":"https://api.github.com/users/jreese/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"},{"id":3042738224,"node_id":"MDU6TGFiZWwzMDQyNzM4MjI0","url":"https://api.github.com/repos/psf/black/labels/F:%20fmtoff","name":"F: fmtoff","color":"4E4AA8","default":false,"description":"fmt: off implementation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-02-10T21:58:03Z","updated_at":"2022-02-11T01:32:37Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"**Describe the bug**\r\n\r\nFor files with a `#fmt:off` blocks, black will still remove empty newlines in these otherwise-unformatted sections. This is kind of pedantic, but it defies expectations that black would change anything at all here.\r\n\r\n**To Reproduce**\r\n\r\nGiven the source file (note especially the trailing newlines at the end):\r\n\r\n```python\r\nsomething = [1,2,3]\r\n\r\n\r\n# fmt:off\r\nother = [1,2,3\r\n        ]\r\n\r\n\r\n\r\n# fmt:on\r\nanother = [1,2,3]\r\n\r\n\r\n\r\n# fmt:off\r\nlast = [1,2,3\r\n        ]\r\n\r\n\r\n```\r\n\r\nAnd run it with these arguments:\r\n\r\n```sh\r\n$ black --diff foo.py\r\n--- foo.py      2022-02-10 21:51:33.647821 +0000\r\n+++ foo.py      2022-02-10 21:54:13.748438 +0000\r\n@@ -1,19 +1,15 @@\r\n-something = [1,2,3]\r\n+something = [1, 2, 3]\r\n\r\n\r\n # fmt:off\r\n other = [1,2,3\r\n         ]\r\n\r\n\r\n-\r\n # fmt:on\r\n-another = [1,2,3]\r\n-\r\n+another = [1, 2, 3]\r\n\r\n\r\n # fmt:off\r\n last = [1,2,3\r\n         ]\r\n-\r\n-\r\nwould reformat foo.py\r\nAll done! ‚ú® üç∞ ‚ú®\r\n1 file would be reformatted.\r\n```\r\n\r\n**Expected behavior**\r\n\r\nBlack should leave everything as-is inside `#fmt:off` blocks, including whitespace and newlines.\r\n\r\n**Environment**\r\n\r\n<!-- Please complete the following information: -->\r\n\r\n- Black's version:\r\n```\r\n(venv39) jreese@butterfree ~/scratch ¬ª black --version\r\nblack.macos, version 21.4b2\r\n```\r\n- OS and Python version: macOS 12.1, Python 3.9.3\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2877/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2876","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2876/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2876/comments","events_url":"https://api.github.com/repos/psf/black/issues/2876/events","html_url":"https://github.com/psf/black/issues/2876","id":1128195496,"node_id":"I_kwDOB3dpmM5DPuWo","number":2876,"title":"Black in Vim on Ubuntu 22.04 does not work","user":{"login":"DanielWicz","id":37775482,"node_id":"MDQ6VXNlcjM3Nzc1NDgy","avatar_url":"https://avatars.githubusercontent.com/u/37775482?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielWicz","html_url":"https://github.com/DanielWicz","followers_url":"https://api.github.com/users/DanielWicz/followers","following_url":"https://api.github.com/users/DanielWicz/following{/other_user}","gists_url":"https://api.github.com/users/DanielWicz/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielWicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielWicz/subscriptions","organizations_url":"https://api.github.com/users/DanielWicz/orgs","repos_url":"https://api.github.com/users/DanielWicz/repos","events_url":"https://api.github.com/users/DanielWicz/events{/privacy}","received_events_url":"https://api.github.com/users/DanielWicz/received_events","type":"User","site_admin":false},"labels":[{"id":867432792,"node_id":"MDU6TGFiZWw4Njc0MzI3OTI=","url":"https://api.github.com/repos/psf/black/labels/T:%20bug","name":"T: bug","color":"d73a4a","default":false,"description":"Something isn't working"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-02-09T08:18:59Z","updated_at":"2022-02-09T08:18:59Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"body":"I've moved from Ubuntu 21.10 to 22.04 and Black stopped working then. The configuration is fallowing\r\nOS: Ubuntu 22.04\r\nPython: Anaconda with Python 3.8\r\nvim version: 8.2.3582\r\nPackage manager: Vundle\r\n\r\nI did the fallowing to solve the problem as advised in the previous issues (e.g. #2547):\r\n\r\n    Removed black from .vim/bundle\r\n    Removed black from .vim\r\n    Installed Black by PluginInstall\r\n    Installed Black by typing :Black\r\n\r\nThe effect is fallowing:\r\n\r\n```\r\nPlease wait, one time setup for Black.\r\nCreating a virtualenv in /home/daniel/.vim/black...\r\n(this path can be customized in .vimrc by setting g:black_virtualenv)\r\nInstalling Black with pip...\r\nDONE! You are all set, thanks for waiting ‚ú® üç∞ ‚ú®\r\nPro-tip: to upgrade Black in the future, use the :BlackUpgrade command and restart Vim.\r\nError detected while processing /home/daniel/.vim/bundle/black/autoload/black.vim:\r\nline  202:\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 103, in <module>\r\nModuleNotFoundError: No module named 'black'\r\nError detected while processing function black#Black:\r\nline   10:\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nNameError: name 'Black' is not defined\r\nPress ENTER or type command to continue\r\n```\r\n\r\nFurthermore, I've tried to activate the env created by Black by sourcing ~/.vim/black/bin/activate and checking if Black is installed. If I will do\r\n```\r\ncd ~/.vim/black/bin\r\nsource activate\r\n./python \r\nimport black\r\n```\r\nEverything seems to be okay and black seems to be installed. But in VIM it doesn't work. \r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2876/timeline","performed_via_github_app":null},{"url":"https://api.github.com/repos/psf/black/issues/2874","repository_url":"https://api.github.com/repos/psf/black","labels_url":"https://api.github.com/repos/psf/black/issues/2874/labels{/name}","comments_url":"https://api.github.com/repos/psf/black/issues/2874/comments","events_url":"https://api.github.com/repos/psf/black/issues/2874/events","html_url":"https://github.com/psf/black/pull/2874","id":1126751750,"node_id":"PR_kwDOB3dpmM4yNa99","number":2874,"title":"Copy over comments when hugging power ops ","user":{"login":"ichard26","id":63936253,"node_id":"MDQ6VXNlcjYzOTM2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/63936253?v=4","gravatar_id":"","url":"https://api.github.com/users/ichard26","html_url":"https://github.com/ichard26","followers_url":"https://api.github.com/users/ichard26/followers","following_url":"https://api.github.com/users/ichard26/following{/other_user}","gists_url":"https://api.github.com/users/ichard26/gists{/gist_id}","starred_url":"https://api.github.com/users/ichard26/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ichard26/subscriptions","organizations_url":"https://api.github.com/users/ichard26/orgs","repos_url":"https://api.github.com/users/ichard26/repos","events_url":"https://api.github.com/users/ichard26/events{/privacy}","received_events_url":"https://api.github.com/users/ichard26/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2022-02-08T03:32:57Z","updated_at":"2022-02-21T00:09:27Z","closed_at":null,"author_association":"COLLABORATOR","active_lock_reason":null,"draft":true,"pull_request":{"url":"https://api.github.com/repos/psf/black/pulls/2874","html_url":"https://github.com/psf/black/pull/2874","diff_url":"https://github.com/psf/black/pull/2874.diff","patch_url":"https://github.com/psf/black/pull/2874.patch","merged_at":null},"body":"### Description\r\n\r\nOtherwise they'd be deleted which was a regression in 22.1.0 (oops! my bad!). Also type comments are now tracked in the AST safety check on all compatible platforms to error out if this happens again.\r\n\r\nOverall the line rewriting code has been rewritten to do \"the right thing (tm)\", I hope this fixes other potential bugs in the code (fwiw I got to drop the bugfix in blib2to3.pytree.Leaf.clone since now bracket metadata is properly copied over).\r\n\r\ncc @henryiii\r\n\r\n- [x] Add a CHANGELOG entry if necessary?\r\n- [x] Add / update tests if necessary?\r\n- [x] Add new / update outdated documentation? -> n/a\r\n\r\n<!-- Just as a reminder, everyone in all psf/black spaces including PRs\r\n     must follow the PSF Code of Conduct (link below).\r\n\r\n     Finally, once again thanks for your time and effort. If you have any\r\n     feedback in regards to your experience contributing here, please\r\n     let us know!\r\n\r\n     Helpful links:\r\n\r\n      PSF COC: https://www.python.org/psf/conduct/\r\n      Contributing docs: https://black.readthedocs.io/en/latest/contributing/index.html\r\n      Chat on Python Discord: https://discord.gg/RtVdv86PrH -->\r\n","reactions":{"url":"https://api.github.com/repos/psf/black/issues/2874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/psf/black/issues/2874/timeline","performed_via_github_app":null}]